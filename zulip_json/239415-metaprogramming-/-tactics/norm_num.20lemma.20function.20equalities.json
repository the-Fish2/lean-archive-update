[
    {
        "content": "<p>I am currently trying to understand the changes introduced in <a href=\"https://github.com/leanprover-community/mathlib4/pull/4048\">#4048</a>. I think I understand the basic idea of the change, but I'm confused about the details. Here's the statement <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Meta.NormNum.isInt_sub#doc\">docs#Mathlib.Meta.NormNum.isInt_sub</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">isInt_sub</span> <span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">Ring</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">a'</span> <span class=\"n\">b'</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">},</span>\n    <span class=\"n\">f</span> <span class=\"bp\">=</span> <span class=\"n\">HSub.hSub</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"n\">a</span> <span class=\"n\">a'</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"n\">b</span> <span class=\"n\">b'</span> <span class=\"bp\">→</span> <span class=\"n\">Int.sub</span> <span class=\"n\">a'</span> <span class=\"n\">b'</span> <span class=\"bp\">=</span> <span class=\"n\">c</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">c</span>\n</code></pre></div>\n<p>This makes sense to me: the subtraction in the conclusion is replaced by <code>f</code>. On the other hand, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Meta.NormNum.isInt_mul#doc\">docs#Mathlib.Meta.NormNum.isInt_mul</a> looks like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">isInt_mul</span> <span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">Ring</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">a'</span> <span class=\"n\">b'</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">},</span>\n    <span class=\"n\">f</span> <span class=\"bp\">=</span> <span class=\"n\">HMul.hMul</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"n\">a</span> <span class=\"n\">a'</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"n\">b</span> <span class=\"n\">b'</span> <span class=\"bp\">→</span> <span class=\"n\">Int.mul</span> <span class=\"n\">a'</span> <span class=\"n\">b'</span> <span class=\"bp\">=</span> <span class=\"n\">c</span> <span class=\"bp\">→</span> <span class=\"n\">IsInt</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">c</span>\n</code></pre></div>\n<p>Here, the function <code>f</code> is introduced but not used in the conclusion. Should the conclusion of this lemma be <code>IsInt (f a b) c</code>?</p>",
        "id": 409343036,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1703149773
    }
]