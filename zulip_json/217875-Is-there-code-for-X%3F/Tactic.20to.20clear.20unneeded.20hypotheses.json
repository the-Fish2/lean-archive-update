[
    {
        "content": "<p>I may have asked this a few years ago but: Is there a tactic that will try to identify hypotheses that aren't necessary to prove the goal and remove them? For example, if I have <code>h : a = b</code> and this is the only place where <code>a</code> appears, then this hypothesis can be removed.</p>",
        "id": 423411934,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1708959003
    },
    {
        "content": "<p><code>clear h</code>?</p>\n<p>ah, you mean it identifies the unhelpful ones for you?</p>\n<p>There is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Meta/Tactic/Cleanup.html#Lean.MVarId.cleanup\">https://leanprover-community.github.io/mathlib4_docs/Lean/Meta/Tactic/Cleanup.html#Lean.MVarId.cleanup</a> but I don’t see it exposed as a tactic.</p>",
        "id": 423417262,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1708960406
    },
    {
        "content": "<p>if you have a <code>have</code> in your proof, clearly that hypothesis is redundant and can be removed :P</p>",
        "id": 423417585,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1708960494
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Tactic.20to.20clear.20unneeded.20hypotheses/near/423417262\">said</a>:</p>\n<blockquote>\n<p><code>clear h</code>?</p>\n<p>ah, you mean it identifies the unhelpful ones for you?</p>\n<p>There is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Meta/Tactic/Cleanup.html#Lean.MVarId.cleanup\">https://leanprover-community.github.io/mathlib4_docs/Lean/Meta/Tactic/Cleanup.html#Lean.MVarId.cleanup</a> but I don’t see it exposed as a tactic.</p>\n</blockquote>\n<p>There was some talk of getting <code>prune</code> to do that, but it is something I have not gotten around to.  The initial PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/5062\">#5062</a>.</p>",
        "id": 423417918,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1708960584
    },
    {
        "content": "<p>Even the example you gave is not definitely a useless hypothesis, it is generated by <code>generalize</code> and you can observe that there are lots of uses of it in the wild</p>",
        "id": 423418128,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1708960645
    },
    {
        "content": "<p>also removing hypotheses about equality to the original value generated by <code>match</code> can cause termination proofs to fail</p>",
        "id": 423418366,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1708960710
    }
]