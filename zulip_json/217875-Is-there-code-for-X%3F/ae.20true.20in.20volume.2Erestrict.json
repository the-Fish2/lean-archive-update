[
    {
        "content": "<p>I know that something is true for all elements of a set <code>s</code>, and want to know that it's true ae w.r.t. a measure restricted to <code>s</code>. So what's the right lemma to use here?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.MeasureTheory.Measure.Haar.OfBasis</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">MeasureTheory</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Set</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">P</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"bp\">∀ᵐ</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">∂</span><span class=\"o\">(</span><span class=\"n\">volume.restrict</span> <span class=\"n\">s</span><span class=\"o\">),</span> <span class=\"n\">P</span> <span class=\"n\">x</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">filter_upwards</span> <span class=\"o\">[</span><span class=\"n\">MeasureTheory.self_mem_ae_restrict</span> <span class=\"gr\">sorry</span><span class=\"o\">]</span>\n  <span class=\"n\">exact</span> <span class=\"n\">hP</span>\n</code></pre></div>\n<p><code>MeasureTheory.self_mem_ae_restrict</code> requires measurability (which I would rather avoid trying to prove in my context). Isn't the statement even true without assuming measurability? Thanks for your help!</p>",
        "id": 438401012,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1715617297
    },
    {
        "content": "<p>You need measurability of <code>s</code> or <code>{x | P x}</code> for this to be true.</p>",
        "id": 438417814,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1715622934
    },
    {
        "content": "<p>Yes otherwise the relevant set on which <code>hP</code> needs to hold is <code>toMeasurable volume s</code> which might be much bigger.</p>",
        "id": 438418485,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1715623147
    },
    {
        "content": "<p>E.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.Measure.restrict_toMeasurable#doc\">docs#MeasureTheory.Measure.restrict_toMeasurable</a></p>",
        "id": 438418794,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1715623238
    }
]