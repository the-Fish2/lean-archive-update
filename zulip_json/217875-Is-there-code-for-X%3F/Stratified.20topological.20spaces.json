[
    {
        "content": "<p>What are people’s opinions about </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Topology.Order.UpperLowerSetTopology</span>\n\n<span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\"># Basic theory of stratified topological spaces.</span>\n\n<span class=\"cm\">-/</span>\n\n<span class=\"kd\">universe</span> <span class=\"n\">u</span> <span class=\"n\">v</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Topology</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">Topology</span>\n\n<span class=\"sd\">/-- For a stratification on a topological space we bundle a poset `I` with a continuous function to</span>\n<span class=\"sd\">the upper set topology on `I` indexing the strata. -/</span>\n<span class=\"kd\">structure</span> <span class=\"n\">Stratification</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span> <span class=\"n\">X</span><span class=\"o\">]</span> <span class=\"n\">where</span>\n  <span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">v</span>\n  <span class=\"o\">[</span><span class=\"n\">order</span> <span class=\"o\">:</span> <span class=\"n\">Preorder</span> <span class=\"n\">I</span><span class=\"o\">]</span>\n  <span class=\"n\">strata</span> <span class=\"o\">:</span> <span class=\"n\">C</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">WithUpperSet</span> <span class=\"n\">I</span><span class=\"o\">)</span>\n\n<span class=\"kd\">instance</span> <span class=\"n\">instPreOrder</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">}</span>  <span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span> <span class=\"n\">X</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">Stratification</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Preorder</span> <span class=\"n\">S.I</span> <span class=\"o\">:=</span> <span class=\"n\">S.order</span>\n\n<span class=\"kd\">end</span> <span class=\"n\">Topology</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">Stratification</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Set</span> <span class=\"n\">WithUpperSet</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span> <span class=\"n\">X</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">Stratification</span> <span class=\"n\">X</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- The stratum of a corresponding to the upper set of `v` in indexing set `I`. -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">stratum</span> <span class=\"o\">(</span><span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">S.I</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Set</span> <span class=\"n\">X</span> <span class=\"o\">:=</span> <span class=\"n\">S.strata</span> <span class=\"bp\">⁻¹'</span> <span class=\"o\">(</span><span class=\"n\">ofUpperSet</span> <span class=\"bp\">⁻¹'</span> <span class=\"o\">(</span><span class=\"n\">Ici</span> <span class=\"n\">v</span><span class=\"o\">))</span>\n\n<span class=\"kd\">end</span> <span class=\"n\">Stratification</span>\n</code></pre></div>",
        "id": 426641010,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1710455648
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WithUpperSet#doc\">docs#WithUpperSet</a></p>",
        "id": 426641467,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710455888
    },
    {
        "content": "<p>Is this related to how Barwick-Glasman-Haine define stratified homotopy types?</p>",
        "id": 426653743,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710463116
    },
    {
        "content": "<p>Yes, see def 1.2.1 in Exodromy</p>",
        "id": 426653919,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710463217
    },
    {
        "content": "<p>Does it make sense to have the poset as parameter?</p>",
        "id": 426667371,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710473023
    },
    {
        "content": "<p>Instead of as field</p>",
        "id": 426667442,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710473052
    },
    {
        "content": "<p>Also, I conjecture that hard-coding <code>WithUpperSet</code> in the defn will cause issues down the road. I suggest replacing the preorder with an Alexandrov topological space instead</p>",
        "id": 426667748,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710473288
    },
    {
        "content": "<p>It may be cumbersome to talk about morphisms between stratified spaces if the poset/alexandrov space unbundled.</p>",
        "id": 426668302,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710473697
    },
    {
        "content": "<p>But if you ever need to talk about morphisms of stratified spaces over the <em>same</em> poset, then this is essentially the only way</p>",
        "id": 426668426,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710473795
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Stratified.20topological.20spaces/near/426668302\">said</a>:</p>\n<blockquote>\n<p>It may be cumbersome to talk about morphisms between stratified spaces if the poset/alexandrov space unbundled.</p>\n</blockquote>\n<p>Can't we follow the semilinear-map approach? That works quite smoothly after the initial setup</p>",
        "id": 426668604,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710473920
    },
    {
        "content": "<p>Ok, I think that makes sense. I’ll see if it is as straightforward as it seems. The other issue was whether to used bundled or unbundled continuous functions.</p>",
        "id": 426749858,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1710511302
    },
    {
        "content": "<p>Note that setting up semilinear maps properly was quite a significant project all in itself.</p>",
        "id": 426752615,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710512220
    },
    {
        "content": "<p><a href=\"https://arxiv.org/abs/2202.05360\">https://arxiv.org/abs/2202.05360</a></p>",
        "id": 426752716,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710512250
    },
    {
        "content": "<p>Yes, indeed! But I'm hoping that copying that approach to an analogous setting will be quite a bit easier.</p>",
        "id": 426753774,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710512635
    },
    {
        "content": "<p>I agree. I don''t think it would require any new ideas per se, but rather that one has to set up the typeclasses carefully.</p>",
        "id": 426754258,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710512780
    },
    {
        "content": "<p>Also, in this case we don't have to worry about refactoring a large existing library.</p>",
        "id": 426754614,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1710512887
    },
    {
        "content": "<p>yeah good point</p>",
        "id": 426755119,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1710513020
    }
]