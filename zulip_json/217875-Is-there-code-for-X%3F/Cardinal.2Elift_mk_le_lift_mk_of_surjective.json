[
    {
        "content": "<p>Do we have this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.SetTheory.Cardinal.Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Logic.Function.Basic</span>\n\n<span class=\"kd\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n\n<span class=\"c1\">-- TODO: should not use classical</span>\n<span class=\"c1\">-- TODO: move to suitable place</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">_root_.Cardinal.lift_mk_le_lift_mk_of_surjective</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function.Surjective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Cardinal.lift</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Cardinal.mk</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Cardinal.lift</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Cardinal.mk</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Cardinal.lift_mk_le_lift_mk_of_injective</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Function.injective_surjInv</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I have this quick and dirty proof, which uses classical (i.e. axiom of choice). Are there proofs without using classical? Should this be added to mathlib?</p>",
        "id": 441542685,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717098999
    },
    {
        "content": "<p>Do you have a purpose in not using classical besides \"not using classical\"?</p>",
        "id": 441543209,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1717099140
    },
    {
        "content": "<p>But this seems reasonable to add</p>",
        "id": 441543534,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1717099218
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Cardinal.2Elift_mk_le_lift_mk_of_surjective/near/441543209\">said</a>:</p>\n<blockquote>\n<p>Do you have a purpose in not using classical besides \"not using classical\"?</p>\n</blockquote>\n<p>No. I just think that such fundamental result should be provable without using choice, but maybe I'm wrong.</p>",
        "id": 441545573,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717099756
    },
    {
        "content": "<p>since ordering on cardinals (in mathlib) is defined with existence of injective maps, i think this might not be provable without axiom of choice?</p>",
        "id": 441547043,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1717100147
    },
    {
        "content": "<p>because afaik constructing an injective map <code>a -&gt; b</code> from a surjective map <code>b -&gt; a</code> can't be done without axiom of choice? i could be wrong though</p>",
        "id": 441547330,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1717100209
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Cardinal.2Elift_mk_le_lift_mk_of_surjective/near/441547043\">said</a>:</p>\n<blockquote>\n<p>since ordering on cardinals (in mathlib) is defined with existence of injective maps, i think this might not be provable without axiom of choice?</p>\n</blockquote>\n<p>OK I see. So it's fine using choice to prove this?</p>",
        "id": 441548354,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717100501
    },
    {
        "content": "<p>absolutely. there was never anything wrong with it to begin with</p>",
        "id": 441548520,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1717100542
    },
    {
        "content": "<p>The statement \"every surjection has a one-sided injective inverse\" is, in set theory, <em>equivalent</em> to the axiom of choice.</p>",
        "id": 441551167,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1717101236
    },
    {
        "content": "<p>right. it's just the \"one-sided inverse\" part that we don't need, so this statement might be slightly weaker</p>",
        "id": 441552234,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1717101517
    },
    {
        "content": "<p>PR created as <a href=\"https://github.com/leanprover-community/mathlib4/pull/13397\">#13397</a>.</p>",
        "id": 441552735,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717101668
    },
    {
        "content": "<p>Right, but this is evidence that choice is highly important in this domain so should be used when necessary. IIRC there's a model of ZF and two sets A,B with an injection from A to B and a surjection, but no bijection.</p>",
        "id": 441552775,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1717101685
    },
    {
        "content": "<p>Let me check the proof of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.mk_le_of_surjective#doc\">docs#Cardinal.mk_le_of_surjective</a> which already in mathlib but is same-universe version.</p>",
        "id": 441553104,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717101783
    },
    {
        "content": "<p>I highly recommend not spending time on this</p>",
        "id": 441553395,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1717101883
    },
    {
        "content": "<p>It uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.Embedding.ofSurjective#doc\">docs#Function.Embedding.ofSurjective</a> which said that</p>\n<blockquote>\n<p>A right inverse <code>surjInv</code> of a surjective function as an <code>Embedding</code>.</p>\n</blockquote>\n<p>So basically it is the same proof which uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.surjInv#doc\">docs#Function.surjInv</a></p>",
        "id": 441553480,
        "sender_full_name": "Jz Pan",
        "timestamp": 1717101912
    },
    {
        "content": "<p>According to <a href=\"https://math.stackexchange.com/questions/192460/there-exists-an-injection-from-x-to-y-if-and-only-if-there-exists-a-surjecti\">this mse</a>, whether this implies AC is open (at least it was 10+years ago).</p>",
        "id": 441553671,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1717101964
    },
    {
        "content": "<p><a href=\"https://mathoverflow.net/questions/65369/half-cantor-bernstein-without-choice\">https://mathoverflow.net/questions/65369/half-cantor-bernstein-without-choice</a> apparently gives a counterexample or two if AC fails sufficiently badly.</p>",
        "id": 441553808,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1717102008
    }
]