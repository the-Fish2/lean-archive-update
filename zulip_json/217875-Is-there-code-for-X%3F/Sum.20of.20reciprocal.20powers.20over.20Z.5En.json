[
    {
        "content": "<p>Does Mathlib have a proof that for some (equivalently any) norm on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>, the sum <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>‚àë</mo><mrow><mi>v</mi><mo>‚àà</mo><msup><mi mathvariant=\"double-struck\">Z</mi><mi>n</mi></msup></mrow></msub><mn>1</mn><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">‚à•</mi><mi>v</mi><msup><mi mathvariant=\"normal\">‚à•</mi><mi>p</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{v \\in \\mathbb{Z}^n} 1/\\|v\\|^p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0771em;vertical-align:-0.3271em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1825em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5935em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/‚à•</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord\"><span class=\"mord\">‚à•</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span></span></span></span></span></span></span></span> converges iff <code>p &gt; n</code>? The <code>n = 1</code> case is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.summable_nat_rpow_inv#doc\">docs#Real.summable_nat_rpow_inv</a>; the <code>n = 2</code> case has just come up in a PR I'm reviewing.</p>",
        "id": 438648130,
        "sender_full_name": "David Loeffler",
        "timestamp": 1715717652
    },
    {
        "content": "<p>Sounds like <span class=\"user-mention\" data-user-id=\"389019\">@Chris Birkbeck</span>'s stuff</p>",
        "id": 438649768,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1715718273
    },
    {
        "content": "<p>It is indeed. David noticed it can be stated in terms of a norm which is quite neat!</p>",
        "id": 438649943,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1715718340
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"481963\">David Loeffler</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Sum.20of.20reciprocal.20powers.20over.20Z.5En/near/438648130\">said</a>:</p>\n<blockquote>\n<p>Does Mathlib have a proof that for some (equivalently any) norm on $\\mathbb{R}^n$, the sum $\\sum_{v \\in \\mathbb{Z}^n} 1/\\|v\\|^p$ converges iff <code>p &gt; n</code>? The <code>n = 1</code> case is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.summable_nat_rpow_inv#doc\">docs#Real.summable_nat_rpow_inv</a>; the <code>n = 2</code> case has just come up in a PR I'm reviewing.</p>\n</blockquote>\n<p>I've not seen such a result,  but I could be wrong.</p>",
        "id": 438650046,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1715718367
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"488648\">@Xavier Roblot</span> ‚Äì is this something we have, and if not, is it something you would find useful? I know you've worked a lot on lattices in R^n.</p>",
        "id": 438741463,
        "sender_full_name": "David Loeffler",
        "timestamp": 1715758057
    },
    {
        "content": "<p>No, I don't have this kind of statement. <del>What I have is something like this:</del></p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variable</span> <span class=\"o\">(</span><span class=\"n\">L</span> <span class=\"o\">:</span> <span class=\"n\">AddSubgroup</span> <span class=\"o\">(</span><span class=\"n\">Œπ</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">))</span> <span class=\"o\">[</span><span class=\"n\">DiscreteTopology</span> <span class=\"n\">L</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsZlattice</span> <span class=\"n\">‚Ñù</span> <span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">tendsto_card_div_pow</span> <span class=\"o\">(</span><span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">Basis</span> <span class=\"n\">Œπ</span> <span class=\"n\">‚Ñ§</span> <span class=\"n\">L</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Set</span> <span class=\"o\">(</span><span class=\"n\">Œπ</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)}</span> <span class=\"o\">(</span><span class=\"n\">hs‚ÇÅ</span> <span class=\"o\">:</span> <span class=\"n\">IsBounded</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">hs‚ÇÇ</span> <span class=\"o\">:</span> <span class=\"n\">MeasurableSet</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">Tendsto</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñï</span> <span class=\"bp\">‚Ü¶</span> <span class=\"o\">(</span><span class=\"n\">Nat.card</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"bp\">‚à©</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"bp\">‚Åª¬π</span> <span class=\"bp\">‚Ä¢</span> <span class=\"n\">L</span> <span class=\"o\">:</span> <span class=\"n\">Set</span> <span class=\"o\">(</span><span class=\"n\">Œπ</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">))</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"bp\">/</span> <span class=\"n\">n</span> <span class=\"bp\">^</span> <span class=\"n\">card</span> <span class=\"n\">Œπ</span><span class=\"o\">)</span>\n      <span class=\"n\">atTop</span> <span class=\"o\">(</span><span class=\"bp\">ùìù</span> <span class=\"o\">((</span><span class=\"n\">volume</span> <span class=\"n\">s</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toReal</span> <span class=\"bp\">/</span> <span class=\"n\">covolume</span> <span class=\"n\">L</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n</code></pre></div>\n<p><del>`Well, I guess I may have the tools to prove the result you want but I am still missing the fact that the characteristic function of a bounded set with zero measure frontier is Riemann integrable (BTW, the corresponding hypothesis is missing in the above statement).</del></p>",
        "id": 438764272,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1715766232
    },
    {
        "content": "<p><del>Wait, I also have this</del></p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variable</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Set</span> <span class=\"o\">(</span><span class=\"n\">Œπ</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">Œπ</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hF</span> <span class=\"o\">:</span> <span class=\"n\">Continuous</span> <span class=\"n\">F</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hs‚ÇÅ</span> <span class=\"o\">:</span> <span class=\"n\">Bornology.IsBounded</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">hs‚ÇÇ</span> <span class=\"o\">:</span> <span class=\"n\">MeasurableSet</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span> <span class=\"kd\">notation</span> <span class=\"s2\">\"L\"</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">span</span> <span class=\"n\">‚Ñ§</span> <span class=\"o\">(</span><span class=\"n\">Set.range</span> <span class=\"o\">(</span><span class=\"k\">Pi</span><span class=\"bp\">.</span><span class=\"n\">basisFun</span> <span class=\"n\">‚Ñù</span> <span class=\"n\">Œπ</span><span class=\"o\">))</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">tendsto_tsum_div_pow</span> <span class=\"o\">:</span>\n    <span class=\"n\">Tendsto</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñï</span> <span class=\"bp\">‚Ü¶</span> <span class=\"o\">(</span><span class=\"bp\">‚àë'</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"bp\">‚Üë</span><span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"bp\">‚à©</span> <span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"bp\">‚Åª¬π</span> <span class=\"bp\">‚Ä¢</span> <span class=\"n\">L</span><span class=\"o\">),</span> <span class=\"n\">F</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">/</span> <span class=\"n\">n</span> <span class=\"bp\">^</span> <span class=\"n\">card</span> <span class=\"n\">Œπ</span><span class=\"o\">)</span>\n      <span class=\"n\">atTop</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"o\">(</span><span class=\"bp\">‚à´</span> <span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">F</span> <span class=\"n\">x</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n</code></pre></div>\n<p><del>which should be closer to what to you want. </del></p>\n<p><del>Still, the same piece as above is missing for the proof of this result.</del></p>",
        "id": 438774743,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1715770317
    },
    {
        "content": "<p>Since you can take the norm given by supremum of coordinates, this should be much easier.</p>",
        "id": 438902092,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1715815345
    },
    {
        "content": "<p>Mathematically, one can prove that result for the sum over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"bold\">N</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbf N^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>. <br>\nThe number of elements <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>‚àà</mo><msup><mi mathvariant=\"bold\">N</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">x\\in\\mathbf N^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> such that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mo>‚àí</mo><mn>1</mn></mrow></msup><mo>&lt;</mo><mi mathvariant=\"normal\">‚à•</mi><mi>x</mi><msub><mi mathvariant=\"normal\">‚à•</mi><mi mathvariant=\"normal\">‚àû</mi></msub><mo>‚â§</mo><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^{k-1}&lt;\\| x\\|_\\infty\\leq 2^k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8882em;vertical-align:-0.0391em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">‚à•</span><span class=\"mord mathnormal\">x</span><span class=\"mord\"><span class=\"mord\">‚à•</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">‚àû</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚â§</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span> is equal to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><msup><mn>2</mn><mi>k</mi></msup><msup><mo stretchy=\"false\">)</mo><mi>n</mi></msup><mo>‚àí</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>‚àí</mo><mn>1</mn></mrow></msup><msup><mo stretchy=\"false\">)</mo><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">(1+2^k)^n-(1+2^{k-1})^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚àí</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> which is of the order of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>k</mi><mi>n</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{kn}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">kn</span></span></span></span></span></span></span></span></span></span></span></span> (with above and below constants). On each corona, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">‚à•</mi><mi>x</mi><msubsup><mi mathvariant=\"normal\">‚à•</mi><mi mathvariant=\"normal\">‚àû</mi><mi>p</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">1/\\|x\\|_\\infty^p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/‚à•</span><span class=\"mord mathnormal\">x</span><span class=\"mord\"><span class=\"mord\">‚à•</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">‚àû</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span> is of the order of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mo>‚àí</mo><mi>p</mi><mi>k</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{-pk}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚àí</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span> (with above and below constants). So the result is equivalent to the summability of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy=\"false\">(</mo><mi>n</mi><mo>‚àí</mo><mi>p</mi><mo stretchy=\"false\">)</mo><mi>k</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{(n-p)k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.888em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.888em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mclose mtight\">)</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span> for all $k\\in\\mathbf N$$, a geometric series.</p>",
        "id": 438902970,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1715815971
    },
    {
        "content": "<p>Sure, the proof is not difficult (which is why I posted here, not in #maths). Antoine's \"corona\" proof (<span aria-label=\"microbe\" class=\"emoji emoji-1f9a0\" role=\"img\" title=\"microbe\">:microbe:</span>?) is pretty much the proof we already have for <code>k = 1</code>. For general <code>k</code> one can also directly count the number of vectors of length exactly <code>n</code> and show it is bounded above + below by multiples of <code>n ^ {k - 1}</code>, then quote the <code>n = 1</code> case; this is the proof that Chris B formalised for <code>k = 2</code>. But I just wanted to check if the exact result was already here in mathlib.</p>",
        "id": 438950579,
        "sender_full_name": "David Loeffler",
        "timestamp": 1715841907
    },
    {
        "content": "<p>BTW, sorry for unhelpful answers above. I am afraid I misread your question <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 438951328,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1715842204
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"488648\">Xavier Roblot</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Sum.20of.20reciprocal.20powers.20over.20Z.5En/near/438951328\">said</a>:</p>\n<blockquote>\n<p>BTW, sorry for unhelpful answers above. I am afraid I misread your question <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>No problem. I think your answer would be exactly the right one for a slightly more refined question, studying the asymptotics of the sum as <code>s --&gt; card Œπ</code>. (I haven't done the analysis carefully, but I suspect that there is a simple pole with residue = volume of the unit ball for our chosen norm, or something like that).</p>",
        "id": 438955059,
        "sender_full_name": "David Loeffler",
        "timestamp": 1715843635
    },
    {
        "content": "<p>(corona also belongs to the vocabulary of astronomy!)</p>",
        "id": 438970673,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1715849538
    },
    {
        "content": "<p>The \"corona proof\" feels a lot like Cauchy condensation, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=summable_condensed_iff_of_nonneg#doc\">docs#summable_condensed_iff_of_nonneg</a> except done in dimension <code>n</code>.</p>",
        "id": 438973224,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1715850417
    },
    {
        "content": "<p>We could reduce to the one-dimensional condensation test immediately if we had an additional lemma about gathering together terms in a sum: roughly \"if <code>g : Œ± ‚Üí Œ≤</code> has finite fibers, then <code>‚àë' a : Œ±, f(g a) = ‚àë' b : Œ≤, card (g ‚Åª¬π' {b})‚Ä¢  f b</code>\". A more precise statement is</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">hasSum_comp_iff_hasSum_card_nsmul</span> <span class=\"o\">{</span><span class=\"n\">Œ±</span> <span class=\"n\">Œ≤</span> <span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n    <span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span> <span class=\"n\">M</span><span class=\"o\">]</span>\n      <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Œ±</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">Œ≤</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Œ≤</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"bp\">‚àÄ</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">Œ≤</span><span class=\"o\">,</span> <span class=\"n\">Set.Finite</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"bp\">‚Åª¬π'</span> <span class=\"o\">{</span><span class=\"n\">b</span><span class=\"o\">}))</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">HasSum</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"bp\">‚àò</span> <span class=\"n\">g</span><span class=\"o\">)</span> <span class=\"n\">m</span> <span class=\"bp\">‚Üî</span> <span class=\"n\">HasSum</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">Œ≤</span> <span class=\"bp\">‚Ü¶</span> <span class=\"n\">card</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"n\">b</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFinset</span> <span class=\"bp\">‚Ä¢</span>  <span class=\"n\">f</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">m</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>This doesn't seem to be in mathlib either, as far as I can see.</p>",
        "id": 438977354,
        "sender_full_name": "David Loeffler",
        "timestamp": 1715851817
    },
    {
        "content": "<p>I didn't find it neither when I searched for it this morning‚Ä¶</p>",
        "id": 439076944,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1715883726
    }
]