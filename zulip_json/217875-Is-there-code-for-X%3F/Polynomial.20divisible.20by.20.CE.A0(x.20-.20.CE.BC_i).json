[
    {
        "content": "<p>I have a polynomial p, and I want to write it as</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>p</mi><mo>=</mo><mi>q</mi><mo>⋅</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">p = q \\cdot r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span></p>\n<p>where</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>∏</mo><mrow><mi>μ</mi><mo>∈</mo><mi>S</mi></mrow></munder><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>μ</mi><mo stretchy=\"false\">)</mo><mspace width=\"2em\"/><mi>S</mi><mo>⊆</mo><mi>r</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">q(x) = \\prod_{μ \\in S} (x - μ) \\qquad S \\subseteq roots(p)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4804em;vertical-align:-1.4304em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8557em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">μ</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∏</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4304em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:2em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">roo</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>Is there already some theorem in mathlib that says this? I searched but didn't find it.<br>\nAnd if this isn't in mathlib, how could I prove it? I found Polynomial.mul_div_eq_iff_isRoot, which is similar to what I want, but I'm not sure of how i could use it</p>",
        "id": 428353787,
        "sender_full_name": "giacomo gallina",
        "timestamp": 1711120878
    },
    {
        "content": "<p>You can just let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> be empty and let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span> be 1. </p>\n<p>I think it's better to ask your actual question as a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> rather than in informal language.</p>",
        "id": 428354555,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1711121089
    },
    {
        "content": "<p>Sorry, I didn't explain myself properly, I already have S fixed, and would like to get the decomposition. Basically  I would like a theorem with this signature:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">my_factorization</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">Multiset</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hs</span> <span class=\"o\">:</span> <span class=\"n\">S</span> <span class=\"bp\">≤</span> <span class=\"n\">p.roots</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">],</span> <span class=\"n\">p</span> <span class=\"bp\">=</span> <span class=\"n\">r</span> <span class=\"bp\">*</span> <span class=\"n\">Multiset.prod</span> <span class=\"o\">(</span><span class=\"n\">Multiset.map</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">μ</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">X</span> <span class=\"bp\">-</span> <span class=\"n\">Polynomial.C</span> <span class=\"n\">μ</span><span class=\"o\">)</span> <span class=\"n\">S</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 428356712,
        "sender_full_name": "giacomo gallina",
        "timestamp": 1711121654
    },
    {
        "content": "<p>It would be enough to be able to do a proof by induction on the cardinality of S, but I don't really know how to do that</p>",
        "id": 428361570,
        "sender_full_name": "giacomo gallina",
        "timestamp": 1711123101
    },
    {
        "content": "<p>Ok, I found Multiset.induction, I think I can do it</p>",
        "id": 428364273,
        "sender_full_name": "giacomo gallina",
        "timestamp": 1711123921
    },
    {
        "content": "<p>How about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Multiset.prod_X_sub_C_dvd_iff_le_roots#doc\">docs#Multiset.prod_X_sub_C_dvd_iff_le_roots</a> ?</p>",
        "id": 428368967,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1711125262
    },
    {
        "content": "<p>In fact, just:</p>",
        "id": 428369243,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1711125350
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> <a href=\"http://Multiset.prod\">Multiset.prod</a>, <a href=\"http://Multiset.map\">Multiset.map</a>, Polynomial.roots, Polynomial.C</p>",
        "id": 428369332,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1711125365
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Polynomial/RingDivision.html#Polynomial.roots_multiset_prod_X_sub_C\">Polynomial.roots_multiset_prod_X_sub_C</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Polynomial/RingDivision.html#Polynomial.monic_prod_multiset_X_sub_C\">Polynomial.monic_prod_multiset_X_sub_C</a>, and <a href=\"https://loogle.lean-lang.org/?q=Multiset.prod%2C%20Multiset.map%2C%20Polynomial.roots%2C%20Polynomial.C\">10 more</a></p>",
        "id": 428369336,
        "sender_full_name": "loogle",
        "timestamp": 1711125366
    },
    {
        "content": "<p>It's the 5th hit here.</p>",
        "id": 428369389,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1711125387
    },
    {
        "content": "<p>Thank you so much, I need to learn to use loogle better!</p>",
        "id": 428369621,
        "sender_full_name": "giacomo gallina",
        "timestamp": 1711125462
    },
    {
        "content": "<p>Adding one more bit gets the exact hit:</p>\n<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> <a href=\"http://Multiset.prod\">Multiset.prod</a>, <a href=\"http://Multiset.map\">Multiset.map</a>, Polynomial.roots, Polynomial.C, LE.le</p>",
        "id": 428369893,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1711125541
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Polynomial/RingDivision.html#Multiset.prod_X_sub_C_dvd_iff_le_roots\">Multiset.prod_X_sub_C_dvd_iff_le_roots</a></p>",
        "id": 428369898,
        "sender_full_name": "loogle",
        "timestamp": 1711125541
    }
]