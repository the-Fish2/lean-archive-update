[
    {
        "content": "<p>There are a couple of CI workflows that set up a working copy of Mathlib with cache.  Is there a way to make all the steps that lead up to that into a single action, so as to avoid repetition and clutter?</p>",
        "id": 439183116,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1715937201
    },
    {
        "content": "<p>My reason for asking is that I would like to set up yet another such workflow and it seems very brittle to copy paste the same steps once again.</p>",
        "id": 439183178,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1715937234
    },
    {
        "content": "<p>I think someone suggested that we should have a github repo <code>leanprover-community/gh-actions</code> that would provide a bunch of common actions that mathlib CI <em>and</em> dependent projects could then reuse.</p>",
        "id": 439188741,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1715939297
    },
    {
        "content": "<p>I have no idea how to set this up, but I do think it is a great idea.</p>",
        "id": 439188774,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1715939309
    },
    {
        "content": "<p>My understanding of actions is that you need one <em>repo</em> per action</p>",
        "id": 439190063,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1715939760
    },
    {
        "content": "<p>Oh, so this means that I could create a repo on my github account, use it for the workflow for the weekly reports and then, when/if mathlib wants to have one, I could switch to using that, right?</p>",
        "id": 439199639,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1715943682
    },
    {
        "content": "<p>(My repo would essentially be copy-pasting the current CI steps that create a working copy of mathlib and all the fluff that needs to be added to make it into an action and that I will ask chat-gpt about...)</p>",
        "id": 439199793,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1715943737
    },
    {
        "content": "<p>Btw, according to <a href=\"https://docs.github.com/en/actions/creating-actions/about-custom-actions#choosing-a-location-for-your-action\">this section</a>, it is <em>recommended</em> that actions be in their own repo.  This seems to imply that it is not <em>required</em>, but I am really just reading on this for the first time now.</p>",
        "id": 439202711,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1715945127
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/setting.20up.20a.20working.20copy.20of.20Mathlib.20in.20CI/near/439188741\">said</a>:</p>\n<blockquote>\n<p>I think someone suggested that we should have a github repo <code>leanprover-community/gh-actions</code> that would provide a bunch of common actions that mathlib CI <em>and</em> dependent projects could then reuse.</p>\n</blockquote>\n<p>Such an action now exists and is being used in some repositories. I'm away from the computer right now, but search for lean-action here in zulip and you should find it.</p>",
        "id": 439468705,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1716154757
    },
    {
        "content": "<p>I Imagine that <a href=\"#narrow/stream/113488-general/topic/lean-action\">this</a> is a thread discussing the action.</p>",
        "id": 439469505,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716155641
    }
]