[
    {
        "content": "<p>Do we have this theorem anywhere?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Classical</span> <span class=\"n\">Finset</span> <span class=\"n\">Pointwise</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">Field</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A.card</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">B.card</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">+</span> <span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">card</span> <span class=\"bp\">≤</span> <span class=\"n\">additiveEnergy</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 427029128,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1710657314
    },
    {
        "content": "<p>Additionally, do we have <code>A + (-B) = A - B</code>?</p>",
        "id": 427035588,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1710659194
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sub_eq_add_neg#doc\">docs#sub_eq_add_neg</a></p>",
        "id": 427058704,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1710665696
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Additive.20energy.20is.20at.20least.20.7CA.7C.5E2.20.7CB.7C.5E2.20.2F.20.7CA.20.2B.20B.7C/near/427058704\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sub_eq_add_neg#doc\">docs#sub_eq_add_neg</a></p>\n</blockquote>\n<p>Thanks! I searched for <code>add_neg_eq_sub</code> <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 427064126,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1710667204
    },
    {
        "content": "<p>I've always been surprised and confused about this. In 2017 this was even a simp lemma in core and it would drive people nuts that the simplifier would always rewrite a-b to the \"obviously less simple\" a+-b. But the logic was that the axioms for an additive group involved addition and negation, and subtraction was some weird more complex structure put on top, and the way to deal with it was just to unfold it. This didn't sit well with the mathematicians in practice, who wanted subtraction to be a primitive thing and wanted a bunch of API to manipulate it, not remove it. The removal of the simp tag was one of the first changes in community lean after the fork.</p>\n<p>However in the multiplicative setting the lemma seemed much more appealing! Who talks about division in groups! Writing <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mi mathvariant=\"normal\">/</mi><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">g/h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">h</span></span></span></span> seems crazy and maybe even ambiguous, whereas <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><msup><mi>h</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">gh^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0085em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span> looks fine. I think it might be something to do with the fact that groups are in general not commutative, whereas additive groups in general are; this seems to be an implicit mathematical convention. Anyway, I think that's the reason that the lemma is stated that way around -- subtraction might naively argued to be more complex than addition and negation.</p>",
        "id": 427075523,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1710670337
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span>, <a href=\"https://yaeldillies.github.io/LeanAPAP/docs/find/?pattern=Finset.le_card_add_mul_additiveEnergy#doc\">LeanAPAP#Finset.le_card_add_mul_additiveEnergy</a></p>",
        "id": 427110025,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1710679682
    },
    {
        "content": "<p>Oh, I see you just added it? Thanks!</p>",
        "id": 427112489,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1710680349
    },
    {
        "content": "<p>... as a corollary of an existing lemma, but yes <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 427112637,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1710680398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> has marked this topic as resolved.</p>",
        "id": 427411613,
        "sender_full_name": "Notification Bot",
        "timestamp": 1710755436
    }
]