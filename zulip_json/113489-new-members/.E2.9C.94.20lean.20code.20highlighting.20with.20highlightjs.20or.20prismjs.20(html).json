[
    {
        "content": "<p>I've previously used prismjs to highlight code sections in blog posts on <a href=\"http://blogger.com\">blogger.com</a> (google).</p>\n<p>I want to start doing this for lean code - but sadly neither of the two leading libraries, highlightjs and prismjs, don't do it as part of the core set of languages. </p>\n<p>Prismjs doesn't have a 3rd party library that I can find, and sadly the 3rd party extension for highlightjs doesn't seem to work. I'm no expert but it looks like the 3rd party library is outdated and doesn't match the current highlightjs version 11.</p>\n<p><strong>Question:</strong> Has anyone had any success in highlighting lean code in <code>&lt;pre&gt;&lt;code&gt;</code> HTML segments?</p>\n<p>Just to preempt answers that recommend complicated stuff like node and building js libraries - I can't - all I can do is reference the css and js libraries in the HTML templates - and that has worked very well for years (including mathjax).</p>",
        "id": 447973012,
        "sender_full_name": "rzeta0",
        "timestamp": 1719664899
    },
    {
        "content": "<p>I assume the 3rd party extension for highlightjs you're talking about is <a href=\"https://github.com/leanprover-community/highlightjs-lean\">https://github.com/leanprover-community/highlightjs-lean</a> ? If that's the case, then most likely using version 10 rather than version 11 of highlightjs should fix things. Try the CDN links <a href=\"https://github.com/highlightjs/highlight.js/tree/10-stable?tab=readme-ov-file#cdn-hosted\">here</a> along with the code <a href=\"https://github.com/leanprover-community/highlightjs-lean?tab=readme-ov-file#using-directly-from-the-unpkg-cdn\">here</a> and the extension should hopefully work. (The highlightjs code was written for Lean 3, not Lean 4, but it might still be OK for your purposes.)</p>",
        "id": 447974277,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1719665914
    },
    {
        "content": "<p>Thanks - I just tried that and it didn't work. The following shows (1) the includes, (2) the HTML, (3) the console error.</p>\n<p>CSS+JS</p>\n<div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code> <span class=\"cm\">&lt;!-- keeping on version 10 for now --&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">'https://unpkg.com/@highlightjs/cdn-assets@10.7.3/styles/default.min.css'</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">'stylesheet'</span><span class=\"p\">/&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">'https://unpkg.com/@highlightjs/cdn-assets@10.7.3/highlight.min.js'</span><span class=\"p\">/&gt;</span>\n<span class=\"w\">    </span><span class=\"o\">&lt;</span><span class=\"nx\">script</span><span class=\"w\"> </span><span class=\"nx\">src</span><span class=\"o\">=</span><span class=\"s1\">'https://unpkg.com/highlightjs-lean/dist/lean.min.js'</span><span class=\"w\"> </span><span class=\"nx\">type</span><span class=\"o\">=</span><span class=\"s1\">'text/javascript'</span><span class=\"o\">/&gt;</span>\n<span class=\"w\">    </span><span class=\"o\">&lt;</span><span class=\"nx\">script</span><span class=\"o\">&gt;</span><span class=\"nx\">hljs</span><span class=\"p\">.</span><span class=\"nx\">highlightAll</span><span class=\"p\">();&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n</code></pre></div>\n<p>HTML </p>\n<div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code><span class=\"p\">&lt;</span><span class=\"nt\">pre</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">code</span> <span class=\"na\">class</span><span class=\"o\">=</span><span class=\"s\">\"language-lean\"</span><span class=\"p\">&gt;</span>\n-- 01 - First Proof\n\nimport Mathlib.Tactic\n\nexample {a : â„•} (h1: a = 4) : a <span class=\"ni\">&amp;gt;</span> 1 :=\n  calc\n    a = 4 := by rw [h1]\n    _ <span class=\"ni\">&amp;gt;</span> 1 := by norm_num\n<span class=\"p\">&lt;/</span><span class=\"nt\">code</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">pre</span><span class=\"p\">&gt;</span>\n</code></pre></div>\n<p>and the console error from firefox (which is more informative that safari)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Uncaught</span><span class=\"w\"> </span><span class=\"n\">TypeError</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"name\"</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"bp\">-</span><span class=\"n\">only</span>\n<span class=\"w\">    </span><span class=\"n\">registerLanguage</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">unpkg</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/@</span><span class=\"n\">highlightjs</span><span class=\"bp\">/</span><span class=\"n\">cdn</span><span class=\"bp\">-</span><span class=\"n\">assets</span><span class=\"bp\">@</span><span class=\"mf\">10.7</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"bp\">/</span><span class=\"n\">highlight</span><span class=\"bp\">.</span><span class=\"n\">min</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">295</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">unpkg</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">highlightjs</span><span class=\"bp\">-</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">.</span><span class=\"n\">min</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 447976214,
        "sender_full_name": "rzeta0",
        "timestamp": 1719667579
    },
    {
        "content": "<p>Ah, I see there was an issue from last year on the repo with the same issue. Let me try and take a look; I see a PR to the repo which upgrades from v10 to v11 as well.</p>",
        "id": 447976861,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1719668121
    },
    {
        "content": "<p>sadly my lack of expertise prevents me from looking at the PR and deriving a solution from it.</p>\n<p>my (outdated?) knowledge of programming suggests I could take that code and just inline in my header includes?</p>",
        "id": 448008274,
        "sender_full_name": "rzeta0",
        "timestamp": 1719683723
    },
    {
        "content": "<p>I think this should be resolved now, but feel free to post again here or on github if you have any further issues. Thanks for posting about the issue here!</p>",
        "id": 448057450,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1719712893
    },
    {
        "content": "<p>perfect - that works wonderfully now!</p>\n<p>here's a sample page if you're interested <a href=\"https://leanfirststeps.blogspot.com/2024/06/02-substitution.html\">https://leanfirststeps.blogspot.com/2024/06/02-substitution.html</a></p>",
        "id": 448097790,
        "sender_full_name": "rzeta0",
        "timestamp": 1719741862
    },
    {
        "content": "<p>Again, sorry for my lack of javascript knowledge, but is it easy to override some of the styles? Eg if I wanted comments to be grey and italic, is it as simple as <code>&lt;script&gt;...</code> or <code>&lt;style&gt;....</code> after the import and execution of your library?</p>\n<p>Here is how the LaTeX style file does comments:</p>\n<p><a href=\"/user_uploads/3121/B8IlCWbIiB9eGSE5BPMbwA4V/Screenshot-2024-06-30-at-11.06.53.png\">Screenshot-2024-06-30-at-11.06.53.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/B8IlCWbIiB9eGSE5BPMbwA4V/Screenshot-2024-06-30-at-11.06.53.png\" title=\"Screenshot-2024-06-30-at-11.06.53.png\"><img src=\"/user_uploads/3121/B8IlCWbIiB9eGSE5BPMbwA4V/Screenshot-2024-06-30-at-11.06.53.png\"></a></div>",
        "id": 448097965,
        "sender_full_name": "rzeta0",
        "timestamp": 1719741963
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 448098220,
        "sender_full_name": "Notification Bot",
        "timestamp": 1719742112
    },
    {
        "content": "<p>Yes, you should be able to override the default highlightjs style with a <code>&lt;style&gt;</code> block. You could check out some of the other highlightjs themes for inspiration: <a href=\"https://highlightjs.org/examples\">examples</a>, <a href=\"https://github.com/highlightjs/highlight.js/tree/main/src/styles\">theme source code</a></p>",
        "id": 448099984,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1719743041
    },
    {
        "content": "<p>amazingly simple! </p>\n<p>for anyone else who wants to do similar, this is how I did it:</p>\n<div class=\"codehilite\" data-code-language=\"CSS\"><pre><span></span><code><span class=\"o\">&lt;</span><span class=\"nt\">style</span><span class=\"o\">&gt;</span>\n<span class=\"w\">      </span><span class=\"p\">.</span><span class=\"nc\">hljs-comment</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"k\">font-style</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">italic</span><span class=\"p\">;</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"o\">&lt;/</span><span class=\"nt\">style</span><span class=\"o\">&gt;</span>\n</code></pre></div>",
        "id": 448131464,
        "sender_full_name": "rzeta0",
        "timestamp": 1719762817
    },
    {
        "content": "<p>If you're feeling brave, you might want to try out using <code>Verso</code> for your blog instead of blogspot, as Verso has native lean support for all sorts of cool things</p>",
        "id": 448131691,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1719763007
    },
    {
        "content": "<p>Hi Eric - I did some internet searches and as far as I can tell Verso is a tool for compiling code into content, like LatexX? Sadly that is too much work for me right now - I just want to write content (yes, I know I have to edit some html in blogger), It's why I use Lyx and not LaTex. Maybe I'm too old for this new tech? :)</p>",
        "id": 448168025,
        "sender_full_name": "rzeta0",
        "timestamp": 1719777944
    },
    {
        "content": "<p>Verso refers to <a href=\"https://github.com/leanprover/verso\">https://github.com/leanprover/verso</a>. You can see it in action at <a href=\"https://lean-lang.org/blog/\">https://lean-lang.org/blog/</a> (click on a post and notice you can hover over code to get extra information).</p>",
        "id": 448259722,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1719822084
    },
    {
        "content": "<p>I don't think it had a public beta announced yet, though, so you'd be on the bleeding edge</p>",
        "id": 448260032,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1719822163
    }
]