[
    {
        "content": "<p>As some context, I come from a game development, where one of the number one priorities is to be very efficient with memory.</p>\n<p>So I was kind of confused when I downloaded Mathlib which was 65Mb which seems about right for a bunch of text files.<br>\nBut when building a new project using: <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a> the Mathlib folder was about 3.6GB (55x bigger). Considering I thought the olean files are the compiled version my expectation was they would be smaller.</p>\n<p>e.g. all the olean files in MyLeanProject\\.lake\\packages\\mathlib\\.lake\\build\\lib\\Mathlib\\Algebra\\Algebra</p>\n<p>I had a plan of bundling Lean/Mathlib in with a type of CAS I was making. But at 3-5GB that's not really an option.</p>\n<p>Can anyone satisfy my curiosity as for the need for such a big build size? I imagine there is a lot of duplication.</p>\n<p>And secondly, are there any plans to optimise this a bit more?</p>\n<p>Thirdly, is there any way to run lean without building things into olean files? I tried to import Mathlib without building it and it complained there was no Mathlib.olean file. Can it run in interpreted mode?</p>",
        "id": 445464888,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718746045
    },
    {
        "content": "<p>One interpretation of \"run lean\" is \"transpile to C, and build a binary\"; but this only helps you run lean programs, not lean itself</p>",
        "id": 445482206,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718755467
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725689\">Mr Proof</span> <a href=\"#narrow/stream/113489-new-members/topic/Why.20are.20olean.20files.20so.20big.3F/near/445464888\">said</a>:</p>\n<blockquote>\n<p>I had a plan of bundling Lean/Mathlib in with a type of CAS I was making. But at 3-5GB that's not really an option.</p>\n</blockquote>\n<p>If your CAS doesn't need all of mathlib, then you can omit many of the Olean files by using <code>import Mathlib.JustTheBitYouNeed</code></p>",
        "id": 445482281,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718755545
    },
    {
        "content": "<p>You might also want to check out <a href=\"#narrow/stream/270676-lean4/topic/reverse.20FFI.3A.20building.20a.20.22fat.22.20static.20library.3F\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/reverse.20FFI.3A.20building.20a.20.22fat.22.20static.20library.3F</a></p>",
        "id": 445482398,
        "sender_full_name": "Utensil Song",
        "timestamp": 1718755624
    }
]