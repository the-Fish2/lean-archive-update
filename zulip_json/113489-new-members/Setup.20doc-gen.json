[
    {
        "content": "<p>I just tried to add doc-gen4 to a new package but failed. I did the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">lake</span> <span class=\"n\">new</span> <span class=\"n\">doctest</span>\n</code></pre></div>\n<p>Following the README at <a href=\"https://github.com/leanprover/doc-gen4\">https://github.com/leanprover/doc-gen4</a> I added</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">meta</span> <span class=\"k\">if</span> <span class=\"n\">get_config</span><span class=\"bp\">?</span> <span class=\"n\">env</span> <span class=\"bp\">=</span> <span class=\"n\">some</span> <span class=\"s2\">\"dev\"</span> <span class=\"k\">then</span> <span class=\"c1\">-- dev is so not everyone has to build it</span>\n<span class=\"n\">require</span> <span class=\"bp\">«</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">»</span> <span class=\"k\">from</span> <span class=\"n\">git</span> <span class=\"s2\">\"https://github.com/leanprover/doc-gen4\"</span> <span class=\"bp\">@</span> <span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<p>to <code>lakefile.lean</code>. Then I did</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">lake</span> <span class=\"bp\">-</span><span class=\"n\">R</span> <span class=\"bp\">-</span><span class=\"n\">Kenv</span><span class=\"bp\">=</span><span class=\"n\">dev</span> <span class=\"n\">update</span>\n<span class=\"n\">lake</span> <span class=\"bp\">-</span><span class=\"n\">R</span> <span class=\"bp\">-</span><span class=\"n\">Kenv</span><span class=\"bp\">=</span><span class=\"n\">dev</span> <span class=\"n\">build</span> <span class=\"n\">Doctest</span><span class=\"o\">:</span><span class=\"n\">docs</span>\n</code></pre></div>\n<p>Both commands did a lot, but <code>.lake/build/doc</code> was not created. A second run of <code>lake -R Kenv=dev build</code> caused:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">git</span> <span class=\"n\">exited</span> <span class=\"k\">with</span> <span class=\"n\">code</span> <span class=\"mi\">2</span> <span class=\"n\">while</span> <span class=\"n\">looking</span> <span class=\"n\">for</span> <span class=\"n\">the</span> <span class=\"n\">git</span> <span class=\"n\">remote</span> <span class=\"k\">in</span> <span class=\"bp\">.</span>\n</code></pre></div>\n<p>What am I doing wrong?</p>",
        "id": 418436440,
        "sender_full_name": "Christian Merten",
        "timestamp": 1706379209
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4#source-locations\">https://github.com/leanprover/doc-gen4#source-locations</a></p>\n<p>Your project most likely has no git remote with a github style URL so you need to use a different mode to infer source URLs.</p>",
        "id": 418439437,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1706382283
    },
    {
        "content": "<p>Thanks, with the prefix <code>DOCGEN_SRC=\"file\"</code> it worked flawlessly!</p>",
        "id": 418439608,
        "sender_full_name": "Christian Merten",
        "timestamp": 1706382481
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4/commit/94e10377bef4e64820ffd7dcab6affef3304af62\">https://github.com/leanprover/doc-gen4/commit/94e10377bef4e64820ffd7dcab6affef3304af62</a> added a change to make this more clear in the error.</p>",
        "id": 418445309,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1706388434
    }
]