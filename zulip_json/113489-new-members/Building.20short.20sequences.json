[
    {
        "content": "<p>Hi I ran into some unfamiliar waters during a proof this week. As part of proving the Cauchy Schwarz Inequality I built a case for n = 2. Then to apply it in my proof I was initially having some difficulty but I found a hacky way round I am hoping to find out if there is a more standard way to solve the problem I solved.  </p>\n<p>I was trying to define some short sequences to connect my two theorems. If anyone has any advice on a better way to do this it would be greatly appreciated. Can share the code for the other version of CS inequality but its long and I didn't want to make this post overly long. </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c1\">-- #check prop_3_5</span>\n<span class=\"kd\">lemma</span> <span class=\"n\">Cauchy_Schwarz_Inequality_2''</span> <span class=\"o\">(</span> <span class=\"n\">a</span><span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"n\">b</span><span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"n\">c</span><span class=\"o\">:</span> <span class=\"n\">ℝ</span>  <span class=\"o\">)(</span> <span class=\"n\">d</span><span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"o\">)</span> <span class=\"o\">:</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">b</span> <span class=\"bp\">+</span> <span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">d</span> <span class=\"bp\">≤</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">c</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">b</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">d</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"k\">let</span> <span class=\"n\">xs</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"n\">Real</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span>   <span class=\"bp\">=&gt;</span> <span class=\"n\">a</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">1</span>   <span class=\"bp\">=&gt;</span> <span class=\"n\">c</span>\n  <span class=\"bp\">|</span> <span class=\"n\">x</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">x</span>\n  <span class=\"k\">let</span> <span class=\"n\">ys</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"n\">Real</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span>   <span class=\"bp\">=&gt;</span> <span class=\"n\">b</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">1</span>   <span class=\"bp\">=&gt;</span> <span class=\"n\">d</span>\n  <span class=\"bp\">|</span> <span class=\"n\">y</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">y</span>\n  <span class=\"k\">have</span> <span class=\"n\">x0</span> <span class=\"o\">:</span> <span class=\"n\">xs</span> <span class=\"mi\">0</span> <span class=\"bp\">=</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">rfl</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">x0</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">x1</span> <span class=\"o\">:</span> <span class=\"n\">xs</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"n\">c</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">rfl</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">x1</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">y0</span> <span class=\"o\">:</span> <span class=\"n\">ys</span> <span class=\"mi\">0</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">rfl</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">y0</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">y1</span> <span class=\"o\">:</span> <span class=\"n\">ys</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"n\">d</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">rfl</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">y1</span><span class=\"o\">]</span>\n  <span class=\"n\">apply</span> <span class=\"n\">Cauchy_Schwarz_Inequality_2'</span>\n  <span class=\"c1\">--  Cauchy_Schwarz_Inequality_2' (x y : ℕ → ℝ) :</span>\n  <span class=\"c1\">-- x 0 * y 0 + x 1 * y 1 ≤ Real.sqrt (x 0 ^ 2 + x 1 ^ 2) * Real.sqrt (y 0 ^ 2 + y 1 ^ 2)</span>\n</code></pre></div>",
        "id": 423791374,
        "sender_full_name": "Sammy Webb",
        "timestamp": 1709117044
    },
    {
        "content": "<p>No need for the rewrites:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Data.Real.Sqrt</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">Cauchy_Schwarz_Inequality_2'</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">x</span> <span class=\"mi\">0</span> <span class=\"bp\">*</span> <span class=\"n\">y</span> <span class=\"mi\">0</span> <span class=\"bp\">+</span> <span class=\"n\">x</span> <span class=\"mi\">1</span> <span class=\"bp\">*</span> <span class=\"n\">y</span> <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"mi\">0</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">x</span> <span class=\"mi\">1</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"mi\">0</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">y</span> <span class=\"mi\">1</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n  <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">Cauchy_Schwarz_Inequality_2''</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"n\">d</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">b</span> <span class=\"bp\">+</span> <span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">d</span> <span class=\"bp\">≤</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">c</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">Real.sqrt</span> <span class=\"o\">(</span><span class=\"n\">b</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">d</span> <span class=\"bp\">^</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"k\">let</span> <span class=\"n\">xs</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span> <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">a</span> <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">c</span> <span class=\"bp\">|</span> <span class=\"n\">_</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"k\">let</span> <span class=\"n\">ys</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span> <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">b</span> <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">d</span> <span class=\"bp\">|</span> <span class=\"n\">_</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"n\">exact</span> <span class=\"n\">Cauchy_Schwarz_Inequality_2'</span> <span class=\"n\">xs</span> <span class=\"n\">ys</span>\n</code></pre></div>\n<p>Have you seen <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.sum_mul_sq_le_sq_mul_sq#doc\">docs#Finset.sum_mul_sq_le_sq_mul_sq</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sum_mul_sq_le_sq_mul_sq%3F#doc\">docs#sum_mul_sq_le_sq_mul_sq?</a> [Edit: I meant <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sum_mul_le_sqrt_mul_sqrt#doc\">docs#sum_mul_le_sqrt_mul_sqrt</a>]</p>",
        "id": 423803551,
        "sender_full_name": "Richard Copley",
        "timestamp": 1709121700
    },
    {
        "content": "<p>Thank you very much that is very helpful. </p>\n<p>As for have I seen those, only in passing. I am formalising a university course as part of a university project so the objective is to follow the proofs given in the course as closely as I can hence why I am not using these to complete the proofs but thank you very much for sharing them with me just incase.</p>",
        "id": 423804386,
        "sender_full_name": "Sammy Webb",
        "timestamp": 1709122011
    }
]