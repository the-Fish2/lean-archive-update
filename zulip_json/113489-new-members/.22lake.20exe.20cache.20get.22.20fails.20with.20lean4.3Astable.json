[
    {
        "content": "<p>I've created a minimal Lean project.  Here is my lakefile.lean:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Lake</span>\n<span class=\"kn\">open</span> <span class=\"n\">Lake</span> <span class=\"n\">DSL</span>\n\n<span class=\"n\">package</span> <span class=\"n\">hello</span>\n\n<span class=\"n\">require</span> <span class=\"n\">mathlib</span> <span class=\"k\">from</span> <span class=\"n\">git</span> <span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span>\n</code></pre></div>\n<p>Here is my lean-toolchain:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4.5.0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n</code></pre></div>\n<p>If I run \"lake exe cache get\", it works fine.</p>\n<p>However, suppose that I modify lean-toolchain to refer to lean4:stable:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span>\n</code></pre></div>\n<p>Now if I run \"lake exe cache get\" I get errors:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">stdout</span><span class=\"o\">:</span>\n<span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/././</span><span class=\"n\">Cache</span><span class=\"bp\">/</span><span class=\"n\">Requests.lean</span><span class=\"o\">:</span><span class=\"mi\">61</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">escape</span> <span class=\"n\">sequence</span>\n<span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/././</span><span class=\"n\">Cache</span><span class=\"bp\">/</span><span class=\"n\">Requests.lean</span><span class=\"o\">:</span><span class=\"mi\">137</span><span class=\"o\">:</span><span class=\"mi\">32</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">unknown</span> <span class=\"n\">identifier</span> <span class=\"bp\">'</span><span class=\"n\">downloadFile'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"bp\">`/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">adam</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---stable/bin/lean` exited with code 1</span>\n</code></pre></div>\n<p>Is this a bug?  Or am I just expected to use the rc1 version if I want to be able to get a cached build?</p>",
        "id": 419005281,
        "sender_full_name": "Adam Dingle",
        "timestamp": 1706695651
    },
    {
        "content": "<p>If you want to use mathlib, you need to use the exact same lean version that mathlib uses</p>",
        "id": 419006674,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1706696092
    },
    {
        "content": "<p>Ah, I get it - I'm using lean 4.5.0-rc1, so I need the same version of the libraries.  Makes sense.  Thanks.</p>",
        "id": 419007117,
        "sender_full_name": "Adam Dingle",
        "timestamp": 1706696230
    }
]