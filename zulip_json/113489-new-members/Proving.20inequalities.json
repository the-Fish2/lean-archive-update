[
    {
        "content": "<p>In this program <code>mul_lt_mul_left</code> seems to be the theorem I want to use but I can't get it to work with the hypotheses that I previously proved.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Tactic</span>\n<span class=\"kd\">def</span> <span class=\"n\">fib</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℚ</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">1</span>\n  <span class=\"bp\">|</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"n\">fib</span> <span class=\"n\">n</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">seven_fourths</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">fib</span> <span class=\"n\">n</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span> <span class=\"bp\">/</span> <span class=\"mi\">4</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"bp\">^</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">induction'</span> <span class=\"n\">n</span> <span class=\"n\">using</span> <span class=\"n\">Nat.twoStepInduction</span> <span class=\"k\">with</span> <span class=\"n\">k</span> <span class=\"n\">ih1</span> <span class=\"n\">ih2</span>\n  <span class=\"bp\">·</span>  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n     <span class=\"n\">norm_num</span>\n  <span class=\"bp\">·</span>  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n     <span class=\"n\">norm_num</span>\n  <span class=\"bp\">·</span> <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">norm_num</span>\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">norm_num</span>\n    <span class=\"k\">calc</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"n\">fib</span> <span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n       <span class=\"n\">_</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rel</span> <span class=\"o\">[</span><span class=\"n\">ih1</span><span class=\"o\">,</span> <span class=\"n\">ih2</span><span class=\"o\">]</span>\n       <span class=\"n\">_</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">pow_add</span><span class=\"o\">,</span><span class=\"n\">pow_one</span><span class=\"o\">,</span><span class=\"n\">add_comm</span><span class=\"o\">]</span>\n       <span class=\"n\">_</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">mul_one_add</span><span class=\"o\">]</span>\n       <span class=\"n\">_</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">mul_lt_mul_left.mpr</span> <span class=\"n\">h1</span> <span class=\"n\">h2</span>\n       <span class=\"n\">_</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">pow_add</span><span class=\"o\">]</span>\n  <span class=\"n\">done</span>\n</code></pre></div>",
        "id": 412380214,
        "sender_full_name": "Moti Ben-Ari",
        "timestamp": 1704990927
    },
    {
        "content": "<p>I think you need <code>(mul_lt_mul_left h1).mpr h2</code></p>",
        "id": 412380786,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1704991095
    },
    {
        "content": "<p>The <code>0 &lt; a</code> hypothesis is an argument to the <code>mul_lt_mul_left</code> lemma.</p>",
        "id": 412380866,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1704991124
    },
    {
        "content": "<p>You didn't give any context so maybe you have pedagogical constraints and my comment will be useless, but let me try anyway: the idiomatic way of writing this proof is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Tactic</span>\n<span class=\"kd\">def</span> <span class=\"n\">fib</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℚ</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">1</span>\n  <span class=\"bp\">|</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"n\">fib</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">seven_fourths</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">fib</span> <span class=\"n\">n</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span> <span class=\"bp\">/</span> <span class=\"mi\">4</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"bp\">^</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">induction'</span> <span class=\"n\">n</span> <span class=\"n\">using</span> <span class=\"n\">Nat.twoStepInduction</span> <span class=\"k\">with</span> <span class=\"n\">k</span> <span class=\"n\">ih1</span> <span class=\"n\">ih2</span>\n  <span class=\"bp\">·</span>  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n     <span class=\"n\">norm_num</span>\n  <span class=\"bp\">·</span>  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n     <span class=\"n\">norm_num</span>\n  <span class=\"bp\">·</span> <span class=\"k\">calc</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">fib</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"n\">fib</span> <span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">fib</span><span class=\"o\">]</span>\n       <span class=\"n\">_</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">gcongr</span>\n       <span class=\"n\">_</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span>\n       <span class=\"n\">_</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">gcongr</span> <span class=\"bp\">;</span> <span class=\"n\">norm_num</span>\n       <span class=\"n\">_</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span>\n  <span class=\"n\">done</span>\n</code></pre></div>",
        "id": 412383877,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1704992110
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span> , it worked after I fixed up <code>have h1 : 0 &lt; (7/4:ℚ)^k := by apply pow_pos ; norm_num</code></p>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> The context is that I didn't know about <code>gcongr</code>! It appears only in one program in chapter 6 of MIL and not at all in TPIN, MOP, FM, HTPIWL, so I'm not surprised that I never learned it.</p>",
        "id": 412389236,
        "sender_full_name": "Moti Ben-Ari",
        "timestamp": 1704993836
    },
    {
        "content": "<p>The <a href=\"https://hrmacbeth.github.io/math2001/Mainstream_Lean.html\">teaching version</a> of <code>gcongr</code> is <code>rel</code> and this is ubiquitous in MOP.</p>",
        "id": 412396019,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1704996467
    },
    {
        "content": "<p>About MIL: we are aware of the issue. I've been meaning to write a proper chapter about calculations since last summer, but time is very scarce and there are lots of projects.</p>",
        "id": 412399933,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1704998211
    }
]