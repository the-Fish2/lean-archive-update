[
    {
        "content": "<p>The listings package for latex enables the listing of code/programs in latex documents, and language specific support enables syntax highlighting.</p>\n<p><a href=\"https://ctan.org/pkg/listings?lang=en\">https://ctan.org/pkg/listings?lang=en</a></p>\n<p>Currently the upstream package doesn't have support for lean4. </p>\n<p>Sometimes people will create the \"style\" file themselves. </p>\n<p>So my question is - is anyone aware of a \"listings package\" style file for lean4 that I can manually place in the correct folder for it to be supported by my latex setup?</p>\n<p>(I myself actually use lyx, not latex directly, but I don't think that makes a difference as lyx imports the standards latex package.)</p>",
        "id": 442553896,
        "sender_full_name": "rzeta0",
        "timestamp": 1717513950
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover/lean4/blob/master/doc/latex/lstlean.tex\">https://github.com/leanprover/lean4/blob/master/doc/latex/lstlean.tex</a></p>",
        "id": 442574692,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717519118
    },
    {
        "content": "<p>Note that there are many versions of this file floating around, where each user add a couple of tweaks. But there is no great solution, especially if you are used to relying on semantic syntax highlighting.</p>",
        "id": 442574893,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717519182
    },
    {
        "content": "<p>Can we upstream this to listings itself somehow? I have 100 versions of that file in all my latex projects</p>",
        "id": 442646032,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1717541405
    },
    {
        "content": "<p>I agree this is a real issue. But I don’t know whether there is a maximal version that would be useful for everybody.</p>",
        "id": 442646178,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717541479
    },
    {
        "content": "<p>There is obviously a prototype file which is distributed and modified by users</p>",
        "id": 442646315,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1717541529
    },
    {
        "content": "<p>I don't think it needs to be maximal, but you can certainly approximate the basic standard language of lean4</p>",
        "id": 442646389,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1717541565
    },
    {
        "content": "<p>in case it helps others...</p>\n<p>after some hacking with Lyx on macOS and maxTex ... the following recipe seems to be working..</p>\n<p>install lean listings style from</p>\n<p><a href=\"https://github.com/leanprover/lean4/blob/master/doc/latex/lstlean.tex\">https://github.com/leanprover/lean4/blob/master/doc/latex/lstlean.tex</a></p>\n<p>rename it to .sty and put it in</p>\n<p>/usr/local/texlive/2024/texmf-dist/tex/latex/listings</p>\n<p>update listings.cfg with {lstlang0.sty,lstlang1.sty,lstlang2.sty,lstlang3.sty,lstlean.sty}</p>\n<p>then run texhash as root</p>\n<p>then as preamble</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">\\</span><span class=\"n\">usepackage</span><span class=\"o\">{</span><span class=\"n\">color</span><span class=\"o\">}</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">keywordcolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">}</span><span class=\"w\">   </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">red</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">tacticcolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.6</span><span class=\"o\">}</span><span class=\"w\">    </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">blue</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">commentcolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.4</span><span class=\"o\">}</span><span class=\"w\">   </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">grey</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">symbolcolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.6</span><span class=\"o\">}</span><span class=\"w\">    </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">blue</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">sortcolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">}</span><span class=\"w\">      </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">green</span>\n<span class=\"bp\">\\</span><span class=\"n\">definecolor</span><span class=\"o\">{</span><span class=\"n\">attributecolor</span><span class=\"o\">}{</span><span class=\"n\">rgb</span><span class=\"o\">}{</span><span class=\"mf\">0.7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">red</span>\n</code></pre></div>",
        "id": 442676086,
        "sender_full_name": "rzeta0",
        "timestamp": 1717553629
    },
    {
        "content": "<p>You don’t need to do anything as root, you can simply put <code>lstlean.tex</code> in the same folder as your main tex file.</p>",
        "id": 442676265,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717553704
    },
    {
        "content": "<p>hi Patrick - you're right. The reason I was messing with system folders is that I was hoping to get Lyx to pick up the new language option and show it in the UI. (I use lyx files, not tex files directly). </p>\n<p>Sadly it seems Lyx's list of languages is hardcoded and not read dynamically from the listing package style files.</p>",
        "id": 442677319,
        "sender_full_name": "rzeta0",
        "timestamp": 1717554122
    },
    {
        "content": "<p>Does Lyx have support for <code>minted</code>?</p>",
        "id": 442734615,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1717579110
    },
    {
        "content": "<p>Eric - I don't think it does within the UI, but some people do use custom code. For me that would be too manual as I'm hoping to have lots of lean4 code examples.</p>\n<p>For now I have a solution - the lstlean.sty file is found by Latex and my Lyx code sections have a config to override the language, so I can copy/paste those sections.</p>",
        "id": 442747328,
        "sender_full_name": "rzeta0",
        "timestamp": 1717582896
    },
    {
        "content": "<p>It may be a good opportunity to get rid of Lyx and switch to an efficient way of editing TeX files.</p>",
        "id": 442772761,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717590433
    }
]