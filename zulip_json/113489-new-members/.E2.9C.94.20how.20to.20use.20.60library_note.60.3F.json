[
    {
        "content": "<p>This code doesn't seem to work in Lean4 web.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries.Util.LibraryNote</span>\n\n<span class=\"n\">library_note</span><span class=\"w\"> </span><span class=\"s2\">\"tag foo\"</span>\n<span class=\"sd\">/-- sample -/</span>\n\n\n<span class=\"c1\">-- see note [tag foo]</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">hoge</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"hoge\"</span>\n</code></pre></div>",
        "id": 444868847,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718462244
    },
    {
        "content": "<p>I opend <code>Batteries.Classes.RatCase.lean</code> in vscode, but library note did not seem to work.</p>",
        "id": 444868989,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718462357
    },
    {
        "content": "<p>I think that library_note is defined in <code>Batteries/Util/LibraryNote.lean</code>.</p>",
        "id": 444869444,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1718462726
    },
    {
        "content": "<p>I know where <code>library_note</code> is defined. Is there useful information there?</p>",
        "id": 444869555,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718462813
    },
    {
        "content": "<p>I think all information I can obtain from the file is only the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">\\```</span>\n<span class=\"sd\">library_note \"some tag\" /--</span>\n<span class=\"sd\">... some explanation ...</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">\\```</span>\n<span class=\"n\">creates</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"s2\">\"library note\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">cross</span><span class=\"bp\">-</span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"n\">using</span>\n<span class=\"bp\">\\```</span>\n<span class=\"c1\">-- See note [some tag]</span>\n<span class=\"bp\">\\```</span>\n<span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">comments</span><span class=\"bp\">.</span>\n<span class=\"bp\">-/</span>\n<span class=\"n\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"library_note \"</span><span class=\"w\"> </span><span class=\"n\">title</span><span class=\"o\">:</span><span class=\"n\">strLit</span><span class=\"w\"> </span><span class=\"n\">ppSpace</span><span class=\"w\"> </span><span class=\"n\">text</span><span class=\"o\">:</span><span class=\"n\">docComment</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">modifyEnv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">libraryNoteExt.addEntry</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">title.getString</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">text.getDocString</span><span class=\"o\">))</span>\n</code></pre></div>",
        "id": 444869703,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718462945
    },
    {
        "content": "<p>I wonder <code>library_note</code> is extension for doc-gen</p>",
        "id": 444870334,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718463417
    },
    {
        "content": "<p>It cannot be, doc-gen can only know about environment extensions that are defined in core or libraries that it depends on.</p>",
        "id": 444870385,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1718463462
    },
    {
        "content": "<p>ok, then how to use <code>library_note</code>?</p>",
        "id": 444880476,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718468769
    },
    {
        "content": "<p>Your example above is correct usage, and produces no errors</p>",
        "id": 444880658,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718468830
    },
    {
        "content": "<p>What do you mean by \"doesn't work\"?</p>",
        "id": 444880682,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718468839
    },
    {
        "content": "<blockquote>\n<p>Your example above is correct usage, and produces no errors<br>\nWhat do you mean by \"doesn't work\"?</p>\n</blockquote>\n<p>Oh, that is right? I thought <code>library_note</code> create a link in editor, and navigate me to the tagged document when click <code>[some tag]</code>.</p>",
        "id": 444881036,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718468954
    },
    {
        "content": "<p>I thought that clicking on the [some tag] part would jump to the library_note definition, like a markdown link...</p>",
        "id": 444881251,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718469020
    },
    {
        "content": "<p>What does \"which can then be cross-referenced\" mean?</p>",
        "id": 444881567,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718469173
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> <a href=\"#narrow/stream/113489-new-members/topic/how.20to.20use.20.60library_note.60.3F/near/444870334\">said</a>:</p>\n<blockquote>\n<p>I wonder <code>library_note</code> is extension for doc-gen</p>\n</blockquote>\n<p>It is, the original purpose of <code>library_note</code> is for doc-gen but lean 4 doc-gen has not yet caught up to the facilities of lean 3 doc-gen and we didn't want to remove all the documentation we'd written in the meantime</p>",
        "id": 444895414,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718476794
    },
    {
        "content": "<p>so right now it doesn't actually do anything besides look documentation-like in the source</p>",
        "id": 444895510,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718476845
    },
    {
        "content": "<p>Thank you, <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> !!</p>",
        "id": 444895581,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1718476884
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 444895591,
        "sender_full_name": "Notification Bot",
        "timestamp": 1718476889
    },
    {
        "content": "<p>it isn't just for doc-gen, it also (is supposed to) work in the editor where you can click on bracketed tags in doc comments and it takes you to the library note</p>",
        "id": 444895691,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718476931
    }
]