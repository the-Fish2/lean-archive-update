[
    {
        "content": "<p>I've got this code that requires extracting the index of the last entry of a row that equals 1:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">is_rrf_row</span> <span class=\"o\">(</span><span class=\"n\">ri</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"n\">Rat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Bool</span><span class=\"bp\">Ã—</span><span class=\"n\">Nat</span> <span class=\"o\">:=</span>\n  <span class=\"k\">let</span> <span class=\"n\">should_0</span> <span class=\"o\">:=</span> <span class=\"n\">ri.after</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">x</span> <span class=\"bp\">=&gt;</span> <span class=\"o\">((</span><span class=\"n\">ri.indexOf</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">==</span> <span class=\"o\">(</span><span class=\"n\">ri.indexesOf</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLast</span><span class=\"bp\">!</span><span class=\"o\">))</span>\n  <span class=\"k\">if</span> <span class=\"n\">should_0.all</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">x</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">x</span><span class=\"bp\">==</span><span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"k\">then</span> <span class=\"o\">(</span><span class=\"n\">True</span><span class=\"o\">,(</span><span class=\"n\">ri.indexesOf</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLast</span><span class=\"bp\">!</span><span class=\"o\">)</span>\n  <span class=\"k\">else</span> <span class=\"o\">(</span><span class=\"n\">False</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>It works, but it keeps giving this warning in a dialogue box at the bottom right of my screen:<br>\n\"Lean server printed an error:<br>\nPANIC at List.getLast! Init.Data.List.BasicAux:63:13: empty list<br>\nPANIC at List.getLast! Init.Data.List.BasicAux:63:13: empty list\"<br>\nCan I ignore it, or should I try to modify my code and get rid of the warning?</p>",
        "id": 438181945,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1715517323
    },
    {
        "content": "<p>you are trying to get the last element of an empty list, you should probably rewrite the code to not do this</p>",
        "id": 438182023,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1715517390
    },
    {
        "content": "<p>the standard position is that panics are always a bug in the code</p>",
        "id": 438182033,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1715517404
    },
    {
        "content": "<blockquote>\n<p>the index of the last entry of a row that equals 1</p>\n</blockquote>\n<p>Lean is asking you to consider the question \"what if there is no such entry?\"</p>",
        "id": 438182065,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1715517457
    },
    {
        "content": "<p>and the fact you are getting this panic indicates that the answer is not \"it's fine because the code will never be called in that case\"</p>",
        "id": 438182152,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1715517521
    },
    {
        "content": "<p>Thanks, fixed it now</p>",
        "id": 438182487,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1715517885
    }
]