[
    {
        "content": "<p>I decided to give Lean another try (the system is a bit impolite, but I'll try to ignore this). My current question is that in vscode on my arm debian after I create a fresh project I get a blue circle with a one on the git icon, and if I do \"git status\" it tells me \"modified:   .lake/packages/Cli (untracked content)\". So what should I do to get rid of that blue one? My knowledge of vscode and git is not sufficient to decide what is the best approach for this.</p>",
        "id": 435371934,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046082
    },
    {
        "content": "<p>Please open a \"new conversation\"</p>",
        "id": 435371997,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1714046103
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/89dkACm_qAzSZdhz1Xdopyj5/Screenshot-2024-04-25-at-12.55.04.png\">Screenshot-2024-04-25-at-12.55.04.png</a><br>\nBy clicking this button</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/89dkACm_qAzSZdhz1Xdopyj5/Screenshot-2024-04-25-at-12.55.04.png\" title=\"Screenshot-2024-04-25-at-12.55.04.png\"><img src=\"/user_uploads/3121/89dkACm_qAzSZdhz1Xdopyj5/Screenshot-2024-04-25-at-12.55.04.png\"></a></div>",
        "id": 435372031,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1714046116
    },
    {
        "content": "<p>As will be clear I'm a newbie. How do I remove that message?</p>",
        "id": 435372032,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046117
    },
    {
        "content": "<p>You can hover over a message and press either delete or \"move message\"</p>",
        "id": 435372105,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1714046149
    },
    {
        "content": "<p>5 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/stream/113489-new-members/topic/Floor.20division.20hell.20in.20asymptotics\">#new members &gt; Floor division hell in asymptotics</a> by <span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span>.</p>",
        "id": 435372198,
        "sender_full_name": "Notification Bot",
        "timestamp": 1714046174
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"579936\">Gareth Ma</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435372031\">said</a>:</p>\n<blockquote>\n<p><a href=\"/user_uploads/3121/89dkACm_qAzSZdhz1Xdopyj5/Screenshot-2024-04-25-at-12.55.04.png\">Screenshot-2024-04-25-at-12.55.04.png</a><br>\nBy clicking this button</p>\n</blockquote>\n<p>I don't see that button. Should I just change the topic before pressing the blue button on the right?<br>\n<a href=\"/user_uploads/3121/jYaYbqI_GGNhvrSaSqxuSF3O/Screenshot-2024-04-25-at-13.58.18.png\">Screenshot-2024-04-25-at-13.58.18.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jYaYbqI_GGNhvrSaSqxuSF3O/Screenshot-2024-04-25-at-13.58.18.png\" title=\"Screenshot-2024-04-25-at-13.58.18.png\"><img src=\"/user_uploads/3121/jYaYbqI_GGNhvrSaSqxuSF3O/Screenshot-2024-04-25-at-13.58.18.png\"></a></div>",
        "id": 435372596,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046314
    },
    {
        "content": "<p>Okay, it worked</p>",
        "id": 435373503,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714046623
    },
    {
        "content": "<p>Now that git message sounds a little odd. How did you create the new project?</p>",
        "id": 435373679,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714046675
    },
    {
        "content": "<p>I was using a web browser, but now installed an app. Let's see whether that works more easily for me.</p>",
        "id": 435373708,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046685
    },
    {
        "content": "<p>And I still would like an answer to my git question <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435373778,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046710
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 435374135,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714046821
    },
    {
        "content": "<p>Yeah, that's... a choice :)</p>",
        "id": 435374244,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714046857
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435373679\">said</a>:</p>\n<blockquote>\n<p>Now that git message sounds a little odd. How did you create the new project?</p>\n</blockquote>\n<p>So how about this?</p>",
        "id": 435374382,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714046898
    },
    {
        "content": "<p>Ah, I missed that reply, sorry. I did <code>lake new lean4 math</code>, then <code>cd lean4</code>, then <code>lake update</code>,  then <code>lake exe cache get</code>, then <code>git commit -a</code>, then <code>git status</code>.</p>",
        "id": 435374884,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047076
    },
    {
        "content": "<p>Let me try that</p>",
        "id": 435374996,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047113
    },
    {
        "content": "<p>Actually instead of <code>git commit -a</code> I clicked inside <code>code</code>, to get rid of the blue number on the git icon.</p>",
        "id": 435375160,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047161
    },
    {
        "content": "<p>You need to add <code>/.lake/</code> to your <code>.gitignore</code> file.</p>",
        "id": 435375189,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1714047171
    },
    {
        "content": "<p>I can do that, but why did <code>lake new ...</code> not put it there? Currently the contents are: </p>\n<div class=\"codehilite\" data-code-language=\"/build\"><pre><span></span><code>/lake-packages/*```\n</code></pre></div>",
        "id": 435375356,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047240
    },
    {
        "content": "<p>The location of dependencies changed, apparently this wasn't updated</p>",
        "id": 435375445,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047261
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435374996\">said</a>:</p>\n<blockquote>\n<p>Let me try that</p>\n</blockquote>\n<p>Did you get the same behavior, or does it have something to do with my setup?</p>",
        "id": 435375659,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047335
    },
    {
        "content": "<p>Also, your <code>git commit -a</code> staged those files in <code>.lake</code> which isn't advisable.</p>",
        "id": 435375691,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1714047347
    },
    {
        "content": "<p>I did get the same outcome</p>",
        "id": 435375717,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047359
    },
    {
        "content": "<p>Which is really odd, because the other dependencies got added, but only Cli is still marked as pending change</p>",
        "id": 435375846,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"560559\">Richard Osborn</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435375691\">said</a>:</p>\n<blockquote>\n<p>Also, your <code>git commit -a</code> staged those files in <code>.lake</code> which isn't advisable.</p>\n</blockquote>\n<p>I don't think it did, as it is \"untracked content\"?</p>",
        "id": 435375954,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047429
    },
    {
        "content": "<p>If you do <code>git log --stat</code>, I think you'll see that you added a number of things under <code>.lake</code></p>",
        "id": 435376087,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"560559\">Richard Osborn</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435375189\">said</a>:</p>\n<blockquote>\n<p>You need to add <code>/.lake/</code> to your <code>.gitignore</code> file.</p>\n</blockquote>\n<p>Should this be <code>/.lake/</code> or <code>/.lake</code> or <code>/.lake/*</code> or doesn't it matter?</p>",
        "id": 435376189,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047499
    },
    {
        "content": "<p>I'm not sure it matters, but mathlib uses <code>/.lake/</code></p>",
        "id": 435376262,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435376087\">said</a>:</p>\n<blockquote>\n<p>If you do <code>git log --stat</code>, I think you'll see that you added a number of things under <code>.lake</code></p>\n</blockquote>\n<p>Yes. <code>mathlib</code> for example! But apparently that had a different status from <code>Cli</code>. So should I start fresh, and add this <code>/.lake/</code> line to <code>.gitignore</code> before making my initial commit?</p>",
        "id": 435376541,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047623
    },
    {
        "content": "<p>just type <code>git undo</code> and you should be fine</p>",
        "id": 435376634,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1714047661
    },
    {
        "content": "<p>I would start fresh, yeah, but use the first command in <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a></p>",
        "id": 435376637,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047662
    },
    {
        "content": "<p>That will get you a correct gitignore</p>",
        "id": 435376700,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047685
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435376637\">said</a>:</p>\n<blockquote>\n<p>I would start fresh, yeah, but use the first command in <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a></p>\n</blockquote>\n<p>Okay, I'll do so, thanks for the help, and thanks for the pointer to the correct command. The <code>lake update</code> and <code>lake exe cache get</code> are still correct, and should be given explicitly after?</p>",
        "id": 435376926,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047744
    },
    {
        "content": "<p>I <em>think</em> <code>lake update</code> will not do anything at this point, because <code>lake new</code> should get the newest version of mathlib anyway, but it won't hurt</p>",
        "id": 435377074,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047797
    },
    {
        "content": "<p>Definitely use <code>lake exe cache get</code> to get a precompiled  version of mathlib</p>",
        "id": 435377241,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714047846
    },
    {
        "content": "<p>It's taking time, so I think it's doing something. I think mathlib was not downloaded yet.</p>",
        "id": 435377275,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714047859
    },
    {
        "content": "<p>Oh yes, it looks like I was wrong and <code>lake update</code> does do something at this point</p>",
        "id": 435377726,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048017
    },
    {
        "content": "<p><code>git status</code> now says:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">On</span> <span class=\"n\">branch</span> <span class=\"n\">master</span>\n\n<span class=\"n\">No</span> <span class=\"n\">commits</span> <span class=\"n\">yet</span>\n\n<span class=\"n\">Untracked</span> <span class=\"n\">files</span><span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"s2\">\"git add &lt;file&gt;...\"</span> <span class=\"n\">to</span> <span class=\"kn\">include</span> <span class=\"k\">in</span> <span class=\"n\">what</span> <span class=\"n\">will</span> <span class=\"n\">be</span> <span class=\"n\">committed</span><span class=\"o\">)</span>\n        <span class=\"bp\">.</span><span class=\"n\">gitignore</span>\n        <span class=\"n\">Lean4.lean</span>\n        <span class=\"n\">Lean4</span><span class=\"bp\">/</span>\n        <span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest.json</span>\n        <span class=\"n\">lakefile.lean</span>\n        <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n\n<span class=\"n\">nothing</span> <span class=\"n\">added</span> <span class=\"n\">to</span> <span class=\"n\">commit</span> <span class=\"n\">but</span> <span class=\"n\">untracked</span> <span class=\"n\">files</span> <span class=\"n\">present</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"s2\">\"git add\"</span> <span class=\"n\">to</span> <span class=\"n\">track</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Which of those should I add to <code>.gitignore</code>, and which should I <code>git add</code>? Or can I just go into <code>code</code>, and will it do the right thing for me?</p>",
        "id": 435377742,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048023
    },
    {
        "content": "<p>I guess the <code>Lean4</code> stuff is because I called the project <code>lean4</code>?</p>",
        "id": 435377886,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048068
    },
    {
        "content": "<p>Yes, exactly. You should add all of those</p>",
        "id": 435378132,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048144
    },
    {
        "content": "<p>And the <code>lean-toolchain</code> file says <code>leanprover/lean4:v4.7.0</code>. Does that mean that the project won't automatically move versions if a newer version of lean4 comes out?</p>",
        "id": 435378177,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048162
    },
    {
        "content": "<p>That's correct</p>",
        "id": 435378199,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048169
    },
    {
        "content": "<p>So what is the <code>lake</code> command to move to a newer <code>lean</code>?</p>",
        "id": 435378246,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048187
    },
    {
        "content": "<p>Or to pull the most recent version of mathlib for that matter?</p>",
        "id": 435378335,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048205
    },
    {
        "content": "<p>I believe you just need to edit that file (and run <code>lake update</code>)</p>",
        "id": 435378370,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1714048217
    },
    {
        "content": "<p><code>lake update</code> will update mathlib, and I think it now automatically updates <code>lean-toolchain</code> to match mathlib</p>",
        "id": 435378450,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048250
    },
    {
        "content": "<p>That sounds great, thanks for all the help.</p>",
        "id": 435378534,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048276
    },
    {
        "content": "<p>Sorry for all the questions, but as this is a newbie channel, I hope I shouldn't feel too embarrassed about it.</p>",
        "id": 435378604,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048310
    },
    {
        "content": "<p>Lean4 is still changing quite a lot in ways that need accompanying mathlib changes, so you want to use a matching version</p>",
        "id": 435378612,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048314
    },
    {
        "content": "<p>No worries, that's what this stream is for</p>",
        "id": 435378697,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1714048331
    },
    {
        "content": "<p>So I should just do <code>lake update</code> occassionally? I'll try to remember that.</p>",
        "id": 435378791,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048363
    },
    {
        "content": "<p>If I do <code>lake update</code> I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"o\">:</span> <span class=\"n\">Qq</span><span class=\"o\">:</span> <span class=\"n\">ignoring</span> <span class=\"n\">missing</span> <span class=\"n\">dependency</span> <span class=\"n\">manifest</span> <span class=\"bp\">'./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest.json'</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span> <span class=\"n\">Cli</span><span class=\"o\">:</span> <span class=\"n\">ignoring</span> <span class=\"n\">missing</span> <span class=\"n\">dependency</span> <span class=\"n\">manifest</span> <span class=\"bp\">'./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest.json'</span>\n</code></pre></div>\n<p>Should I worry about that? I like my life to be warning-free.</p>",
        "id": 435378877,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048394
    },
    {
        "content": "<p>But maybe being warning-free is something a Lean-user should not aspire to? <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435379093,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048458
    },
    {
        "content": "<p>By the way, a way to go through all these steps without the terminal is to open VS Code, open an empty text document and then click the following button:<br>\n<a href=\"/user_uploads/3121/1vOIcX2wyjvHU6pZJdJp9nHX/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1vOIcX2wyjvHU6pZJdJp9nHX/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/1vOIcX2wyjvHU6pZJdJp9nHX/image.png\"></a></div><p>That should set up your project depending on Mathlib for you with the correct toolchain, run <code>lake update</code>, <code>lake exe get cache</code> and create an initial commit with all these files.</p>",
        "id": 435379211,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714048505
    },
    {
        "content": "<p>Good to know, I'll try that next time <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435379518,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048604
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435378877\">said</a>:</p>\n<blockquote>\n<p>If I do <code>lake update</code> I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"o\">:</span> <span class=\"n\">Qq</span><span class=\"o\">:</span> <span class=\"n\">ignoring</span> <span class=\"n\">missing</span> <span class=\"n\">dependency</span> <span class=\"n\">manifest</span> <span class=\"bp\">'./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest.json'</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span> <span class=\"n\">Cli</span><span class=\"o\">:</span> <span class=\"n\">ignoring</span> <span class=\"n\">missing</span> <span class=\"n\">dependency</span> <span class=\"n\">manifest</span> <span class=\"bp\">'./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest.json'</span>\n</code></pre></div>\n<p>Should I worry about that? I like my life to be warning-free.</p>\n</blockquote>\n<p>No, you don't need to worry about it. I should probably just go ahead and add a <code>lake-manifest.json</code> file to lean4-cli already!</p>",
        "id": 435379624,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714048651
    },
    {
        "content": "<p>Just an empty file?</p>",
        "id": 435379795,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048694
    },
    {
        "content": "<p>To be clear, this is nothing you should do, but something that I should do for the repository behind <code>Cli</code>.<br>\nIt won't be quite an empty file, but close to one :-)</p>",
        "id": 435380036,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714048776
    },
    {
        "content": "<p>And not for <code>Qq</code>? So how do I get rid of those warnings then?</p>",
        "id": 435380632,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714048986
    },
    {
        "content": "<p>these are issues in the upstream dependencies. Honestly it's not great that lake is bugging users about it, because there is nothing you can do to fix it short of forking the dependency</p>",
        "id": 435380698,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049013
    },
    {
        "content": "<p>Or, less drastically, bug the maintainer to fix it</p>",
        "id": 435380947,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714049098
    },
    {
        "content": "<p>Like I said at the very start: occasionally impolite <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> I'll ignore the warnings then for now. Thanks for all the help!</p>",
        "id": 435381004,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049117
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435380947\">said</a>:</p>\n<blockquote>\n<p>Or, less drastically, bug the maintainer to fix it</p>\n</blockquote>\n<p>Which apparently I have just done :grin:</p>",
        "id": 435381092,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049150
    },
    {
        "content": "<p>By the way, the issue you had with <code>lake-packages</code> showing up in the gitignore instead of <code>.lake</code> is evidence that you used an old <code>lake</code> version to run <code>lake new</code></p>",
        "id": 435381109,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049155
    },
    {
        "content": "<p>which makes sense, this is a frequent issue for people coming back to lean after a hiatus</p>",
        "id": 435381217,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049179
    },
    {
        "content": "<p>That's probably true then. So how do I update my lake?</p>",
        "id": 435381222,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049181
    },
    {
        "content": "<p><code>elan update stable</code> IIRC</p>",
        "id": 435381255,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049194
    },
    {
        "content": "<p>And should I update my lean4 too?</p>",
        "id": 435381266,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049198
    },
    {
        "content": "<p>it does both</p>",
        "id": 435381279,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049204
    },
    {
        "content": "<p>although for lean itself it doesn't matter as much because once you are in a project the lean-toolchain file overrides whatever you have set locally</p>",
        "id": 435381359,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049230
    },
    {
        "content": "<p><code>lake new</code> is special because it's the only lean command you are likely to run outside the context of a project</p>",
        "id": 435381398,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049247
    },
    {
        "content": "<p>So are there two lean4s then, one for my system and one for my project? That seems wasteful. Can I get rid of the global one then?</p>",
        "id": 435381460,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049268
    },
    {
        "content": "<p>there are much more than two :)</p>",
        "id": 435381495,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049280
    },
    {
        "content": "<p>elan holds all versions of lean that you have had cause to use, you can see them with <code>elan toolchain list</code></p>",
        "id": 435381633,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049310
    },
    {
        "content": "<p>Guest. I'll be back later.</p>",
        "id": 435381670,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714049325
    },
    {
        "content": "<p>The lean version used by your project is not stored <em>in</em> the project, it is stored in the <code>.elan</code> folder. So if you have multiple projects on the same version of lean you won't have two leans installed for those, but if you have two projects with different versions of lean then elan will cache them both</p>",
        "id": 435381970,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714049415
    },
    {
        "content": "<p>Ah yes, I see a lot of junk in that <code>.elan/toolchains</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"c1\">--lean---3.51.1     leanprover--lean4---v4.3.0-rc1</span>\n<span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly             leanprover--lean4---v4.7.0</span>\n<span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2023-02-04  leanprover--lean4---v4.7.0-rc2</span>\n<span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2023-06-20  stable</span>\n<span class=\"n\">leanprover</span><span class=\"c1\">--lean4---stable</span>\n</code></pre></div>\n<p>Is there a way to remove unused versions to clean up some space on my system?</p>",
        "id": 435393502,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714052693
    },
    {
        "content": "<p>I see a <code>stable</code> and a <code>leanprover--lean4---stable</code> and a lot of versions. I would have expected those stables to be symbolic links, but they aren't? Which versions are those then?</p>",
        "id": 435393872,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714052789
    },
    {
        "content": "<p>And the executables in <code>~/.elan/bin</code> all seem links to the same file. Is that in one of those toolchains as well?</p>",
        "id": 435394341,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714052905
    },
    {
        "content": "<p>Sorry, but I'd like to have some idea what Lean is sprinkling around my system <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435394441,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714052938
    },
    {
        "content": "<p>Do you know about <code>.mathlib</code>?</p>",
        "id": 435394561,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1714052972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435393872\">said</a>:</p>\n<blockquote>\n<p>I see a <code>stable</code> and a <code>leanprover--lean4---stable</code> and a lot of versions. I would have expected those stables to be symbolic links, but they aren't? Which versions are those then?</p>\n</blockquote>\n<p>They're whatever version the respective toolchain resolved to at the time of installation. Improving this is <a href=\"https://github.com/leanprover/elan/pull/106\">https://github.com/leanprover/elan/pull/106</a>, but unfortunately nobody has extensively tested this change yet, and Sebastian hasn't had time to work on Elan for a while.</p>",
        "id": 435394681,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714053002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435394561\">said</a>:</p>\n<blockquote>\n<p>Do you know about <code>.mathlib</code>?</p>\n</blockquote>\n<p>Ah, another unexpected hidden directory in my homedir... That's just 250M, the mathlib of the project is in <code>.lake/packages/mathlib</code>, I think? That's why I want just <em>one</em> project (with subdirectories for my actual project), which is why I called it <code>lean4</code> instead of something meaningful.</p>",
        "id": 435395266,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053152
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435394341\">said</a>:</p>\n<blockquote>\n<p>And the executables in <code>~/.elan/bin</code> all seem links to the same file. Is that in one of those toolchains as well?</p>\n</blockquote>\n<p><code>.elan/toolchains</code> contains the toolchains, <code>.elan/bin</code> is what is called when you call <code>lean</code>, <code>lake</code> etc., which then calls the correct toolchain binary (e.g. in a folder with a <code>lean-toolchain</code> file, it uses the one designated in that file).</p>",
        "id": 435395408,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714053188
    },
    {
        "content": "<p>I see, thanks, that makes sense.</p>",
        "id": 435395512,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053224
    },
    {
        "content": "<p>So if I just delete all toolchains from <code>.elan/toolchains</code> apart from the one that is in the <code>lean-toolchain</code> file of my project, will I break anything?</p>",
        "id": 435395679,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053264
    },
    {
        "content": "<p>Those files in <code>~/.elan/bin</code> are 12M, that's a lot of binary for such shallow functionality (just finding the right toolchain, and invoking what's there?) I guess they're programmed in Lean? <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435395947,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053336
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 435396146,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053377
    },
    {
        "content": "<p>I think I'd make sure that your default toolchain is the same as the one in your project first (<code>elan show</code> tells you what it is and you can set it with <code>elan default &lt;...&gt;</code>), but after that, deleting unused toolchains should be fine.<br>\nAlternatively, you can also use <code>elan toolchain uninstall &lt;...&gt;</code> to uninstall toolchains from the CLI.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435395947\">said</a>:</p>\n<blockquote>\n<p>Those files in <code>~/.elan/bin</code> are 12M, that's a lot of binary for such shallow functionality. I guess they're programmed in Lean? <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n</blockquote>\n<p>Elan is a Rust project and was originally forked from rustup.</p>",
        "id": 435396340,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714053432
    },
    {
        "content": "<p>Will the <code>elan toolchain uninstall ...</code> do more than just removing those directories (like update some configuration files)?</p>",
        "id": 435396885,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053582
    },
    {
        "content": "<p>And, as Kevin pointed out: can I just clean out the <code>.tar.gz</code>s in <code>.mathlib</code>? Is that Lean3 or Lean4 stuff?</p>",
        "id": 435397118,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714053630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435396885\">said</a>:</p>\n<blockquote>\n<p>Will the <code>elan toolchain uninstall ...</code> do more than just removing those directories (like update some configuration files)?</p>\n</blockquote>\n<p>I don't think so. I'm pretty sure that I've used both in the past before.</p>",
        "id": 435397187,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1714053648
    },
    {
        "content": "<p><code>elan toolchain uninstall</code> removes the directory from <code>.elan/toolchains</code> and also removes a file from <code>update-hashes</code>. If you do only the former without the latter then elan will enter a bad state, this is a common issue since it's natural to nuke the big folder and forget to clean up the config (not sure if there is an issue tracking this though or if it has since been fixed)</p>",
        "id": 435398803,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054143
    },
    {
        "content": "<p>Ouch! I just deleted all those subdirs. If I delete the corresponding ones from <code>update-hashes</code> I'm fine again?</p>",
        "id": 435399145,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714054251
    },
    {
        "content": "<p>I believe so</p>",
        "id": 435399176,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054260
    },
    {
        "content": "<p>Okay, thanks, I'll do so now then.</p>",
        "id": 435399194,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714054268
    },
    {
        "content": "<p><code>ls -ld */*</code> in <code>.elan</code> now says:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">elan</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanc</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanchecker</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanmake</span>\n<span class=\"bp\">-</span><span class=\"n\">rwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span> <span class=\"mi\">12136504</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">40</span> <span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanpkg</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"mi\">7</span> <span class=\"n\">freek</span> <span class=\"n\">freek</span>     <span class=\"mi\">4096</span> <span class=\"n\">Apr</span> <span class=\"mi\">25</span> <span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">44</span> <span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.7.0</span>\n<span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 freek freek       67 Apr 25 13:44 update-hashes/leanprover--lean4---v4.7.0</span>\n</code></pre></div>\n<p>I hope I didn't delete too much <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 435399530,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714054372
    },
    {
        "content": "<p>What happens if you run <code>lake --help</code> outside a lean project?</p>",
        "id": 435399699,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054421
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Lake</span> <span class=\"n\">version</span> <span class=\"mi\">5</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">-</span><span class=\"mi\">6</span><span class=\"n\">fce8f7</span> <span class=\"o\">(</span><span class=\"n\">Lean</span> <span class=\"n\">version</span> <span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">7</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n\n<span class=\"n\">USAGE</span><span class=\"o\">:</span>\n  <span class=\"n\">lake</span> <span class=\"o\">[</span><span class=\"n\">OPTIONS</span><span class=\"o\">]</span> <span class=\"bp\">&lt;</span><span class=\"n\">COMMAND</span><span class=\"bp\">&gt;</span>\n\n<span class=\"n\">COMMANDS</span><span class=\"o\">:</span>\n  <span class=\"n\">new</span> <span class=\"bp\">&lt;</span><span class=\"n\">name</span><span class=\"bp\">&gt;</span> <span class=\"bp\">&lt;</span><span class=\"n\">temp</span><span class=\"bp\">&gt;</span>     <span class=\"n\">create</span> <span class=\"n\">a</span> <span class=\"n\">Lean</span> <span class=\"n\">package</span> <span class=\"k\">in</span> <span class=\"n\">a</span> <span class=\"n\">new</span> <span class=\"n\">directory</span>\n  <span class=\"n\">init</span> <span class=\"bp\">&lt;</span><span class=\"n\">name</span><span class=\"bp\">&gt;</span> <span class=\"bp\">&lt;</span><span class=\"n\">temp</span><span class=\"bp\">&gt;</span>    <span class=\"n\">create</span> <span class=\"n\">a</span> <span class=\"n\">Lean</span> <span class=\"n\">package</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">current</span> <span class=\"n\">directory</span>\n  <span class=\"n\">build</span> <span class=\"bp\">&lt;</span><span class=\"n\">targets</span><span class=\"bp\">&gt;...</span>    <span class=\"n\">build</span> <span class=\"n\">targets</span>\n  <span class=\"n\">exe</span> <span class=\"bp\">&lt;</span><span class=\"n\">exe</span><span class=\"bp\">&gt;</span> <span class=\"bp\">&lt;</span><span class=\"n\">args</span><span class=\"bp\">&gt;...</span>   <span class=\"n\">build</span> <span class=\"n\">an</span> <span class=\"n\">exe</span> <span class=\"n\">and</span> <span class=\"n\">run</span> <span class=\"n\">it</span> <span class=\"k\">in</span> <span class=\"n\">Lake's</span> <span class=\"n\">environment</span>\n  <span class=\"n\">clean</span>                 <span class=\"n\">remove</span> <span class=\"n\">build</span> <span class=\"n\">outputs</span>\n  <span class=\"n\">env</span> <span class=\"bp\">&lt;</span><span class=\"n\">cmd</span><span class=\"bp\">&gt;</span> <span class=\"bp\">&lt;</span><span class=\"n\">args</span><span class=\"bp\">&gt;...</span>   <span class=\"n\">execute</span> <span class=\"n\">a</span> <span class=\"n\">command</span> <span class=\"k\">in</span> <span class=\"n\">Lake's</span> <span class=\"n\">environment</span>\n  <span class=\"n\">update</span>                <span class=\"n\">update</span> <span class=\"n\">dependencies</span> <span class=\"n\">and</span> <span class=\"n\">save</span> <span class=\"n\">them</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">manifest</span>\n  <span class=\"n\">upload</span> <span class=\"bp\">&lt;</span><span class=\"n\">tag</span><span class=\"bp\">&gt;</span>          <span class=\"n\">upload</span> <span class=\"n\">build</span> <span class=\"n\">artifacts</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">GitHub</span> <span class=\"n\">release</span>\n  <span class=\"n\">script</span>                <span class=\"n\">manage</span> <span class=\"n\">and</span> <span class=\"n\">run</span> <span class=\"n\">workspace</span> <span class=\"n\">scripts</span>\n  <span class=\"n\">scripts</span>               <span class=\"n\">shorthand</span> <span class=\"n\">for</span> <span class=\"bp\">`</span><span class=\"n\">lake</span> <span class=\"n\">script</span> <span class=\"n\">list</span><span class=\"bp\">`</span>\n  <span class=\"n\">run</span> <span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>          <span class=\"n\">shorthand</span> <span class=\"n\">for</span> <span class=\"bp\">`</span><span class=\"n\">lake</span> <span class=\"n\">script</span> <span class=\"n\">run</span><span class=\"bp\">`</span>\n  <span class=\"n\">serve</span>                 <span class=\"n\">start</span> <span class=\"n\">the</span> <span class=\"n\">Lean</span> <span class=\"n\">language</span> <span class=\"n\">server</span>\n\n<span class=\"n\">OPTIONS</span><span class=\"o\">:</span>\n  <span class=\"c1\">--version             print version and exit</span>\n  <span class=\"c1\">--help, -h            print help of the program or a command and exit</span>\n  <span class=\"c1\">--dir, -d=file        use the package configuration in a specific directory</span>\n  <span class=\"c1\">--file, -f=file       use a specific file for the package configuration</span>\n  <span class=\"c1\">--quiet, -q           hide progress messages</span>\n  <span class=\"c1\">--verbose, -v         show verbose information (command invocations)</span>\n  <span class=\"c1\">--lean=cmd            specify the `lean` command used by Lake</span>\n  <span class=\"bp\">-</span><span class=\"n\">K</span> <span class=\"n\">key</span><span class=\"o\">[</span><span class=\"bp\">=</span><span class=\"n\">value</span><span class=\"o\">]</span>        <span class=\"n\">set</span> <span class=\"n\">the</span> <span class=\"n\">configuration</span> <span class=\"n\">file</span> <span class=\"n\">option</span> <span class=\"n\">named</span> <span class=\"n\">key</span>\n  <span class=\"c1\">--old                 only rebuild modified modules (ignore transitive deps)</span>\n  <span class=\"c1\">--rehash, -H          hash all files for traces (do not trust `.hash` files)</span>\n  <span class=\"c1\">--update, -U          update manifest before building</span>\n  <span class=\"c1\">--reconfigure, -R     elaborate configuration files instead of using OLeans</span>\n\n<span class=\"n\">See</span> <span class=\"bp\">`</span><span class=\"n\">lake</span> <span class=\"n\">help</span> <span class=\"bp\">&lt;</span><span class=\"n\">command</span><span class=\"bp\">&gt;`</span> <span class=\"n\">for</span> <span class=\"n\">more</span> <span class=\"n\">information</span> <span class=\"n\">on</span> <span class=\"n\">a</span> <span class=\"n\">specific</span> <span class=\"n\">command.</span>\n</code></pre></div>",
        "id": 435400291,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714054589
    },
    {
        "content": "<p>in that case I think you're good</p>",
        "id": 435401101,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054830
    },
    {
        "content": "<p>elan will automatically install new toolchains as needed if you try to compile a project on a different version</p>",
        "id": 435401238,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054870
    },
    {
        "content": "<p>it's rare to need to do <code>elan toolchain install</code> directly</p>",
        "id": 435401331,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714054897
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435397118\">said</a>:</p>\n<blockquote>\n<p>And, as Kevin pointed out: can I just clean out the <code>.tar.gz</code>s in <code>~/.mathlib</code>? Is that Lean3 or Lean4 stuff?</p>\n</blockquote>\n<p>So can I remove those files, that look like they're intermediate files for installing something?</p>",
        "id": 435403214,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714055444
    },
    {
        "content": "<p>I don't think anything in lean 4 uses <code>.mathlib</code>. IIRC that's the path used for <code>leanproject get-cache</code> which is lean 3</p>",
        "id": 435403739,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055574
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113489-new-members/topic/Git.20question/near/435403739\">said</a>:</p>\n<blockquote>\n<p>I don't think anything in lean 4 uses <code>.mathlib</code>. IIRC that's the path used for <code>leanproject get-cache</code> which is lean 3</p>\n</blockquote>\n<p>I'm not interested in Lean 3. So I'll remove that directory then.</p>",
        "id": 435403796,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714055594
    },
    {
        "content": "<p>However you should watch <code>.cache/mathlib</code>, which contains mathlib4 cache files</p>",
        "id": 435403844,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055609
    },
    {
        "content": "<p>in both cases it's just a cache, you can freely delete things and they will just be re-downloaded if needed</p>",
        "id": 435404022,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055650
    },
    {
        "content": "<p>One gigabyte! Okay, so I'll remove those files also then.</p>",
        "id": 435404089,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1714055669
    },
    {
        "content": "<p>IIRC there are about 400 MB of cache files downloaded for one mathlib</p>",
        "id": 435404233,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055707
    },
    {
        "content": "<p>and these unpack to about 4 GB inside each mathlib-depending project</p>",
        "id": 435404330,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055730
    },
    {
        "content": "<p>(yes, lean4+mathlib is chunky)</p>",
        "id": 435404396,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1714055750
    }
]