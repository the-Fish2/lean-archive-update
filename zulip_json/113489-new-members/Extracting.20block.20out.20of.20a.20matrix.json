[
    {
        "content": "<p>If I have a Fin-indexed mxn matrix, given some indices i and j, how do I extract the block matrix starting from (i,j) upto (m,n) from the original matrix? I tried using <code>Matrix.toBlock</code> but it isn't giving me Fin-indexed matrix, and I can't figure out how to construct a submatrix from the way it has been defined.</p>",
        "id": 439522918,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1716192458
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"627751\">Vivek Rajesh Joshi</span> <a href=\"#narrow/stream/113489-new-members/topic/Extracting.20block.20out.20of.20a.20matrix/near/439522918\">said</a>:</p>\n<blockquote>\n<p>I tried using <code>Matrix.toBlock</code> but it isn't giving me Fin-indexed matrix</p>\n</blockquote>\n<p>Why is that a problem?</p>",
        "id": 439523230,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1716192584
    },
    {
        "content": "<p>It isn't exactly a problem, just a matter of convenience. In my code so far I've been working with Fin-indexed matrices, so if I can continue that it would be nice. If that isn't possible, I'll try to work with these matrices going forward.</p>",
        "id": 439529160,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1716195040
    },
    {
        "content": "<p>The general answer is \"use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.submatrix#doc\">docs#Matrix.submatrix</a>\", which leaves you the job of constructing the maps you want between the index types</p>",
        "id": 439531344,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1716195775
    },
    {
        "content": "<p>This should hopefully make it obvious why using <code>Fin</code> here can be annoying, as the map from <code>Fin j</code> to <code>Fin (i + j + k)</code> is a bit fiddly to write down</p>",
        "id": 439531427,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1716195805
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 439532385,
        "sender_full_name": "Iris Rotarescu",
        "timestamp": 1716196148
    },
    {
        "content": "<p>So if I want to take the bottom right 2x2 block out of a 3x3 matrix, should I give both the reindex maps as 0 -&gt; 1, 1 -&gt; 1, 2 -&gt; 2?</p>",
        "id": 439546915,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1716201666
    },
    {
        "content": "<p>Going from a big matrix to a small matrix means your indexing map goes from the small index to the big index; so that map is backwards</p>",
        "id": 439549369,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1716202659
    },
    {
        "content": "<p>Wouldn't I then have to map 1 to both 0 and 1?</p>",
        "id": 439549806,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1716202814
    },
    {
        "content": "<p>Never mind, I figured it out. Thanks for the help!</p>",
        "id": 439550772,
        "sender_full_name": "Vivek Rajesh Joshi",
        "timestamp": 1716203165
    },
    {
        "content": "<p>The reindexing map is called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.orderEmbOfFin#doc\">docs#Finset.orderEmbOfFin</a></p>",
        "id": 439607766,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1716222272
    },
    {
        "content": "<p>I think that it would usually be better not to use Fin-indexed matrices, however.</p>",
        "id": 439607941,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1716222333
    }
]