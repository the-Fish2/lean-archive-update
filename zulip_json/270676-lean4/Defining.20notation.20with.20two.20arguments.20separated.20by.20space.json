[
    {
        "content": "<p>I'm having some trouble defining a custom notation for <code>Finset.card (Rel.interedges (SimpleGraph.Adj G) s sᶜ)</code>, where <code>G</code> is a simple graph and <code>s</code> is a finset. I'd like to denote this by <code>|∂ G s| </code>.<br>\nHere is my attempt:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Combinatorics</span><span class=\"bp\">.</span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Density</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableRel</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span>\n\n<span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"s2\">\"|∂\"</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"s2\">\"  \"</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">:</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"s2\">\"|\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Rel</span><span class=\"bp\">.</span><span class=\"n\">interedges</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- error here</span>\n\n<span class=\"c1\">-- error message: invalid parser '«term|∂__|»', invalid empty symbol</span>\n</code></pre></div>\n<p>What does work is the notation <code>`notation:max \"|∂\" G:100 \"×\" s:100 \"|\" =&gt; Finset.card (Rel.interedges (SimpleGraph.Adj G) s sᶜ)</code>. This also works for symbols other than <code>×</code>, but I'd prefer having a blank space.</p>",
        "id": 447551055,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1719512951
    },
    {
        "content": "<p>Can you just drop the <code>\"  \"</code> bit entirely?</p>",
        "id": 447553146,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1719513528
    },
    {
        "content": "<p>then the definition of the notation works but when i try <code>#check |∂ G s|</code>, the <code>s</code> is underlined and I get the message \"expected no space before\".</p>",
        "id": 447553680,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1719513657
    },
    {
        "content": "<p>This works for me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"s2\">\"|∂\"</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"s2\">\"|\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Rel</span><span class=\"bp\">.</span><span class=\"n\">interedges</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">ᶜ</span>\n</code></pre></div>",
        "id": 447580654,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1719521242
    },
    {
        "content": "<p>Thank you so much! I did not know about the precedence <code>arg</code> and was trying to get some random numbers to work.</p>",
        "id": 447610681,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1719530509
    }
]