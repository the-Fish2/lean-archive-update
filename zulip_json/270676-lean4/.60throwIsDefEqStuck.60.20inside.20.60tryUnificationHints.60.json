[
    {
        "content": "<p>The function <code>DiscrTree.getMatch</code> is run inside <code>tryUnificationHints</code>, and it is able to return <code>throwIsDefEqStuck</code>. This came up in <a href=\"#narrow/stream/287929-mathlib4/topic/erw.20and.20IsDedekindDomain.2EHeightOneSpectrum.2EadicCompletion/near/439390088\">this</a> conversation in a type class search (example copied below). In this case the <code>isDefEqStuck</code> error from <code>tryUnificationHints</code> propagates to the <code>isDefEq</code> call inside type class search, and this error propagates all the way to <code>synthInstance</code>, so the type class search returns no result. However there is some other instance that does work. I think this can be solved by running <code>DiscrTree.getMatch</code> inside of <code>withConfig (fun cfg =&gt; { cfg with isDefEqStuckEx := false }</code>.  to avoid <code>throwIsDefEqStuck</code>.</p>\n<p>However, in the below example, if we turn off <code>Config.unificationHints</code>, the type class search fails with a deterministic time-out, so fixing this bug wouldn't actually help unfortunately.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.RingTheory.DedekindDomain.Ideal</span>\n<span class=\"kn\">import</span> <span class=\"n\">Mathlib.RingTheory.Valuation.ExtendToLocalization</span>\n<span class=\"kn\">import</span> <span class=\"n\">Mathlib.Topology.Algebra.ValuedField</span>\n<span class=\"kn\">import</span> <span class=\"n\">Mathlib.Algebra.Order.Group.TypeTags</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">scoped</span> <span class=\"n\">Classical</span> <span class=\"n\">DiscreteValuation</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">IsDedekindDomain</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">CommRing</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsDedekindDomain</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">K</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">Field</span> <span class=\"n\">K</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">Algebra</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsFractionRing</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">HeightOneSpectrum</span> <span class=\"n\">R</span><span class=\"o\">)</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">IsDedekindDomain.HeightOneSpectrum</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">intValuation</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">CommRing</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsDedekindDomain</span> <span class=\"n\">R</span><span class=\"o\">]</span>\n  <span class=\"o\">(</span><span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">HeightOneSpectrum</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Valuation</span> <span class=\"n\">R</span> <span class=\"n\">ℤₘ₀</span> <span class=\"n\">where</span>\n  <span class=\"n\">toFun</span> <span class=\"n\">r</span> <span class=\"o\">:=</span> <span class=\"k\">if</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">0</span> <span class=\"k\">then</span> <span class=\"mi\">0</span> <span class=\"k\">else</span> <span class=\"mi\">0</span> <span class=\"c1\">-- just 0 doesn't work</span>\n  <span class=\"n\">map_zero'</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n  <span class=\"n\">map_one'</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n  <span class=\"n\">map_mul'</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n  <span class=\"n\">map_add_le_max'</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n\n<span class=\"c1\">-- this uses loads of algebra</span>\n<span class=\"kd\">noncomputable</span> <span class=\"kd\">def</span> <span class=\"n\">valuation</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">CommRing</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsDedekindDomain</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">K</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n    <span class=\"o\">[</span><span class=\"n\">Field</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Algebra</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsFractionRing</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">HeightOneSpectrum</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Valuation</span> <span class=\"n\">K</span> <span class=\"n\">ℤₘ₀</span> <span class=\"o\">:=</span>\n  <span class=\"n\">v.intValuation.extendToLocalization</span>\n    <span class=\"o\">(</span><span class=\"gr\">sorry</span> <span class=\"o\">:</span> <span class=\"n\">nonZeroDivisors</span> <span class=\"n\">R</span> <span class=\"bp\">≤</span> <span class=\"n\">v.intValuation.supp.primeCompl</span><span class=\"o\">)</span> <span class=\"n\">K</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- this uses loads of topology</span>\n<span class=\"n\">abbrev</span> <span class=\"n\">adicCompletion</span> <span class=\"o\">:=</span>\n  <span class=\"bp\">@</span><span class=\"n\">UniformSpace.Completion</span> <span class=\"n\">K</span> <span class=\"o\">(</span><span class=\"n\">Valued.mk'</span> <span class=\"n\">v.valuation</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"c1\">-- works</span>\n\n<span class=\"kd\">instance</span> <span class=\"n\">AdicCompletion.algebra'</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_1</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">CommRing</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsDedekindDomain</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">DecidableEq</span> <span class=\"n\">R</span><span class=\"o\">]</span>\n    <span class=\"o\">(</span><span class=\"n\">K</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_2</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">Field</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Algebra</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsFractionRing</span> <span class=\"n\">R</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">HeightOneSpectrum</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"n\">Algebra</span> <span class=\"n\">R</span> <span class=\"o\">(</span><span class=\"n\">v.adicCompletion</span> <span class=\"n\">K</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">set_option</span> <span class=\"n\">trace.Meta.synthInstance</span> <span class=\"n\">true</span>\n<span class=\"kd\">set_option</span> <span class=\"n\">trace.Meta.isDefEq</span> <span class=\"n\">true</span>\n<span class=\"kd\">set_option</span> <span class=\"n\">trace.Meta.isDefEq.hint</span> <span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 439395063,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1716080410
    },
    {
        "content": "<p>To turn off unification hints, replace #synth with</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">open</span> <span class=\"n\">Lean</span> <span class=\"n\">Meta</span> <span class=\"n\">Elab</span> <span class=\"n\">Command</span>\n\n<span class=\"n\">syntax</span> <span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">:=</span> <span class=\"n\">ha</span><span class=\"o\">)</span> <span class=\"s2\">\"#mysynth\"</span> <span class=\"n\">term</span> <span class=\"o\">:</span> <span class=\"n\">command</span>\n<span class=\"kd\">@[</span><span class=\"n\">command_elab</span> <span class=\"n\">ha</span><span class=\"kd\">]</span> <span class=\"kd\">def</span> <span class=\"n\">elabSynth</span> <span class=\"o\">:</span> <span class=\"n\">CommandElab</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">stx</span> <span class=\"bp\">=&gt;</span> <span class=\"k\">do</span>\n  <span class=\"k\">let</span> <span class=\"n\">term</span> <span class=\"o\">:=</span> <span class=\"n\">stx</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">]</span>\n  <span class=\"n\">withoutModifyingEnv</span> <span class=\"bp\">&lt;|</span> <span class=\"n\">runTermElabM</span> <span class=\"k\">fun</span> <span class=\"n\">_</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Term.withDeclName</span> <span class=\"bp\">`</span><span class=\"n\">_synth_cmd</span> <span class=\"k\">do</span>\n    <span class=\"n\">withConfig</span> <span class=\"o\">({</span><span class=\"bp\">·</span> <span class=\"k\">with</span> <span class=\"n\">unificationHints</span> <span class=\"o\">:=</span> <span class=\"n\">false</span><span class=\"o\">})</span> <span class=\"k\">do</span>\n    <span class=\"k\">let</span> <span class=\"n\">inst</span> <span class=\"bp\">←</span> <span class=\"n\">Term.elabTerm</span> <span class=\"n\">term</span> <span class=\"n\">none</span>\n    <span class=\"n\">Term.synthesizeSyntheticMVarsNoPostponing</span>\n    <span class=\"k\">let</span> <span class=\"n\">inst</span> <span class=\"bp\">←</span> <span class=\"n\">instantiateMVars</span> <span class=\"n\">inst</span>\n    <span class=\"k\">let</span> <span class=\"n\">val</span>  <span class=\"bp\">←</span> <span class=\"n\">synthInstance</span> <span class=\"n\">inst</span>\n    <span class=\"n\">logInfo</span> <span class=\"n\">val</span>\n    <span class=\"n\">pure</span> <span class=\"o\">()</span>\n\n<span class=\"bp\">#</span><span class=\"n\">mysynth</span>\n</code></pre></div>\n<p>In this case the trace is quite interesting:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Meta.synthInstance</span><span class=\"o\">]</span> <span class=\"bp\">💥</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n      <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"bp\">▼</span>\n  <span class=\"o\">[]</span> <span class=\"n\">new</span> <span class=\"n\">goal</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"bp\">▶</span>\n  <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">apply</span> <span class=\"n\">inst</span><span class=\"bp\">✝¹</span> <span class=\"n\">to</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"bp\">▶</span>\n  <span class=\"o\">[]</span> <span class=\"bp\">💥</span> <span class=\"n\">apply</span> <span class=\"bp\">@</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.AdicCompletion.algebra'</span> <span class=\"n\">to</span> <span class=\"n\">Algebra</span>\n        <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"bp\">▼</span>\n    <span class=\"o\">[</span><span class=\"n\">tryResolve</span><span class=\"o\">]</span> <span class=\"bp\">💥</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span>\n            <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"bp\">≟</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"bp\">?</span><span class=\"n\">m.9326</span><span class=\"o\">)</span> <span class=\"bp\">▼</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"bp\">❌</span> <span class=\"n\">Algebra</span> <span class=\"o\">(</span><span class=\"n\">IsDedekindDomain.HeightOneSpectrum.adicCompletion</span> <span class=\"n\">K</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"bp\">▶</span>\n      <span class=\"o\">[]</span> <span class=\"mi\">8225</span> <span class=\"n\">more</span> <span class=\"n\">entries...</span> <span class=\"bp\">▼</span>\n</code></pre></div>",
        "id": 439395240,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1716080602
    }
]