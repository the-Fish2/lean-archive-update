[
    {
        "content": "<p>How to revise:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vec</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">â‰ </span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span>\n</code></pre></div>\n<p>to fix:</p>\n<p>\"compiler IR check failed at 'List.filterTR.loop._at.support._spec_3', error: unknown declaration 'Real.decidableEq'\"</p>\n<p>?</p>\n<p>Thanks a lot.</p>",
        "id": 446419612,
        "sender_full_name": "Lewis",
        "timestamp": 1719149774
    },
    {
        "content": "<p>Can you make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> including any imports/opens? The fix for this should be to change <code>def</code> into <del><code>irreducible def</code></del> (edit: apologies, it's <code>noncomputable def</code>).</p>",
        "id": 446442082,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719160830
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/270676-lean4/topic/compiler.20IR.20check.20failed.20at.20'List.2EfilterTR.2Eloop.2E_at.2Esupport.2E/near/446442082\">said</a>:</p>\n<blockquote>\n<p>Can you make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> including any imports/opens? The fix for this should be to change <code>def</code> into <code>irreducible def</code></p>\n</blockquote>\n<p>Here are the inports:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Sqrt</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">NormNum</span>\n<span class=\"c1\">--import Mathlib.Algebra.BigOperators.Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Card</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">NNReal</span>\n</code></pre></div>\n<p>Why does adding irreducible not fix th error? Thanks.</p>",
        "id": 446484974,
        "sender_full_name": "Lewis",
        "timestamp": 1719183638
    },
    {
        "content": "<p>Mark  the definition <code>noncomputable def ...</code> and see if that works. Usually noncomputable defs and defs using noncomputable defs are not compiled down and this seems to be a leaky error message. Also an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> is not merely a listing of imports. It includes that and the code you want . I should be able to open in the playground and just fix the issue you have instead of rewriting large parts of the code. Further the example should be minimised to isolate the issue you have.</p>",
        "id": 446488052,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719186158
    },
    {
        "content": "<p>Where is the <code>Vec</code> type coming from?</p>",
        "id": 446488182,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719186291
    },
    {
        "content": "<p>Sorry, I mistyped. As Shreyas said I meant noncomputable. The error is terrible and the problem was reported years ago.</p>",
        "id": 446526500,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719209735
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/1785\">lean#1785</a></p>",
        "id": 446530765,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719211585
    },
    {
        "content": "<p>Note also that you have still failed to provide a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> . Please read that link and if you still need help then please post one code block which I can run at my end to see the problem.</p>",
        "id": 446542125,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719215282
    }
]