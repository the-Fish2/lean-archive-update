[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"sd\">/-- error: omega could not prove the goal:</span>\n<span class=\"sd\">it is false -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">omega</span>\n</code></pre></div>\n<p>I guess it is OK that <code>omega</code> claims that it cannot prove that 3 is odd, but claiming in addition that 3 is in fact not odd goes a bit far...</p>",
        "id": 440182082,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1716411456
    },
    {
        "content": "<p>On <a href=\"http://live.lean-lang.org\">live.lean-lang.org</a> , with the button in your code snippet, it does work</p>",
        "id": 440183317,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1716411873
    },
    {
        "content": "<p>I'm seeing the error on the most recent master branch of mathlib.</p>",
        "id": 440185939,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1716412876
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> When you say \"it does work\" do you mean that <code>omega</code> works, or that Michael's example really does show the error? I'm seeing the latter on <a href=\"http://live.lean-lang.org\">live.lean-lang.org</a>, but I interpreted you as saying the former.</p>",
        "id": 440186723,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1716413190
    },
    {
        "content": "<p>Oh no, I missed the guard messages and misinterpreted the output. Never mind me</p>",
        "id": 440187574,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1716413542
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> The error message in Lean.Elab.Tactic.Omega.formatErrorMessage is a bit strong. It seems like \"it is false\" is correct for the problem that omega created from the local context, but it discarded <code>not (Odd 3)</code> itself, so it's presumptuous of it to say it's not possible at all. Maybe it could report what facts it ended up being able to use, and that with these facts the problem is impossible?</p>",
        "id": 440187622,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1716413564
    },
    {
        "content": "<p>Yes, I think we could just remove <code>it is false</code>.</p>\n<p>Better would be to say \"could not prove the goal from the relevant hypotheses:\" and then list the facts it pulled from the context. Then the user could see that it ignored <code>Odd 3</code>.</p>",
        "id": 440202930,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1716420048
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/4264\">lean#4264</a></p>",
        "id": 440438970,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1716526756
    },
    {
        "content": "<p>My bad, when I changed the error message it seems I didn't think this through as much as I thought I did.</p>",
        "id": 440440068,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1716527527
    },
    {
        "content": "<p>All good. This was just a corner case of a massive improvement over my original messages. :-)</p>",
        "id": 440440207,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1716527688
    }
]