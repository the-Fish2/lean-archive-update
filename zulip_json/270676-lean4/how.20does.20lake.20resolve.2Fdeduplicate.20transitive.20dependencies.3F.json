[
    {
        "content": "<p>Imagine three projects, named A, B, and C.</p>\n<ul>\n<li>Project A requires <code>std</code> at revision <code>abcd1234</code>.</li>\n<li>Project B requires <code>std</code> at revision <code>efef5656</code>.</li>\n<li>Project C requires both project A and project B.</li>\n</ul>\n<p>How does <code>lake</code> decide which version of <code>std</code> to use for project C? Does it change anything if project A requires std at a tag named something like <code>v4.6.0</code>, rather than a commit ID?</p>",
        "id": 424425904,
        "sender_full_name": "David Renshaw",
        "timestamp": 1709397650
    },
    {
        "content": "<p>I did some experimentation, and it looks like the answer is: it depends on which order the <code>require</code> statements appear in projects C's lakefile.</p>",
        "id": 424426633,
        "sender_full_name": "David Renshaw",
        "timestamp": 1709398351
    },
    {
        "content": "<p>It seems that earlier requirements win. (And that maybe <code>git</code> requires are prioritized over local path requires?)</p>",
        "id": 424427008,
        "sender_full_name": "David Renshaw",
        "timestamp": 1709398637
    },
    {
        "content": "<p>I think the current suggestion is \"try not to get yourself in that situation\", which isn't great but might well improve as the ecosystem matures</p>",
        "id": 424429327,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1709400342
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span> <a href=\"#narrow/stream/270676-lean4/topic/how.20does.20lake.20resolve.2Fdeduplicate.20transitive.20dependencies.3F/near/424426633\">said</a>:</p>\n<blockquote>\n<p>I did some experimentation, and it looks like the answer is: it depends on which order the <code>require</code> statements appear in projects C's lakefile.</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span> <a href=\"#narrow/stream/270676-lean4/topic/how.20does.20lake.20resolve.2Fdeduplicate.20transitive.20dependencies.3F/near/424427008\">said</a>:</p>\n<blockquote>\n<p>It seems that earlier requirements win.</p>\n</blockquote>\n<p>This is correct assessment of how Lake works (except for the <code>git</code> &gt; <code>path</code> --  they should both be treated the same). As Lake has no semantic version information at present, it cannot do more intelligent resolving at this time.</p>",
        "id": 424436472,
        "sender_full_name": "Mac Malone",
        "timestamp": 1709405916
    },
    {
        "content": "<p>Can running <code>lake update a</code> or <code>b</code> change the version resolved?</p>",
        "id": 424445777,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709413508
    }
]