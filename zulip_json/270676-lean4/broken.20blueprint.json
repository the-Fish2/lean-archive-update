[
    {
        "content": "<p>My blueprint is broken on the FLT repo. I've just bumped mathlib so I'm on <code>leanprover/lean4:v4.6.0-rc1</code> and every time I push to master I get a build error in CI:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Run</span> <span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"bp\">-</span><span class=\"n\">Kenv</span><span class=\"bp\">=</span><span class=\"n\">dev</span> <span class=\"n\">build</span> <span class=\"n\">FLT</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">dependency</span> <span class=\"bp\">'«</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">»'</span> <span class=\"n\">not</span> <span class=\"k\">in</span> <span class=\"n\">manifest</span><span class=\"bp\">;</span> <span class=\"n\">use</span> <span class=\"bp\">`</span><span class=\"n\">lake</span> <span class=\"n\">update</span> <span class=\"bp\">«</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">»`</span> <span class=\"n\">to</span> <span class=\"n\">add</span> <span class=\"n\">it</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Process</span> <span class=\"n\">completed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>I've typed those commands locally and they have no effect: stuff gets downloaded but no changes are made to any file according to git. Is this a Lean problem or a blueprint problem?</p>",
        "id": 420152767,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1707261693
    },
    {
        "content": "<p>You should bump mathlib by running <code>lake -R -Kenv=dev update</code>. If you run a bare <code>lake update</code>, the doc-gen dependencies get deleted from <code>lake-manifest.json</code>.</p>",
        "id": 420161643,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1707267005
    },
    {
        "content": "<p>This UX is being improved in <a href=\"https://github.com/leanprover/lean4/pull/3174\">lean4#3174</a>.</p>",
        "id": 420162035,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1707267318
    },
    {
        "content": "<p>I now have this:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>...\n[2264/4031] Documenting module: Std.Lean.Meta.InstantiateMVars\nstdout:\nWARNING: Failed to calculate equational lemmata for Lean.Level.substParams.go: (deterministic) timeout at 'whnf', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.Expr.data: (deterministic) timeout at 'whnf', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.ForEachExpr.visit: (deterministic) timeout at 'whnf', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.Elab.Eqns.removeUnusedEqnHypotheses.go: tactic 'simp' failed, nested error:\n(deterministic) timeout at 'simp', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.Meta.caseValues.loop: (deterministic) timeout at 'whnf', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.Expr.stripArgsN: tactic 'simp' failed, nested error:\n(deterministic) timeout at 'simp', maximum number of heartbeats (5000) has been reached (use 'set_option maxHeartbeats &lt;num&gt;' to set the limit)\nWARNING: Failed to calculate equational lemmata for Lean.PrettyPrinter.Delaborator.SubExpr.withBoundedAppFnArgs: failed to generate equational theorem for 'Lean.PrettyPrinter.Delaborator.SubExpr.withBoundedAppFnArgs'\n...\n</code></pre></div>",
        "id": 420163145,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1707268091
    },
    {
        "content": "<p>That's perfectly normal, there are many equational lemma that are too large to compute in reasonable time so it will just not do it, it's just a warning for that reason <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span></p>",
        "id": 420192293,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1707289830
    },
    {
        "content": "<p>Oh yes I see! In fact they did not cause an error in CI! Thanks!</p>",
        "id": 420205204,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1707296347
    }
]