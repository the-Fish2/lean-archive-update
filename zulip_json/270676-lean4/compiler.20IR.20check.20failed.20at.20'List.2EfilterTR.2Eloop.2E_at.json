[
    {
        "content": "<p>How to fix the error:</p>\n<p>compiler IR check failed at 'List.filterTR.loop._at.l0_norm._spec_3', error: unknown declaration 'Real.decidableEq'</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Define the ℓ₀-norm (number of non-zero entries) of a vector</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">l0_norm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vec</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">card</span>\n</code></pre></div>\n<p>Thanks.</p>",
        "id": 446200949,
        "sender_full_name": "Lewis",
        "timestamp": 1719017135
    },
    {
        "content": "<p>Put <code>noncomputable</code> before <code>def</code> and then if there's an open GitHub issue about this annoying thing then give it an upvote</p>",
        "id": 446201090,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719017261
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/issues/1785\">https://github.com/leanprover/lean4/issues/1785</a></p>",
        "id": 446201938,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1719017967
    },
    {
        "content": "<p>How to fix the Lean code? Thanks a lot.</p>",
        "id": 446215660,
        "sender_full_name": "Lewis",
        "timestamp": 1719028149
    },
    {
        "content": "<p>Kevin has answered above.</p>",
        "id": 446217040,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719029290
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 446218218,
        "sender_full_name": "Oliver",
        "timestamp": 1719029998
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/270676-lean4/topic/compiler.20IR.20check.20failed.20at.20'List.2EfilterTR.2Eloop.2E_at/near/446217040\">said</a>:</p>\n<blockquote>\n<p>Kevin has answered above.</p>\n</blockquote>\n<p>Why does it stll say \"compiler IR check failed at 'List.filterTR.loop._at.l0_norm._spec_3', error: unknown declaration 'Real.decidableEq'\" after putting <code>noncomputable</code> before <code>def</code>? Thanks</p>",
        "id": 446218708,
        "sender_full_name": "Lewis",
        "timestamp": 1719030469
    },
    {
        "content": "<p>For me, it says</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"k\">at</span>\n<span class=\"w\">  </span><span class=\"n\">Vec</span>\n<span class=\"n\">term</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">9</span>\n</code></pre></div>\n<p>at <code>Vec n</code>.</p>",
        "id": 446233495,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719039630
    },
    {
        "content": "<p>Lewis if you're still having the problem then can you post a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>",
        "id": 446247011,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719046035
    }
]