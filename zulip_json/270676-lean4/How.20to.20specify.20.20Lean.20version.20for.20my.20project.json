[
    {
        "content": "<p>Dear all,</p>\n<p>I am a new user of Lean, and I have encountered an issue. When I create a project with mathlib, the VSCode extension automatically creates the project with the latest Lean version and updates all dependencies. However, I would like to create a project with an older Lean version and its corresponding dependencies.</p>\n<p>Could you please advise me on how to manage the Lean version of a Lean project? Additionally, I would greatly appreciate it if you could provide guidance on how to use Lean effectively.</p>",
        "id": 424999778,
        "sender_full_name": "Shaonan Wu",
        "timestamp": 1709696224
    },
    {
        "content": "<p>I'm assuming you mean an older version of Lean 4, rather than Lean 3 (which is end-of-life).</p>\n<p>The lean version for a project is controlled by the <code>lean-toolchain</code> file. e.g. you can go back to v4.5.0 by replacing the contents of <code>lean-toolchain</code> with <code>leanprover/lean4:v4.5.0</code>.</p>\n<p>If your project has dependencies, in your <code>lakefile.lean</code> you will need to specify appropriate tags/branches/commits of the dependencies which are compatible with the Lean version you want to use.</p>",
        "id": 425003673,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709698796
    },
    {
        "content": "<p>If you tell us which Lean version you want (and why?) we can give more detailed help.</p>",
        "id": 425003737,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709698823
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Scott Morrison</span> <a href=\"#narrow/stream/270676-lean4/topic/How.20to.20specify.20.20Lean.20version.20for.20my.20project/near/425003737\">said</a>:</p>\n<blockquote>\n<p>If you tell us which Lean version you want (and why?) we can give more detailed help.</p>\n</blockquote>\n<p>Thank you.  I want to use lean4 : v4.3.0 rc 2 and mathlib4 to start a project.</p>",
        "id": 425004591,
        "sender_full_name": "Shaonan Wu",
        "timestamp": 1709699372
    },
    {
        "content": "<p>Okay, you're in luck: there is a <code>v4.3.0-rc2</code> tag for Mathlib. So just change <code>lean-toolchain</code> as above, and then in your lakefile you should have a line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">require</span> <span class=\"n\">mathlib</span> <span class=\"k\">from</span> <span class=\"n\">git</span> <span class=\"s2\">\"https://github.com/leanprover-community/mathlib4\"</span> <span class=\"bp\">@</span> <span class=\"s2\">\"v4.3.0-rc2\"</span>\n</code></pre></div>\n<p>May I ask why you want to use such an old version?</p>",
        "id": 425006724,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709700700
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Scott Morrison</span> <a href=\"#narrow/stream/270676-lean4/topic/How.20to.20specify.20.20Lean.20version.20for.20my.20project/near/425006724\">said</a>:</p>\n<blockquote>\n<p>Okay, you're in luck: there is a <code>v4.3.0-rc2</code> tag for Mathlib. So just change <code>lean-toolchain</code> as above, and then in your lakefile you should have a line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">require</span> <span class=\"n\">mathlib</span> <span class=\"k\">from</span> <span class=\"n\">git</span> <span class=\"s2\">\"https://github.com/leanprover-community/mathlib4\"</span> <span class=\"bp\">@</span> <span class=\"s2\">\"v4.3.0-rc2\"</span>\n</code></pre></div>\n<p>May I ask why you want to use such an old version?</p>\n</blockquote>\n<p>Thank you for your reply!<br>\nI am using Leandojo to trace my custom repository, but it is not working and returns the error message 'subprocess error.CalledProcessError: Command 'lake env lean --threads 24 --run ExtractData.lean' returned a non-zero exit status 1.' I have also tried an older version of Leandojo, but it did not resolve the issue. I suspect that the problem may be related to the Lean 4 version. I noticed that the official example for tracing Lean 4 using Leandojo is v4.3.0-rc2, so I would like to try that version.<br>\nThe repo is a simple custom repository with only one Lean file, which can be  built successfully on my local machine.</p>",
        "id": 425009209,
        "sender_full_name": "Shaonan Wu",
        "timestamp": 1709701916
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"693640\">@Shaonan Wu</span>, I'm not sure of the current maintenance state of LeanDojo. You might also try the <code>export_infotree</code> command in <a href=\"https://github.com/semorrison/lean-training-data\">https://github.com/semorrison/lean-training-data</a>. It hasn't been maintained recently, either, but at least you can complain to me if you find it is not working with the latest versions.</p>\n<p>It does not give output at all isomorphic to LeanDojo's but it is similar.</p>",
        "id": 425036386,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709716029
    },
    {
        "content": "<p>Thank  you.  I will try it later.  The Lean community is so nice for newcomers.  </p>\n<p>---- Replied Message ----<br>\n| From | Zulip notifications&lt;<a href=\"mailto:noreply@zulip.com\">noreply@zulip.com</a>&gt; |<br>\n| Date | 03/06/2024 17:09 |<br>\n| To | Shaonan Wu&lt;<a href=\"mailto:eureka_wu_123@163.com\">eureka_wu_123@163.com</a>&gt; |<br>\n| Cc | |<br>\n| Subject | #lean4 &gt; How to specify Lean version for my project |</p>\n<p>Scott Morrison: @Shaonan Wu, I'm not sure of the current maintenance state of LeanDojo. You might also try the export_infotree command in <a href=\"https://github.com/semorrison/lean-training-data\">https://github.com/semorrison/lean-training-data</a>. It hasn't been maintained recently, either, but at least you can complain to me if you find it is not working with the latest versions.</p>\n<p>It does not give output at all isomorphic to LeanDojo's but it is similar.</p>",
        "id": 425051566,
        "sender_full_name": "Shaonan Wu",
        "timestamp": 1709720501
    },
    {
        "content": "<p>Thank you again!  I have resolved this question by downgrading my Lean version, and now I am kind of curious about how to determine if there is a mathlib version compatible with my current Lean version.</p>",
        "id": 425231813,
        "sender_full_name": "Shaonan Wu",
        "timestamp": 1709790419
    },
    {
        "content": "<p>if you want to use v4.X.0, look for a <code>v4.X.0</code> tag on the mathlib4 repo</p>",
        "id": 425233541,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709791556
    }
]