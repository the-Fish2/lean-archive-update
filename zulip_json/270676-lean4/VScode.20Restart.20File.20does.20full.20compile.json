[
    {
        "content": "<p>After downloading new lean files via <code>lake exe cache get</code> VScode tells me to rebuild by pressing <code>Restart File</code>. Which I did. But now it does a full compile, is this intended? I thought what was downloaded is already compiled?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"mi\">12630</span> <span class=\"bp\">?</span>        <span class=\"n\">S</span>      <span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">00</span>  <span class=\"bp\">|</span>   <span class=\"bp\">|</span>   <span class=\"bp\">\\</span><span class=\"n\">_</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.7.0/bin/lake se</span>\n<span class=\"n\">rve</span> <span class=\"c1\">-- /home/ralf/Lean/formal_book</span>\n<span class=\"mi\">12677</span> <span class=\"bp\">?</span>        <span class=\"n\">Sl</span>     <span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"mi\">01</span>  <span class=\"bp\">|</span>   <span class=\"bp\">|</span>       <span class=\"bp\">\\</span><span class=\"n\">_</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.7.0/bin/lea</span>\n<span class=\"n\">n</span> <span class=\"c1\">--server /home/ralf/Lean/formal_book</span>\n<span class=\"mi\">12757</span> <span class=\"bp\">?</span>        <span class=\"n\">Ssl</span>    <span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">02</span>  <span class=\"bp\">|</span>   <span class=\"bp\">|</span>           <span class=\"bp\">\\</span><span class=\"n\">_</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.7.0/bin</span>\n<span class=\"bp\">/</span><span class=\"n\">lean</span> <span class=\"c1\">--worker file:///home/ralf/Lean/formal_book/Nat_sandbox.lean</span>\n<span class=\"mi\">12760</span> <span class=\"bp\">?</span>        <span class=\"n\">Sl</span>     <span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">19</span>  <span class=\"bp\">|</span>   <span class=\"bp\">|</span>               <span class=\"bp\">\\</span><span class=\"n\">_</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.7.0</span>\n<span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"n\">setup</span><span class=\"bp\">-</span><span class=\"n\">file</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/</span><span class=\"n\">Lean</span><span class=\"bp\">/</span><span class=\"n\">formal_book</span><span class=\"bp\">/</span><span class=\"n\">Nat_sandbox.lean</span> <span class=\"n\">Init</span> <span class=\"n\">Mathlib</span> <span class=\"n\">Mathlib.NumberTheory.Prime</span>\n<span class=\"n\">Counting</span>\n<span class=\"mi\">16346</span> <span class=\"bp\">?</span>        <span class=\"n\">R</span>      <span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">18</span>  <span class=\"bp\">|</span>   <span class=\"bp\">|</span>                   <span class=\"bp\">\\</span><span class=\"n\">_</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">ralf</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4</span>\n<span class=\"bp\">.</span><span class=\"mi\">7</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span> <span class=\"bp\">-</span><span class=\"n\">Dpp.unicode.fun</span><span class=\"bp\">=</span><span class=\"n\">true</span> <span class=\"bp\">-</span><span class=\"n\">Dpp.proofs.withType</span><span class=\"bp\">=</span><span class=\"n\">false</span> <span class=\"bp\">-</span><span class=\"n\">DautoImplicit</span><span class=\"bp\">=</span><span class=\"n\">false</span> <span class=\"bp\">-</span><span class=\"n\">DrelaxedAutoImplicit</span>\n<span class=\"bp\">=</span><span class=\"n\">false</span> <span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">UniformGroup.lean</span> <span class=\"bp\">-</span><span class=\"n\">R</span> <span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathli</span>\n<span class=\"n\">b</span><span class=\"bp\">/./.</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">UniformGroup.olean</span> <span class=\"bp\">-</span><span class=\"n\">i</span> <span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span>\n<span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">UniformGroup.ilean</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span>\n<span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">ir</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">UniformGroup.c</span>\n</code></pre></div>",
        "id": 439795146,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716290819
    },
    {
        "content": "<p>Are you sure you restarted the Lean server since you last changed Lean version?</p>",
        "id": 439795600,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716290956
    },
    {
        "content": "<p>In VScode, yes.</p>",
        "id": 439795837,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291023
    },
    {
        "content": "<p>And was <code>lake exe cache get</code> done decompressing the files when you pressed <code>Restart File</code>?</p>",
        "id": 439796169,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291094
    },
    {
        "content": "<p>How would I know? If that's an issue why is it not checked by VScode?</p>",
        "id": 439796475,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291150
    },
    {
        "content": "<p>Well, how did you run <code>lake exe cache get</code>?</p>",
        "id": 439796667,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291187
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"707242\">Ralf Stephan</span> <a href=\"#narrow/stream/270676-lean4/topic/VScode.20Restart.20File.20does.20full.20compile/near/439796475\">said</a>:</p>\n<blockquote>\n<p>If that's an issue why is it not checked by VScode?</p>\n</blockquote>\n<p>As I said previously, the <code>Restart File</code> button really should tell us (a rough estimate of) how many files will be recompiled. cc <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span></p>",
        "id": 439796944,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291253
    },
    {
        "content": "<p>On the command line, in the project directory, and as user not root.</p>",
        "id": 439796956,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291263
    },
    {
        "content": "<p>So you would know because the command line will say <code>Decompressing X files</code> and eventually give you back control</p>",
        "id": 439797062,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291310
    },
    {
        "content": "<p>It did.</p>",
        "id": 439797087,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291326
    },
    {
        "content": "<p>Okay then the files were decompressed <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 439797235,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291368
    },
    {
        "content": "<p>Try <code>lake exe cache get!</code> to force a redownload of the entire cache</p>",
        "id": 439797268,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716291385
    },
    {
        "content": "<p>should I kill all lean processes before I do that?</p>",
        "id": 439797389,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291433
    },
    {
        "content": "<p>Sure</p>",
        "id": 439797435,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1716291462
    },
    {
        "content": "<p>OK that solved it. Thanks.</p>",
        "id": 439797877,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291619
    },
    {
        "content": "<p>But I'm sure the download before was the same. Hidden state change?</p>",
        "id": 439798349,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1716291792
    }
]