[
    {
        "content": "<p>Is there a way to ask Lean for a list (or, more probably, a <code>Lean.NameSet</code>) of all of the constants defined in a given module (including ones autogenerated by inductives etc.)? Looking at the code for <code>Lean.Elab.runFrontend</code>, I guess one way get this list would be to \"diff\" the constants of the environments generated by the calls to <code>processHeader</code> and <code>IO.processCommands</code>, but I wonder if there is an easier way? Can I get it from the ilean file, perhaps?</p>",
        "id": 425265723,
        "sender_full_name": "Rish Vaishnav",
        "timestamp": 1709805306
    },
    {
        "content": "<p>You want <code>env.header.moduleData[moduleIdx]!.constNames</code>.</p>",
        "id": 425267316,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709805820
    },
    {
        "content": "<p>Awesome, thank you! And, I also just found <code>Lean.Environment.getModuleIdx?</code> for getting the module index from the filename.</p>",
        "id": 425268902,
        "sender_full_name": "Rish Vaishnav",
        "timestamp": 1709806301
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"373814\">Rish Vaishnav</span> has marked this topic as resolved.</p>",
        "id": 425268925,
        "sender_full_name": "Notification Bot",
        "timestamp": 1709806310
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span> I have a follow-up question -- it looks like the header only includes module data for imported files, which makes sense, but I actually wanted to get the list of constants for the main module, i.e. the <code>mainModuleName</code> argument to <code>runFrontend</code>, but seems that it does not have an index (the return value of <code>getModuleIdx?</code> was <code>none</code>). Do you know if this is possible?</p>",
        "id": 425336979,
        "sender_full_name": "Rish Vaishnav",
        "timestamp": 1709826307
    },
    {
        "content": "<p>You could look at mathlib's <code>whatsnew</code> command for inspiration.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/0eaff3630080f2b834b490f935b619a72c9abac9/Mathlib/Util/WhatsNew.lean#L99\">This line</a> is getting all the constants defined in the current module (<code>env.constants.mapâ‚‚</code> for <code>env : Environment</code>).</p>",
        "id": 425396835,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1709846414
    },
    {
        "content": "<p>Perfect, thanks so much! I didn't think to look at the definition of <code>SMap</code> as I didn't realize it was specific to <code>Lean.Environment</code>.</p>",
        "id": 425469657,
        "sender_full_name": "Rish Vaishnav",
        "timestamp": 1709886373
    }
]