[
    {
        "content": "<p>Hi everyone,</p>\n<p>I've created a new .lean file with new theorems using existing theorems from Mathlib's linear algebra section only in proof. Now, I'm looking to document this theorem in HTML format, similar to the existing Lean Mathlib Documentation. </p>\n<p>Is there a way to generate this specific documentation?</p>",
        "id": 417069210,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705827399
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4\">https://github.com/leanprover/doc-gen4</a></p>",
        "id": 417070371,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1705828517
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"372804\">Marcus Rossel</span> <a href=\"#narrow/stream/270676-lean4/topic/how.20to.20generate.20html.20documentation.20for.20new.20lean.20file/near/417070371\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover/doc-gen4\">https://github.com/leanprover/doc-gen4</a></p>\n</blockquote>\n<p>thanks, ive come across this, but when i run:<br>\n<code>lake -R -Kenv=dev build Test:docs</code><br>\nit has an error:<br>\n<code>error: unknown short option '-R'</code></p>\n<p>what does it mean?</p>",
        "id": 417072037,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705830245
    },
    {
        "content": "<p>That your lean version is too old most likely.</p>",
        "id": 417076136,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1705833930
    },
    {
        "content": "<p>how do i check my lean version and how do i update?</p>",
        "id": 417085627,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705842594
    },
    {
        "content": "<p>It's in the lean-toolchain file of your projct</p>",
        "id": 417085688,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1705842619
    },
    {
        "content": "<p>thanks, it's leanprover/lean4:v4.0.0, how do i update</p>",
        "id": 417085726,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705842650
    },
    {
        "content": "<p>Do you use mathlib as a dependency?</p>",
        "id": 417088186,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1705844662
    },
    {
        "content": "<p>nope i just clone the whole repo</p>",
        "id": 417092085,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705847731
    },
    {
        "content": "<p>should i use it as dependency?</p>",
        "id": 417092111,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1705847737
    },
    {
        "content": "<p>Either could work, but the advice will depend on your situation</p>",
        "id": 417093162,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1705848488
    },
    {
        "content": "<p>Can't check right now, but you should be able to find how mathlib generates documentation and just use that</p>",
        "id": 417093264,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1705848579
    },
    {
        "content": "<p>i just cloned a whole brand new branch from master branch<br>\nand i try to run<br>\n<code>lake -Kdoc=on build Mathlib:docs</code><br>\nbut got error:<br>\n<code>error: unknown library facet </code>docs``<br>\nwhy is that?</p>",
        "id": 419851869,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1707143370
    },
    {
        "content": "<p>The R flag is missing</p>",
        "id": 419884129,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1707151584
    },
    {
        "content": "<p>thanks, that fixed the problem</p>\n<p>another question i have is what if i only want to build part of mathlib?</p>\n<p>for example: <code>lake -R -Kdoc=on build Mathlib/LinearAlgebra:docs</code><br>\nis that the right thing to do (seems like not, it'll return <code>unknown target</code> error)</p>",
        "id": 420011042,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1707213422
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/stream/270676-lean4/topic/how.20to.20generate.20html.20documentation.20for.20new.20lean.20file/near/419884129\">said</a>:</p>\n<blockquote>\n<p>The R flag is missing</p>\n</blockquote>\n<p>Ah it looks like it's missing in the mathlib github readme. What does adding this flag do?</p>",
        "id": 420176161,
        "sender_full_name": "Brendan Seamas Murphy",
        "timestamp": 1707277795
    },
    {
        "content": "<p>As per a design decision made a little while back the -K stuff is not a one time CLI thing but instead a cmake style configuration flag. That means that you explicitly have to reconfigure (that's -R) the lake project with that flag.</p>",
        "id": 420192537,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1707289989
    },
    {
        "content": "<p>I think I managed to convince <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>  to change that a while ago, although I think nothing has happened to the implementation yet. Probably there should be an issue tracking it if there isn't already</p>",
        "id": 420236421,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1707307385
    },
    {
        "content": "<p>still have this quesion:</p>\n<ol>\n<li>what do i do if i only want to build part of mathlib?</li>\n</ol>\n<p>for example: <code>lake -R -Kdoc=on build Mathlib/LinearAlgebra:docs</code><br>\nis that the right thing to do (seems like not, it'll return unknown target error)</p>\n<p>and also i have some new problems:</p>\n<ol start=\"2\">\n<li>I simply add a new .lean file inside the Mathlib folder, and after I run <code>lake -R -Kdoc=on build Mathlib:docs</code>, seems like the new .lean file does not appeer in the doc folder, why is that?</li>\n</ol>\n<p>thanks</p>",
        "id": 427299843,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1710729919
    },
    {
        "content": "<p>You specify the targets as module names, e.g. <code>lake build Mathlib.LinearAlgebra.Basic</code></p>",
        "id": 427300456,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1710730072
    },
    {
        "content": "<p>If you add a new Lean file, you must also import it in <code>Mathlib.lean</code>.</p>",
        "id": 427300855,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1710730184
    },
    {
        "content": "<p>thanks, that solved the problem</p>",
        "id": 427538221,
        "sender_full_name": "Yufei Liu",
        "timestamp": 1710782695
    }
]