[
    {
        "content": "<p>This question came up during <a href=\"https://github.com/leanprover-community/mathlib4/pull/8806#discussion_r1540034281\">review</a>: what's the policy for #align-ed declarations which are generalised in a PR? Should one</p>\n<ul>\n<li>remove the #align? I presume not (yet)</li>\n<li>change the align to the new lemma, which is more general?</li>\n<li>keep the old lemma, as a special case of the new one?</li>\n</ul>\n<p>I guess this may depend on the particular case: if the special case is worth having anyway, e.g. because it's the most commonly used variant, the last option is clearly the one to go. But suppose the general version is actually preferrable... what do you think?</p>\n<p><a href=\"#narrow/stream/287929-mathlib4/topic/aligns.20for.20refactored.20content/near/377427884\">https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/aligns.20for.20refactored.20content/near/377427884</a> seems related, but not quite the same.</p>",
        "id": 429738903,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1711486698
    },
    {
        "content": "<p>if it's a drop in replacement, it's usually best to make the #align target the new lemma</p>",
        "id": 429739545,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1711486958
    },
    {
        "content": "<p>You should never remove #align's, that's usually the worst option because it means mathport won't have any idea what to align to and will make some nonsense. Even if the type has changed such that it won't compile anymore as is it's still better than nothing to point to the revised lemma because that's one less thing to manually look up the name of during the fixup phase</p>",
        "id": 429739806,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1711487055
    }
]