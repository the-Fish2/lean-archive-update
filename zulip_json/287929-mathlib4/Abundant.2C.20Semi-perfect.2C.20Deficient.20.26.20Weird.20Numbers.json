[
    {
        "content": "<p>This is an incomplete file that I am currently working on that defines what abundant, semi-perfect, deficient, and weird numbers are.</p>\n<p>I don't know how to add to Mathlib, but nonetheless it is not complete anyways. I am welcome to thoughts. I am not a mathematician so let me know if there are any mistakes.</p>\n<p>Here are the contents of the file:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Nat</span>\n<span class=\"kn\">open</span> <span class=\"n\">BigOperators</span>\n<span class=\"kn\">open</span> <span class=\"n\">Finset</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This file defines abundant, semi-perfect / pseudoperfect, deficient, and weird numbers</span>\n<span class=\"cm\">  Abundant := A number is called abundant if its proper divisors add to more than itself</span>\n<span class=\"cm\">  SemiPerfect := A number is semi-perfect / pseudoperfect if at least one subset of its proper divisors adds to itself</span>\n<span class=\"cm\">  Deficient := A number is deficient if the sum of its proper divisors is less than itself</span>\n<span class=\"cm\">  Weird := A number is weird if it is abundant and NOT semi-perfect</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">def</span> <span class=\"n\">Nat.Abundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.WeirdNumber</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.Deficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∀</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">),</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientNotAbundantOrPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_or</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Deficient</span><span class=\"o\">,</span> <span class=\"n\">Nat.Abundant</span><span class=\"o\">,</span> <span class=\"n\">Nat.Perfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">h1</span>\n  <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">use</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">;</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">mem_powerset_self</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">h1</span>\n  <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span>  <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"gr\">sorry</span>\n  <span class=\"gr\">sorry</span>\n  <span class=\"gr\">sorry</span>\n  <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientORPerfectORAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectRw</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n  <span class=\"bp\">→</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">s</span> <span class=\"n\">hs</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">ne_eq</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">revert</span> <span class=\"n\">hs</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">not_and.mp</span><span class=\"bp\">;</span> <span class=\"n\">revert</span> <span class=\"n\">s</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">h</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">not_and.mpr</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">hx</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">ne_eq</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">revert</span> <span class=\"n\">x</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"k\">fun</span> <span class=\"n\">x</span> <span class=\"n\">hx</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">h1</span> <span class=\"n\">x</span> <span class=\"n\">hx</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PerfectimpSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Perfect</span><span class=\"o\">,</span> <span class=\"n\">Nat.SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">rcases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span>\n  <span class=\"n\">use</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">;</span> <span class=\"n\">refine</span> <span class=\"o\">(</span><span class=\"n\">and_iff_right</span> <span class=\"bp\">?</span><span class=\"n\">h.ha</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span> <span class=\"n\">h1</span>\n  <span class=\"n\">exact</span> <span class=\"n\">mem_powerset_self</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Prime</span><span class=\"o\">,</span> <span class=\"n\">Nat.Abundant</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">h1</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">sum_properDivisors_eq_one_iff_prime.mpr</span> <span class=\"n\">h</span>\n  <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Prime.one_lt</span> <span class=\"n\">h</span>\n  <span class=\"k\">have</span> <span class=\"n\">h5</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.lt_trans</span> <span class=\"n\">h4</span> <span class=\"n\">h1</span>\n  <span class=\"k\">have</span> <span class=\"n\">h6</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"k\">calc</span>\n      <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">Eq.symm</span> <span class=\"n\">h3</span>\n      <span class=\"n\">_</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rel</span> <span class=\"o\">[</span><span class=\"n\">h5</span><span class=\"o\">]</span>\n  <span class=\"n\">contradiction</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_imp_not</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">PerfectimpSemiPerfect</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">NotSemiPerfectRw</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">Prime.properDivisors</span> <span class=\"n\">h</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span>\n  <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Prime.one_lt</span> <span class=\"n\">h</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"n\">s</span> <span class=\"n\">hs</span><span class=\"bp\">;</span> <span class=\"k\">have</span> <span class=\"n\">hs'</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"bp\">=</span> <span class=\"bp\">∅</span> <span class=\"bp\">∨</span> <span class=\"n\">s</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">List.mem_pair.mp</span> <span class=\"n\">hs</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">hs'</span> <span class=\"k\">with</span> <span class=\"n\">hs1</span> <span class=\"bp\">|</span> <span class=\"n\">hs2</span>\n  <span class=\"n\">repeat</span> <span class=\"o\">(</span><span class=\"n\">first</span> <span class=\"bp\">|</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">hs1</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">linarith</span> <span class=\"bp\">|</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">hs2</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">linarith</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">PrimeNotSemiPerfect</span> <span class=\"n\">n</span> <span class=\"n\">h</span>\n  <span class=\"n\">exact</span> <span class=\"n\">NotSemiPerfectNotPerfect</span> <span class=\"n\">n</span> <span class=\"n\">h1</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> ### Examples ### -/</span>\n<span class=\"k\">#eval</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"mi\">8</span><span class=\"o\">)</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">SemiPerfect</span> <span class=\"mi\">6</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span>\n  <span class=\"n\">use</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">}</span>\n  <span class=\"n\">constructor</span>\n  <span class=\"n\">exact</span> <span class=\"n\">mem_powerset_self</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"mi\">3</span><span class=\"o\">}</span>\n  <span class=\"n\">norm_num</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">SemiPerfect</span> <span class=\"mi\">12</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">use</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"n\">properDivisors</span> <span class=\"mi\">12</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"o\">}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">hn</span><span class=\"o\">]</span>\n  <span class=\"n\">apply</span> <span class=\"n\">Finset.mem_powerset.mpr</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span>\n  <span class=\"n\">norm_num</span>\n<span class=\"k\">#eval</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"mi\">7</span>\n<span class=\"k\">#eval</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"mi\">7</span><span class=\"o\">,</span> <span class=\"n\">i</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">Abundant</span> <span class=\"mi\">70</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Abundant</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">norm_num</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">SemiPerfect</span> <span class=\"mi\">7</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">not_and.mpr</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"mi\">7</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Iff.rfl</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h2</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">h1.mpr</span>\n  <span class=\"n\">refine</span> <span class=\"n\">Nat.ne_of_lt</span> <span class=\"bp\">?</span><span class=\"n\">h</span>\n  <span class=\"n\">aesop</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"k\">show</span> <span class=\"n\">properDivisors</span> <span class=\"mi\">7</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n  <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">∅</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">subset_singleton_iff.mp</span> <span class=\"n\">h2</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">h3</span> <span class=\"k\">with</span> <span class=\"n\">h4</span> <span class=\"bp\">|</span> <span class=\"n\">h5</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h4</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">norm_num</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h5</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">norm_num</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">SemiPerfect</span> <span class=\"mi\">4</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"n\">x</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">not_and.mpr</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"mi\">4</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"mi\">4</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Iff.rfl</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h2</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">h1.mpr</span><span class=\"bp\">;</span> <span class=\"n\">refine</span> <span class=\"n\">Nat.ne_of_lt</span> <span class=\"bp\">?</span><span class=\"n\">h</span><span class=\"bp\">;</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"k\">show</span> <span class=\"n\">properDivisors</span> <span class=\"mi\">4</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">}</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"k\">show</span> <span class=\"n\">powerset</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">}</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">}}</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n  <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"o\">({</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">}}</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"o\">(</span><span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">))</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">∅</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">}</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">})</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">mem_singleton</span><span class=\"o\">,</span> <span class=\"n\">mem_insert</span><span class=\"o\">,</span> <span class=\"n\">imp_self</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">h3</span> <span class=\"n\">h2</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">h4</span> <span class=\"k\">with</span> <span class=\"o\">(</span><span class=\"n\">h5</span> <span class=\"bp\">|</span> <span class=\"n\">h6</span><span class=\"o\">)</span> <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">h7</span> <span class=\"bp\">|</span> <span class=\"n\">h8</span><span class=\"o\">)</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h7</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rcases</span> <span class=\"n\">h8</span> <span class=\"k\">with</span> <span class=\"n\">h9</span> <span class=\"bp\">|</span> <span class=\"n\">h10</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h9</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h10</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span>\n<span class=\"kd\">example</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"n\">a</span> <span class=\"bp\">≠</span> <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">not_iff_not</span><span class=\"o\">]</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">WeirdNumber</span> <span class=\"mi\">70</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">constructor</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Abundant</span><span class=\"o\">]</span>\n  <span class=\"n\">norm_num</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"n\">x</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">not_and.mpr</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"mi\">70</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"mi\">70</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Iff.rfl</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h2</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">h1.mpr</span><span class=\"bp\">;</span> <span class=\"n\">refine</span> <span class=\"n\">Nat.ne_of_lt</span> <span class=\"bp\">?</span><span class=\"n\">h</span><span class=\"bp\">;</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"k\">show</span> <span class=\"n\">properDivisors</span> <span class=\"mi\">70</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"mi\">5</span><span class=\"o\">,</span> <span class=\"mi\">7</span><span class=\"o\">,</span> <span class=\"mi\">10</span><span class=\"o\">,</span> <span class=\"mi\">14</span><span class=\"o\">,</span> <span class=\"mi\">35</span><span class=\"o\">}</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n  <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"o\">({</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">},</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">}}</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"o\">(</span><span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">))</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">∅</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">2</span><span class=\"o\">}</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">})</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">mem_singleton</span><span class=\"o\">,</span> <span class=\"n\">mem_insert</span><span class=\"o\">]</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"mi\">3</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">mem_singleton</span><span class=\"o\">,</span> <span class=\"n\">mem_insert</span><span class=\"o\">]</span>\n<span class=\"k\">#eval</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"mi\">70</span><span class=\"o\">)</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">Abundant</span> <span class=\"mi\">12</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Abundant</span><span class=\"o\">]</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 419492711,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1706891496
    },
    {
        "content": "<p>I will update this file on my github : <a href=\"https://github.com/Colin166/Lean4/blob/main/NatNumberCategories\">https://github.com/Colin166/Lean4/blob/main/NatNumberCategories</a></p>",
        "id": 419513380,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1706899255
    },
    {
        "content": "<p>I plan to make the definitions based on the fact that zero shouldn't be in the definitions in the near future.</p>",
        "id": 419513499,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1706899307
    },
    {
        "content": "<p>For Deficient, why bother with the finset? And is 0 supposed to be semiperfect?</p>",
        "id": 419516956,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1706900566
    },
    {
        "content": "<p><code>Set.Finite</code> is usually what you want if you just need to check that the set is finite</p>",
        "id": 419520024,
        "sender_full_name": "Emilie (Shad Amethyst)",
        "timestamp": 1706901794
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Abundant.2C.20Semi-perfect.2C.20Deficient.20.26.20Weird.20Numbers/near/419516956\">said</a>:</p>\n<blockquote>\n<p>For Deficient, why bother with the finset? And is 0 supposed to be semiperfect?</p>\n</blockquote>\n<p>Should I omit zero from the definitions?</p>\n<p>I would think that zero is an abundant number as it technically qualifies; however, it is impossible to prove as Nat.properDivisors 0 returns an empty set. Although thinking on it, zero should not be a semi-perfect number so I will add that requirement in the semi-perfect definition.</p>",
        "id": 419640573,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1706993625
    },
    {
        "content": "<p>preperfect!</p>",
        "id": 419662982,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1707015314
    },
    {
        "content": "<p>I have removed zero from all the definitions since Nat.Perfect does that as well.  I have also fixed the Nat.Deficient definition. How can I add this file to Mathlib if you all would want it?</p>\n<p>Here are the contents of the file:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Nat</span>\n<span class=\"kn\">open</span> <span class=\"n\">BigOperators</span>\n<span class=\"kn\">open</span> <span class=\"n\">Finset</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This file defines abundant, semi-perfect / pseudoperfect, deficient, and weird numbers</span>\n<span class=\"cm\">  Abundant := A number is called abundant if its proper divisors add to more than itself</span>\n<span class=\"cm\">  SemiPerfect := A number is semi-perfect / pseudoperfect if at least one subset of its proper divisors adds to itself</span>\n<span class=\"cm\">  Deficient := A number is deficient if the sum of its proper divisors is less than itself</span>\n<span class=\"cm\">  Weird := A number is weird if it is abundant and NOT semi-perfect</span>\n<span class=\"cm\">  I have excluded zero from the definitions because zero is also excluded from the Nat.Perfect definition.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">def</span> <span class=\"n\">Nat.Abundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.WeirdNumber</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Nat.Deficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">OneDeficient</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Deficient</span><span class=\"o\">]</span>\n  <span class=\"n\">norm_num</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientNotAbundantOrPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_or</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Deficient</span><span class=\"o\">,</span> <span class=\"n\">Nat.Abundant</span><span class=\"o\">,</span> <span class=\"n\">Nat.Perfect</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">]</span>\n  <span class=\"bp\">·</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n    <span class=\"n\">left</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.lt_asymm</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">left</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.ne_of_lt</span> <span class=\"n\">h1</span>\n  <span class=\"bp\">·</span> <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span><span class=\"bp\">;</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n    <span class=\"n\">constructor</span>\n    <span class=\"k\">have</span> <span class=\"n\">f1</span> <span class=\"o\">:</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n      <span class=\"n\">rcases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">w1</span> <span class=\"bp\">|</span> <span class=\"n\">w2</span><span class=\"bp\">;</span> <span class=\"n\">assumption</span><span class=\"bp\">;</span> <span class=\"n\">contradiction</span>\n    <span class=\"k\">have</span> <span class=\"n\">f2</span> <span class=\"o\">:</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n      <span class=\"n\">rcases</span> <span class=\"n\">h2</span> <span class=\"k\">with</span> <span class=\"n\">w1</span> <span class=\"bp\">|</span> <span class=\"n\">w2</span><span class=\"bp\">;</span> <span class=\"n\">assumption</span><span class=\"bp\">;</span> <span class=\"n\">contradiction</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">f1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">ne_eq</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">f2</span>\n    <span class=\"n\">exact</span> <span class=\"n\">lt_of_le_of_ne</span> <span class=\"n\">f1</span> <span class=\"n\">f2</span>\n    <span class=\"n\">exact</span> <span class=\"n\">hn</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PerfectNotAbundantOrDeficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">Iff.comm</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">not_iff</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Abundant</span><span class=\"o\">,</span> <span class=\"n\">Nat.Perfect</span><span class=\"o\">,</span> <span class=\"n\">Nat.Deficient</span><span class=\"o\">]</span>\n  <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span>\n  <span class=\"k\">have</span> <span class=\"n\">f1</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"k\">have</span> <span class=\"n\">f2</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"k\">have</span> <span class=\"n\">f3</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">f1</span><span class=\"o\">,</span> <span class=\"n\">f2</span><span class=\"o\">,</span> <span class=\"n\">f3</span><span class=\"o\">,</span> <span class=\"n\">lt_or_lt_iff_ne</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">f1</span><span class=\"o\">,</span> <span class=\"n\">f2</span><span class=\"o\">,</span> <span class=\"n\">f3</span><span class=\"o\">,</span> <span class=\"n\">lt_or_lt_iff_ne</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1'</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"k\">fun</span> <span class=\"n\">a</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">h1</span> <span class=\"o\">(</span><span class=\"n\">id</span> <span class=\"o\">(</span><span class=\"n\">Ne.symm</span> <span class=\"n\">a</span><span class=\"o\">))</span>\n  <span class=\"k\">have</span> <span class=\"n\">h2'</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"k\">fun</span> <span class=\"n\">a</span> <span class=\"bp\">=&gt;</span> <span class=\"o\">(</span><span class=\"n\">h2</span> <span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">(</span><span class=\"n\">h2</span> <span class=\"n\">a</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">id</span> <span class=\"n\">a.symm</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span>\n  <span class=\"k\">have</span> <span class=\"n\">contra1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">h2'</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">hP</span>\n  <span class=\"n\">exact</span> <span class=\"n\">contra1</span>\n  <span class=\"k\">have</span> <span class=\"n\">contra2</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">h1'</span> <span class=\"n\">hP</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">ne_eq</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hP</span>\n  <span class=\"n\">contradiction</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">AbundantNotPerfectOrDeficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_or</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Deficient</span><span class=\"o\">,</span> <span class=\"n\">Nat.Abundant</span><span class=\"o\">,</span> <span class=\"n\">Nat.Perfect</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">]</span>\n  <span class=\"bp\">·</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n    <span class=\"n\">left</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.ne_of_gt</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">left</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.lt_asymm</span> <span class=\"n\">h1</span>\n  <span class=\"bp\">·</span> <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span><span class=\"bp\">;</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and_or</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h2</span>\n    <span class=\"n\">constructor</span>\n    <span class=\"n\">rcases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">w1</span> <span class=\"bp\">|</span> <span class=\"n\">w2</span><span class=\"bp\">;</span> <span class=\"n\">rcases</span> <span class=\"n\">h2</span> <span class=\"k\">with</span> <span class=\"n\">f1</span> <span class=\"bp\">|</span> <span class=\"n\">f2</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">ne_eq</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">w1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">f1</span>\n    <span class=\"n\">exact</span> <span class=\"n\">Nat.lt_of_le_of_ne</span> <span class=\"n\">f1</span> <span class=\"o\">(</span><span class=\"n\">id</span> <span class=\"o\">(</span><span class=\"n\">Ne.symm</span> <span class=\"n\">w1</span><span class=\"o\">))</span>\n    <span class=\"n\">repeat</span> <span class=\"n\">contradiction</span>\n    <span class=\"n\">exact</span> <span class=\"n\">hn</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientOrPerfectOrAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.Deficient</span><span class=\"o\">,</span> <span class=\"n\">Nat.Perfect</span><span class=\"o\">,</span> <span class=\"n\">Nat.Abundant</span><span class=\"o\">]</span>\n  <span class=\"n\">by_contra</span> <span class=\"n\">hc</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_or</span><span class=\"o\">,</span> <span class=\"n\">not_or</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">hc</span> <span class=\"k\">with</span> <span class=\"o\">⟨</span><span class=\"n\">hc1</span><span class=\"o\">,</span> <span class=\"o\">⟨</span><span class=\"n\">hc2</span><span class=\"o\">,</span> <span class=\"n\">hc3</span><span class=\"o\">⟩⟩</span>\n  <span class=\"k\">have</span> <span class=\"n\">f1</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"k\">have</span> <span class=\"n\">f2</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"k\">have</span> <span class=\"n\">f3</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"n\">exact</span> <span class=\"n\">and_iff_left</span> <span class=\"n\">hn</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">f1</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc2</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">f2</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">f3</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc3</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc1</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hc2</span>\n  <span class=\"k\">have</span> <span class=\"n\">f4</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">le_antisymm</span> <span class=\"n\">hc2</span> <span class=\"n\">hc1</span>\n  <span class=\"n\">contradiction</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectRw</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n  <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"mi\">0</span> <span class=\"bp\">≥</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">s</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">hs</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">h</span> <span class=\"n\">s</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hs</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">hs</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">x</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"bp\">¬∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"mi\">0</span> <span class=\"bp\">≥</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">h</span> <span class=\"n\">x</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_lt</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"k\">fun</span> <span class=\"n\">a</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">h</span> <span class=\"n\">x</span> <span class=\"n\">a</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PerfectImpSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">obtain</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">use</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"bp\">;</span>\n  <span class=\"n\">constructor</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">mem_powerset_self</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n  <span class=\"n\">constructor</span> <span class=\"bp\">&lt;;&gt;</span> <span class=\"n\">assumption</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">h1</span><span class=\"bp\">;</span> <span class=\"n\">rcases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"o\">⟨</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">⟩</span>\n  <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">sum_properDivisors_eq_one_iff_prime.mpr</span> <span class=\"n\">h</span>\n  <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Prime.one_lt</span> <span class=\"n\">h</span>\n  <span class=\"k\">have</span> <span class=\"n\">h5</span> <span class=\"o\">:</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Nat.lt_trans</span> <span class=\"n\">h4</span> <span class=\"n\">h1</span>\n  <span class=\"k\">have</span> <span class=\"n\">h6</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n    <span class=\"k\">calc</span>\n      <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">apply</span> <span class=\"n\">Eq.symm</span> <span class=\"n\">h3</span>\n      <span class=\"n\">_</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rel</span> <span class=\"o\">[</span><span class=\"n\">h5</span><span class=\"o\">]</span>\n  <span class=\"n\">contradiction</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_imp_not</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">PerfectImpSemiPerfect</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">NotSemiPerfectRw</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">Prime.properDivisors</span> <span class=\"n\">h</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span>\n  <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">Prime.one_lt</span> <span class=\"n\">h</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rintro</span> <span class=\"n\">s</span> <span class=\"n\">hs</span><span class=\"bp\">;</span> <span class=\"k\">have</span> <span class=\"n\">hs'</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"bp\">=</span> <span class=\"bp\">∅</span> <span class=\"bp\">∨</span> <span class=\"n\">s</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">List.mem_pair.mp</span> <span class=\"n\">hs</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">hs'</span> <span class=\"k\">with</span> <span class=\"n\">hs1</span> <span class=\"bp\">|</span> <span class=\"n\">hs2</span>\n  <span class=\"bp\">&lt;;&gt;</span> <span class=\"o\">{</span><span class=\"n\">left</span><span class=\"bp\">;</span> <span class=\"n\">repeat</span> <span class=\"o\">(</span><span class=\"n\">first</span> <span class=\"bp\">|</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">hs1</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">linarith</span> <span class=\"bp\">|</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">hs2</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">linarith</span><span class=\"o\">)}</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">exact</span> <span class=\"n\">PrimeNotSemiPerfect</span> <span class=\"n\">n</span> <span class=\"n\">h</span>\n  <span class=\"n\">exact</span> <span class=\"n\">NotSemiPerfectNotPerfect</span> <span class=\"n\">n</span> <span class=\"n\">h1</span>\n</code></pre></div>\n<p>There should be no errors and it should be complete.</p>",
        "id": 420272808,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1707318357
    },
    {
        "content": "<p>Using a little of the available automation, you can simplify some of the proofs (note that I changed the <code>def</code>s to <code>abbrev</code>s in order not to have to unfold them all the times):</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Nat</span>\n<span class=\"kn\">open</span> <span class=\"n\">BigOperators</span>\n<span class=\"kn\">open</span> <span class=\"n\">Finset</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This file defines abundant, semi-perfect / pseudoperfect, deficient, and weird numbers</span>\n<span class=\"cm\">  Abundant := A number is called abundant if its proper divisors add to more than itself</span>\n<span class=\"cm\">  SemiPerfect := A number is semi-perfect / pseudoperfect if at least one subset of its proper divisors adds to itself</span>\n<span class=\"cm\">  Deficient := A number is deficient if the sum of its proper divisors is less than itself</span>\n<span class=\"cm\">  Weird := A number is weird if it is abundant and NOT semi-perfect</span>\n<span class=\"cm\">  I have excluded zero from the definitions because zero is also excluded from the Nat.Perfect definition.</span>\n<span class=\"cm\">-/</span>\n<span class=\"n\">abbrev</span> <span class=\"n\">Nat.Abundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&gt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"n\">abbrev</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"n\">abbrev</span> <span class=\"n\">Nat.WeirdNumber</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span>\n\n<span class=\"n\">abbrev</span> <span class=\"n\">Nat.Deficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">OneDeficient</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">norm_num</span> <span class=\"o\">[</span><span class=\"n\">Nat.Deficient</span><span class=\"o\">]</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientNotAbundantOrPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span>\n  <span class=\"n\">omega</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PerfectNotAbundantOrDeficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span>\n  <span class=\"n\">omega</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">AbundantNotPerfectOrDeficient</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span>\n  <span class=\"n\">omega</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">DeficientOrPerfectOrAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hn</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Deficient</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span>\n  <span class=\"n\">omega</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectRw</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Finset</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">Finset.powerset</span> <span class=\"o\">(</span><span class=\"n\">Nat.properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n  <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span> <span class=\"bp\">∨</span> <span class=\"mi\">0</span> <span class=\"bp\">≥</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">dsimp</span> <span class=\"o\">[</span><span class=\"n\">Nat.SemiPerfect</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"n\">constructor</span><span class=\"bp\">;</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">s</span><span class=\"bp\">;</span>\n  <span class=\"k\">have</span> <span class=\"n\">hs</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"bp\">∈</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">∑</span> <span class=\"n\">i</span> <span class=\"k\">in</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">n</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">h</span> <span class=\"n\">s</span>\n  <span class=\"n\">rwa</span> <span class=\"o\">[</span><span class=\"n\">not_and</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_lt</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">hs</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span> <span class=\"n\">x</span><span class=\"bp\">;</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">not_and</span><span class=\"o\">,</span> <span class=\"n\">not_and_or</span><span class=\"o\">,</span> <span class=\"n\">not_lt</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">h</span> <span class=\"n\">x</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PerfectImpSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">SemiPerfect</span>\n  <span class=\"n\">aesop</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotAbundant</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Abundant</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Abundant</span>\n  <span class=\"n\">aesop</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">NotSemiPerfectNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span>\n  <span class=\"n\">not_imp_not.mpr</span> <span class=\"o\">(</span><span class=\"n\">PerfectImpSemiPerfect</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotSemiPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.SemiPerfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">NotSemiPerfectRw</span><span class=\"o\">]</span>\n  <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">powerset</span> <span class=\"o\">(</span><span class=\"n\">properDivisors</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"bp\">∅</span><span class=\"o\">,</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">}}</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">Prime.properDivisors</span> <span class=\"n\">h</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">rfl</span>\n  <span class=\"n\">aesop</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">PrimeNotPerfect</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Nat.Prime</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">Nat.Perfect</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">unfold</span> <span class=\"n\">Nat.Perfect</span>\n  <span class=\"n\">aesop</span>\n</code></pre></div>",
        "id": 420285747,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1707321753
    },
    {
        "content": "<p>That’s very cool! I did not know you could do that.</p>",
        "id": 420287378,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1707322137
    },
    {
        "content": "<p>I would like to add these theorems to Mathlib if possible. How would I do this?</p>",
        "id": 420916051,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1707680163
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/contribute/index.html\">The wiki</a> gives you a step-by-step introduction on how to do that; you will need a github account, and send your github username here or in the <code>github permission</code> to receive permission to create your branch on the mathlib repository, so that you get all of the benefits of the automation set up there :)</p>",
        "id": 420917674,
        "sender_full_name": "Emilie (Shad Amethyst)",
        "timestamp": 1707681665
    },
    {
        "content": "<p>There's also a couple of pages on the left tab of that link with guidelines on how to format your contribution to match mathlib's style</p>",
        "id": 420917804,
        "sender_full_name": "Emilie (Shad Amethyst)",
        "timestamp": 1707681736
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 420918120,
        "sender_full_name": "Colin Jones ⚛️",
        "timestamp": 1707682067
    }
]