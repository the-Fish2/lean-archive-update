[
    {
        "content": "<p>I noticed that the Gamma distribution is still missing. I started writing some code for this, which will hopefully allow us to refactor the definitions for the exponential distribution from this, and to facilitate an easy introduction of e.g. chi-squared and Erlang distributions. I'll tag a PR to this message once I think there is enough in there!</p>",
        "id": 410731969,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704122689
    },
    {
        "content": "<p>I have written up the API that generalises almost all of Exponential.lean to the Gamma distribution. I have also refactored all of Exponential.lean to use the proven results for the Gamma distribution. Shall I first make a PR for the gamma distribution and then for the refactoring, or do one bigger PR?</p>",
        "id": 410993036,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704279060
    },
    {
        "content": "<p>I'll add Chi-squared after the PR gets accepted to avoid doing double work!</p>",
        "id": 410993397,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704279231
    },
    {
        "content": "<p>Would we be interested in expressions for the moments of the Gamma distribution? We do not seem yet have that for the Exponential distribution. Adding these would be very straightforward, as the necessary integrals can be easily computed from an integral that I have already computed!</p>",
        "id": 410993610,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704279326
    },
    {
        "content": "<p>How many lines of code is this? Generally it's better to go for multiple shorter PRs rather than one massive one – as a guideline, try to keep individual PR's to &lt; 300 lines or so. (You write \"generalises almost all of Exponential.lean\", but there are several files in mathlib with that name, and their lengths vary from 50 to 2000 lines...)</p>",
        "id": 410993903,
        "sender_full_name": "David Loeffler",
        "timestamp": 1704279464
    },
    {
        "content": "<p>Whoops, I meant Probability/Distributions/Exponential.lean, I forgot about the other uses of the word for a second <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span>. Setting up all properties for the Gamma distribution is +260 lines. Refactoring Distributions/Exponential.lean would remove around 200 and add around 150 lines.</p>",
        "id": 410994341,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704279659
    },
    {
        "content": "<p>I guess I could also add some more stuff like scaling by constants &amp; the Radon-Nikodym derivatives, but these were not in Distributions/Exponential.lean as of yet, so I'd keep that for a follow-up PR.</p>",
        "id": 410994620,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704279760
    },
    {
        "content": "<p>The definitions and basic results for the Gamma distribution are now given in <a href=\"https://github.com/leanprover-community/mathlib4/pull/9408\">#9408</a>. Once it merges, I will add a PR to refactor the Exponential distribution.</p>",
        "id": 411005544,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704284678
    },
    {
        "content": "<p>I've refactored the proofs in Probability/Distributions/Exponential to use those of Probability/Distributions/Gamma and tried to incorporate the style feedback that I got in <a href=\"https://github.com/leanprover-community/mathlib4/pull/9408\">#9408</a> here as well; e.g. the file now no longer uses <code>Fact</code>'s, at the cost of replacing an instance <code>instIsProbabilityMeasureExponential</code> by a lemma <code>isProbabilityMeasureExponential</code>. The PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/9462\">#9462</a>, I'm waiting to see if it builds to identify if there are any downstream uses of Probability/Distributions/Gamma that I've broken in making some arguments implicit; other than that a second pair of eyes to go over the material would be much appreciated!</p>",
        "id": 411381959,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704466447
    },
    {
        "content": "<p>Is it possible to get an instance that it is always a probability measure (without any <code>Fact</code>), by defining the measure to be what you think it should be when <code>r &gt; 0</code>, and the Dirac mass at <code>0</code> otherwise (or any nice choice that would make as many results as possible true without the assumption <code>r &gt; 0</code>)?</p>",
        "id": 411404259,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1704475208
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Gamma.20distribution/near/411404259\">said</a>:</p>\n<blockquote>\n<p>Is it possible to get an instance that it is always a probability measure (without any <code>Fact</code>), by defining the measure to be what you think it should be when <code>r &gt; 0</code>, and the Dirac mass at <code>0</code> otherwise (or any nice choice that would make as many results as possible true without the assumption <code>r &gt; 0</code>)?</p>\n</blockquote>\n<p>That sounds like a good idea, I’ll take a look soon!</p>",
        "id": 411407621,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704476771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Gamma.20distribution/near/411404259\">said</a>:</p>\n<blockquote>\n<p>Is it possible to get an instance that it is always a probability measure (without any <code>Fact</code>), by defining the measure to be what you think it should be when <code>r &gt; 0</code>, and the Dirac mass at <code>0</code> otherwise (or any nice choice that would make as many results as possible true without the assumption <code>r &gt; 0</code>)?</p>\n</blockquote>\n<p>I've experimented with this for the Poisson distribution (the small PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/9554\">#9554</a>), and this seems to work just fine; I see that the Gaussian distribution file does a similar thing. I'll wait until my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/9642\">#9642</a> for the exponential distribution has been merged and then I'll make a PR extending the results for gamma and exponential to NNReal!</p>",
        "id": 411801753,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1704741660
    }
]