[
    {
        "content": "<p>I needed subharmonic and harmonic functions in one complex dimension for the proof of Hartogs' theorem, in order to use Hartogs' lemma.  Specifically what I needed was that <code>log |f z|</code> is subharmonic for <code>f</code> analytic.  (This is awkward due to the singularity if <code>f z = 0</code>, so instead I worked with <code>max c (log |f z|)</code>.)</p>\n<p>I'm interested in upstreaming Hartogs theorem.  The question is how much of this 1D harmonic theory to import, since my impression is that eventually mathlib will have a much more general version.</p>\n<p>The subharmonic and harmonic theory is <a href=\"https://github.com/girving/ray/blob/main/Ray/Hartogs/Subharmonic.lean\">https://github.com/girving/ray/blob/main/Ray/Hartogs/Subharmonic.lean</a>.  It's currently over 1000 lines, since it requires the maximum principle and thus harmonic extensions from circles to disks, etc.  I'm not an expert here, of course, so it's likely large simplifications are possible.</p>\n<p>This file and its dependencies use <a href=\"https://github.com/leanprover-community/mathlib4/pull/10562\"><code>bound</code></a> heavily as well, but that doesn't need to block at least discussion.</p>",
        "id": 422805343,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708604641
    },
    {
        "content": "<p>Ah, also: the subharmonic theory is likely simpler if I switch to superharmonic functions to ENNReal, both because the eventual measure theory I need is there (Fatou's lemma) and because then the singularity in <code>-log |f z|</code> is fine (though one still needs to scale before taking logs to avoid the cutoff at 0).</p>",
        "id": 422806119,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708604915
    },
    {
        "content": "<p>My first reaction was “go for it”, but I then remembered that in complex analysis, people work with psh functions all the time, with “s”=”sub”. That means they have internalized the analogue of Fatou's lemma for these functions. So it might be neater to add this to mathlib.</p>",
        "id": 422817029,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708608736
    },
    {
        "content": "<p>What's the definition of psh function you have in mind?  <a href=\"https://en.wikipedia.org/wiki/Plurisubharmonic_function\">https://en.wikipedia.org/wiki/Plurisubharmonic_function</a> seems to first define 1D subharmonic functions and then lift the definition up by requiring subharmonicity on each line.</p>",
        "id": 422819194,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708609523
    },
    {
        "content": "<p>Also I should clarify that I don't need these on manifolds currently, just for one flat complex dimension.</p>",
        "id": 422820498,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708609938
    },
    {
        "content": "<p>That's indeed the definition I know. And in the complex setting, same, but with complex lines.</p>",
        "id": 422829714,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708612749
    },
    {
        "content": "<p>To pass from complex line to manifolds, one has to prove invariance under complex diffeomorphisms.</p>",
        "id": 422829961,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708612818
    },
    {
        "content": "<p>For a reference, I'd go to Demailly's book and formalize everything line by line.</p>",
        "id": 422830100,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708612860
    },
    {
        "content": "<p>Would an eventual desire to get to psh change the initial step of getting subharmonic defined in 1D?  If psh is a definition on top of 1D, it seems like that one would a 1D definition even more useful, as opposed to wanting to define general dimension subharmonic functions.</p>",
        "id": 422834844,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708614106
    },
    {
        "content": "<p>In the complex case, psh is on top of 1D complex, which is 2D real…<br>\nNB. 1D-psh functions are convex functions.</p>",
        "id": 422835522,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708614299
    },
    {
        "content": "<p>Got it, so one still wants <code>HarmonicOn</code> and <code>SubharmonicOn</code> to be defined over any normed space.</p>\n<p>Which book do you mean, specifically?  I'd likely be up for lifting my current theory such that it matches with a subset of a book, but probably not up for formalizing the rest of the book. :)</p>",
        "id": 422836818,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708614636
    },
    {
        "content": "<p>Demailly, <em>Complex analytic and differential geometry</em>, <a href=\"https://www-fourier.ujf-grenoble.fr/~demailly/manuscripts/agbook.pdf\">https://www-fourier.ujf-grenoble.fr/~demailly/manuscripts/agbook.pdf</a> (sections I.4 and I.5)</p>\n<p>For the complex case, especially 1D, the book by Ransford, <em>Potential theory in the complex plane</em>, is nice and reasonably paced.</p>",
        "id": 422841192,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1708615738
    },
    {
        "content": "<p>Hmm, do we have integrals over spherical shells, and the sphere/ball Fubini theorem?  I have the 1D complex case at <a href=\"https://github.com/girving/ray/blob/main/Ray/Hartogs/FubiniBall.lean\">https://github.com/girving/ray/blob/main/Ray/Hartogs/FubiniBall.lean</a>, but I’m not sure we can easily write down the general normed space case.</p>",
        "id": 422887219,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1708629182
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/7693\">#7693</a><br>\n(<code>integral_fun_norm_addHaar</code> requires the function to be constant on each sphere, so you may want to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.integral_prod_symm#doc\">docs#MeasureTheory.integral_prod_symm</a> at the line <code>∫ x : sphere (0 : E) 1 × Ioi (0 : ℝ), f x.2 ∂μ.toSphere.prod (.volumeIoiPow (dim E - 1))</code> instead of <code>integral_fun_snd</code>).</p>",
        "id": 422893549,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1708631507
    }
]