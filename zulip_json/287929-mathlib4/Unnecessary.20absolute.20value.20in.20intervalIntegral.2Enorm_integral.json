[
    {
        "content": "<p>Is there a reason <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=intervalIntegral.norm_integral_le_of_norm_le#doc\">docs#intervalIntegral.norm_integral_le_of_norm_le</a>  has an absolute value on the RHS?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">intervalIntegral.norm_integral_le_of_norm_le</span> <span class=\"o\">{</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_3</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span> <span class=\"n\">E</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">NormedSpace</span> <span class=\"n\">ℝ</span> <span class=\"n\">E</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span> <span class=\"n\">E</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">μ</span> <span class=\"o\">:</span> <span class=\"n\">MeasureTheory.Measure</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"bp\">∀ᵐ</span> <span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">∂</span><span class=\"n\">MeasureTheory.Measure.restrict</span> <span class=\"n\">μ</span> <span class=\"o\">(</span><span class=\"bp\">Ι</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">),</span> <span class=\"bp\">‖</span><span class=\"n\">f</span> <span class=\"n\">t</span><span class=\"bp\">‖</span> <span class=\"bp\">≤</span> <span class=\"n\">g</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hbound</span> <span class=\"o\">:</span> <span class=\"n\">IntervalIntegrable</span> <span class=\"n\">g</span> <span class=\"n\">μ</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"bp\">‖∫</span> <span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"n\">a..b</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"n\">t</span> <span class=\"bp\">∂</span><span class=\"n\">μ</span><span class=\"bp\">‖</span> <span class=\"bp\">≤</span> <span class=\"bp\">|∫</span> <span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"n\">a..b</span><span class=\"o\">,</span> <span class=\"n\">g</span> <span class=\"n\">t</span> <span class=\"bp\">∂</span><span class=\"n\">μ</span><span class=\"bp\">|</span>\n</code></pre></div>\n<p>We know <code>g</code> is a.e. nonnegative from the hypotheses, and the absolute value makes it slightly harder to work with in the case I am using right now.</p>",
        "id": 412924891,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1705313818
    },
    {
        "content": "<p>If <code>b &lt; a</code>, then the right hand side without the absolute value is negative, so one definitely needs the absolute value.</p>",
        "id": 412926152,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1705314275
    },
    {
        "content": "<p>Aha, I'd forgotten about reversed integrals.  Thanks!</p>",
        "id": 412926245,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1705314306
    },
    {
        "content": "<p>If you want to remove the absolute value, you could use instead <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.norm_integral_le_of_norm_le#doc\">docs#MeasureTheory.norm_integral_le_of_norm_le</a>.</p>",
        "id": 412926815,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1705314514
    }
]