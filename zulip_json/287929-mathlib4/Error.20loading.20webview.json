[
    {
        "content": "<p>Suddently, every time I open a Lean file in VSCode, the error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">loading</span><span class=\"w\"> </span><span class=\"n\">webview</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">register</span><span class=\"w\"> </span><span class=\"n\">service</span><span class=\"w\"> </span><span class=\"n\">worker</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">InvalidStateError</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">register</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ServiceWorker</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">document</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"bp\">..</span>\n</code></pre></div>\n<p>appears.  When I have seen it in the past, quitting and restarting VSCode fixed it, but now I tried that a few times and nothing changes.  Is anyone else seeing this?</p>",
        "id": 440731956,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716749062
    },
    {
        "content": "<p>Try quitting VSCode, killing all lean processes and then restarting?</p>",
        "id": 440731983,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1716749101
    },
    {
        "content": "<p>There are no lean processes, but I <code>killall lean</code> anyway and the problem persists.</p>",
        "id": 440732017,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716749145
    },
    {
        "content": "<p>(i.e. quit VSCode, killall tells me there is no lean, open VSCode, same error)</p>",
        "id": 440732064,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716749170
    },
    {
        "content": "<p>It is \"only\" the infoview that does not work: hovering over stuff shows what would normally appear in the infoview.</p>",
        "id": 440732106,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716749247
    },
    {
        "content": "<p>If a reboot doesn't solve it, I'm out of ideas</p>",
        "id": 440732217,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1716749371
    },
    {
        "content": "<p>Ok, that is what I tried and restarting my computer fixed it!  Thanks!</p>",
        "id": 440732290,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716749431
    },
    {
        "content": "<p>The next time you run into this, try <code>killall code</code> before restarting. This is unfortunately one of those <a href=\"https://github.com/microsoft/vscode/issues/125993\">long-standing issues</a> related to webviews in VS Code. See also <a href=\"https://stackoverflow.com/questions/67698176/error-loading-webview-error-could-not-register-service-workers-typeerror-fai\">https://stackoverflow.com/questions/67698176/error-loading-webview-error-could-not-register-service-workers-typeerror-fai</a>..</p>",
        "id": 440732870,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1716750118
    },
    {
        "content": "<p>darn it, sorry Damiano! I should have suggested that too!</p>",
        "id": 440736790,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1716753971
    },
    {
        "content": "<p>Marc, thanks for the advice and the links: I'll try <code>killall code</code> next time.</p>",
        "id": 440742515,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716759573
    },
    {
        "content": "<p>I don't know if this is related, but I have also observed that VSCode seems to have some bad interactions with Firefox, more so than with Chrome.  These issues though are hard to reproduce.  I will see if killing all code processes works there too.</p>",
        "id": 440742623,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716759670
    }
]