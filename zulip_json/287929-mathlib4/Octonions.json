[
    {
        "content": "<p>Anyone yet tried formalising octonions in Lean? I might like to try doing that as an exercise.</p>\n<p>Why are they interesting you may ask? </p>\n<ul>\n<li>They are related to the exceptional lie groups. e.g. G2 is the automorphism group of the algebra</li>\n<li>They can be used to construct the exceptional Jordan Algebra </li>\n<li>Is related to the 7 dimensional cross product</li>\n<li>Can be used to construct the Freudenthal magic square</li>\n</ul>\n<p>Are there any pitfalls you can see? For example they are non-associative (a<em>b)</em>c != a<em>(b</em>c) in general.</p>\n<p>I wonder if it is best to use the Cayley–Dickson construction. I think probably not.</p>\n<hr>\n<p>On a different note. Looking at the Quaternion functions in Lean there seems to be a separate function for each imaginary part e.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">QuaternionAlgebra</span><span class=\"bp\">.</span><span class=\"n\">sub_imI</span>\n<span class=\"n\">QuaternionAlgebra</span><span class=\"bp\">.</span><span class=\"n\">sub_imJ</span>\n<span class=\"n\">QuaternionAlgebra</span><span class=\"bp\">.</span><span class=\"n\">sub_imK</span>\n</code></pre></div>\n<p>So when doing the octonions this will be 7 functions. Is this really the most efficient API? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 444822094,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718421315
    },
    {
        "content": "<p>cayley-dickson seems like a much more efficient route here</p>",
        "id": 444823146,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718422295
    },
    {
        "content": "<p>Yes, although it does kind of artificially split the octonion into two sets of 4 so breaks a bit of the symmetry. But it's maybe that doesn't matter.</p>",
        "id": 444823242,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718422388
    },
    {
        "content": "<p>I'm not sure I would call that breaking the symmetry. S^2 is a subgroup of the symmetries...</p>",
        "id": 444823335,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718422483
    },
    {
        "content": "<p>Judging by <a href=\"https://arxiv.org/pdf/math/0105155.pdf\">Baez, J. (2002). The octonions</a>, Cayley-Dickson construction is quite natural, and such a inductive construction should help the proofs in principle.</p>\n<p>As for the quaternion algebra construction approach in Lean, I've experiment it a while ago, and I seem to have difficulty generalize it to, say, octonion, or Dirac algebra. The approach seems to be very specific to quaternions.</p>",
        "id": 444825959,
        "sender_full_name": "Utensil Song",
        "timestamp": 1718424663
    },
    {
        "content": "<p>I think one way would be to store the octonion as a struct with 8 separate numbers. But then have a function that converts that into two quaternions to do the multiplications etc. And vice versa. </p>\n<p>I wonder how much work it would be to do a proof that G2 is automorphism group for octonions. It looks like you can define <a href=\"https://arxiv.org/pdf/2112.04570\">exceptional lie groups already</a>. The <a href=\"https://mathoverflow.net/questions/386850/why-is-the-automorphism-group-of-the-octonions-g-2-instead-of-so7\">proofs I've seen</a> seem to rely on the fact that G2 is the only simple lie algebra of dimension 14. Would be quite a challenge <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span>(well I suppose unless you actually defined G2 that way)  But I'm thinking too far ahead...</p>",
        "id": 444828727,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718427107
    },
    {
        "content": "<p>I did Cayley-Dickson long ago in Lean 3. It is easy, fun, and the right way to do the octonions. :-)</p>",
        "id": 444836282,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718434462
    },
    {
        "content": "<p>Just to throw a spanner into the works, the group scheme G2 has a model over Z and in particular it works in characteristic 2. Lean's definition of quaternions isn't good in characteristic 2, there are quaternion algebras in characteristic 2 which we can't express in lean with the current constructor because we demand <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>i</mi><mn>2</mn></msup><mo>=</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">i^2=r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> rather than the more general <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><mi>s</mi><mi>i</mi><mo>=</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">i^2+si=r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span>.</p>",
        "id": 444836642,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1718434864
    },
    {
        "content": "<p>This comment also applies to the theory of quadratic algebras which we have, which has notation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">[</mo><msqrt><mi>d</mi></msqrt><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\Z[\\sqrt{d}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1822em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mopen\">[</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-2.8922em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1078em;\"><span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> so you can guess the definition. Bourbaki's constructor for quadratic algebras allows <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>i</mi><mn>2</mn></msup><mo>+</mo><mi>s</mi><mi>i</mi><mo>=</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">i^2+si=r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> and were it to do octonions I'm sure it would also allow this level of generality. Which will make the algebra much worse.</p>",
        "id": 444836849,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1718435072
    },
    {
        "content": "<p>Marty Weissman has a very brief treatment <a href=\"http://martyweissman.com/SAGE13Talk.pdf\">in pages 1 and 3 of this 2009 talk</a>.  Naturally, many details need to be filled in.</p>",
        "id": 444838339,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1718436567
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> supervised a project during the Machine Checked Mathematics conference at the Lorentz Center last July in which the Octonions were constructed as a star algebra via Cayley-Dickson. I’m afraid I don’t know what happened to the code (which was Lean 4) but it must be somewhere!</p>",
        "id": 444844840,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1718442596
    },
    {
        "content": "<p>Talking of exceptional objects, just thought I'd share this mind map of how some of these things fit together. Not sure all the arrows are correct but, it gives a nice overview:<br>\n<a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Exceptionalmindmap2.png/900px-Exceptionalmindmap2.png\">https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Exceptionalmindmap2.png/900px-Exceptionalmindmap2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Exceptionalmindmap2.png/900px-Exceptionalmindmap2.png\"><img src=\"https://uploads.zulipusercontent.net/ea8620f0ccbfa1304c0dbc78d7f93188879a3514/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f7468756d622f372f37632f457863657074696f6e616c6d696e646d6170322e706e672f39303070782d457863657074696f6e616c6d696e646d6170322e706e67\"></a></div><p>Which reminds me that do we have <a href=\"https://en.wikipedia.org/wiki/Hurwitz_quaternion\">Hurwitz quaternions</a> in Lean yet?</p>",
        "id": 444884148,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718470748
    },
    {
        "content": "<p>In that chart, the \"monster vertex algebra\" (top left) is more or less the same thing as \"monster CFT\" (bottom right).</p>",
        "id": 444884905,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1718471184
    },
    {
        "content": "<p>Interesting. Yeah I wouldn't trust the chart completely. But more as an aid to see what kind of things are missing.  Mind you some of the things at the top would be related to the ones at the bottom via compactification. e.g. <a href=\"https://en.wikipedia.org/wiki/Monstrous_moonshine\">Monstrous Moonshine</a> and all that.</p>\n<p>Another thing that might be missing in Lean is <a href=\"https://en.wikipedia.org/wiki/Eisenstein_integer\">Eiseinstein integers</a>. <code>Z[ω:ω^3=1]</code>. Wonder if that should be it's own type as we already have GaussianInt. Not sure the best way to formalise that is though <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 444885539,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718471577
    },
    {
        "content": "<p>We've got Hurwitz quaternions in flt</p>",
        "id": 444887300,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1718472557
    },
    {
        "content": "<p>Feel free to upstream them if you need them!</p>",
        "id": 444896787,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1718477678
    },
    {
        "content": "<p>Here's my script for doing evaluations with octonions <strong>[Updated 17 June]</strong> Excuse my code, I am just learning.</p>\n<p>I just did it the hard way instead of using quaternions. I used the multiplication ordering <code>e[n]*e[n+1]=e[n+3]</code> since this is a way to have a cyclic ordering. (Possibly there is a way to shorten the script making use of cyclic ordering?)</p>\n<p><del>I'm not sure how to define addition and multiplication so it works with both Rat and Int types. Is there a way to do union types?</del> <del>Also I can't do the O notation for octonions</del> <span aria-label=\"smiling face with tear\" class=\"emoji emoji-1f972\" role=\"img\" title=\"smiling face with tear\">:smiling_face_with_tear:</span></p>\n<p>Maybe I'll try and do a proof that this is equivalent to the Cayley-Dickson construction <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span>....</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n\n<span class=\"cm\">An definition of the Octonion Algebra over field F denoted by 𝕆[F]</span>\n<span class=\"cm\">Includes proof of Cayley Dickson construction</span>\n\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Quaternion</span>\n\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">re</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e5</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e6</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">e7</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Alternertive names: e1=i, e2=j, e3=Ii, e4=k, e5=Ik, e6=Ij, e7=I  -/</span>\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> Notation and output -/</span>\n\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"𝕆\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"𝕆[\"</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"s2\">\"]\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">F</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"({repr q.re} + {repr q.e1}*e1 + {repr q.e2}*e2 + {repr q.e3}*e3 + {repr q.e4}*e4 + {repr q.e5}*e5 + {repr q.e6}*e6 + {repr q.e7}*e7)\"</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Construct from a pair of Quaternions-/</span>\n<span class=\"c\">/-</span><span class=\"cm\"> Many equivalent permuations are possible (which form a group)-/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"o\">,</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">   </span><span class=\"bp\">⟨</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imI</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imJ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imI</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imJ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">quatFromOct</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">,</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"o\">,</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Prove these are inverses -/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">quatFromOctInverseOctFromQuat</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">quatFromOct</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"n\">B</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">octFromQuat</span><span class=\"o\">,</span><span class=\"n\">quatFromOct</span><span class=\"o\">]</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">octFromQuatInverseQuatFromOct</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">:</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]),</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">quatFromOct</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">quatFromOct</span><span class=\"o\">,</span><span class=\"n\">octFromQuat</span><span class=\"o\">]</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> boolean equality -/</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">bequal</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> conjugation-/</span>\n\n<span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> should it be protected? -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:={</span>\n<span class=\"w\">    </span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n<span class=\"w\">    </span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span>\n<span class=\"w\">    </span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"w\">    </span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span>\n<span class=\"w\">    </span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span>\n<span class=\"w\">    </span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span>\n<span class=\"w\">    </span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"w\">    </span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n<span class=\"o\">}</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:={</span>\n<span class=\"w\">    </span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n<span class=\"w\">    </span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span>\n<span class=\"w\">    </span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"w\">    </span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span>\n<span class=\"w\">    </span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span>\n<span class=\"w\">    </span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span>\n<span class=\"w\">    </span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"w\">    </span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n<span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:={</span>\n<span class=\"w\">    </span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n<span class=\"w\">    </span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span>\n<span class=\"w\">    </span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"w\">    </span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span>\n<span class=\"w\">    </span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span>\n<span class=\"w\">    </span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span>\n<span class=\"w\">    </span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"w\">    </span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n<span class=\"o\">}</span>\n\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> This is using a cyclic order of multiplication such that e[n]*e[n+1]=e[n+3]    -/</span>\n<span class=\"c\">/-</span><span class=\"cm\"> Therefore a subgroup of quaternions could be using a+b*e1+c*e2+d*e4 for example  -/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n\n<span class=\"w\">    </span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span>\n<span class=\"w\">    </span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span>\n<span class=\"w\">    </span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span>\n<span class=\"w\">    </span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"w\">    </span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n<span class=\"w\">    </span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span>\n<span class=\"w\">    </span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"o\">}</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">scale</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]):</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n<span class=\"w\">    </span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span>\n<span class=\"w\">    </span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"w\">    </span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span>\n<span class=\"w\">    </span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span>\n<span class=\"w\">    </span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span>\n<span class=\"w\">    </span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"w\">    </span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n<span class=\"o\">}</span>\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> overload the operators -/</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">add</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Sub</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">sub</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mul</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">SMul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">scale</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">BEq</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">beq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">bequal</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Star</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">star</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">StarRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">reciprocal</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">StarRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">scale</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span>\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> Proofs -/</span>\n\n<span class=\"sd\">/-- do I really have to do this? --/</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mul_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">])</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span>\n<span class=\"bp\">⟩</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Proof of Cayley Dickson -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cayleyDickson</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">],</span>\n<span class=\"w\">  </span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">octFromQuat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">octFromQuat</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"c\">/-</span><span class=\"cm\"> Q.E.D -/</span>\n\n\n<span class=\"c\">/-</span><span class=\"cm\">  tests -/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e5</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e6</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e7</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"bp\">⟩</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">:</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"n\">Rat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">reciprocal</span><span class=\"w\"> </span><span class=\"n\">q</span>\n\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\">  e4   -/</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\">  -e4  -/</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">e2</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> -e6 -/</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">e3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> +e6  -/</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> more tests -/</span>\n\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Neg</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"({repr q.re} + {repr q.imI}*I + {repr q.imJ}*J + {repr q.imK}*K)\"</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">:</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">h</span><span class=\"bp\">⟩</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">:</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]]:=</span><span class=\"bp\">⟨</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"o\">,</span><span class=\"n\">e1</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 444900826,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718480120
    },
    {
        "content": "<p>Note you don't need to link to the web editor like that, Zulip inserts the link automatically if you make a code block</p>",
        "id": 444900948,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718480186
    },
    {
        "content": "<p>OK, now I want to do my first proof on octonions. To prove that the quaternions are a sub-algbera. Here's my starting point (not including the previous definition of octonions):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Quaternion</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">toOctonion</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Oct</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">=&gt;⟨</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imI</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imJ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">⟩</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> some checks-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"bp\">⟩</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> The proof-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">qSubAlgebra</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">toOctonion</span><span class=\"o\">]</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I'm stuck here because <code>simp[Octonion.mul]</code> doesn't work</p>",
        "id": 444912192,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718486652
    },
    {
        "content": "<p>Are octonions an example of a skew monoid algebra <a href=\"https://github.com/leanprover-community/mathlib4/pull/10541\">#10541</a>? I guess the quaternions must be.</p>\n<p>A docstring there says \"The associativity of the skewed multiplication depends on the <code>[MulSemiringAction G k]</code> instance\" so I think the construction can produce non-associative algebras. For quaternions we'd use <code>G = ℤˣ × ℤˣ</code> and for octonions <code>ℤˣ × ℤˣ × ℤˣ</code> (replace <code>ℤˣ</code> by <code>ZMod 2</code> if we are to introduce <code>SkewAddMonoidAlgebra</code> ...)</p>\n<p>By the way FLT3 has the <a href=\"https://github.com/riccardobrasca/flt3/blob/6dd0a35b8c5af39113b355ac365ef5682b0717a4/FLT3/FLT3.lean#L23\">Eisenstein integers</a>, but they don't fix a particular model. (And I think you mean <code>ℤ[ω]</code> not <code>ℝ[ω]</code>.)</p>",
        "id": 444916902,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1718489950
    },
    {
        "content": "<p>OK. With the help of ChatGPT giving some tips, I solved it. But I'm not too happy with the proof. Since I had to write a big lemma which basically is a copy-and-paste of the original definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- do I really have to do this? --/</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">mul_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\">    </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"bp\">*</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span>\n<span class=\"bp\">⟩</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> The proof-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">qSubAlgebra</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">toOctonion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">toOctonion</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"c\">/-</span><span class=\"cm\"> Q.E.D -/</span>\n</code></pre></div>",
        "id": 444919621,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718492676
    },
    {
        "content": "<p>Here is my proof of Cayley-Dickson for my construction:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">pairToOct</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Oct</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;⟨</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imI</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imJ</span><span class=\"o\">,</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">imK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imJ</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imK</span><span class=\"o\">,</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">imI</span><span class=\"bp\">⟩</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> The proof-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cayleyDickson</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">:</span><span class=\"n\">ℍ</span><span class=\"o\">[</span><span class=\"n\">ℚ</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">pairToOct</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">pairToOct</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">pairToOct</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"n\">pairToOct</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"c\">/-</span><span class=\"cm\"> Q.E.D -/</span>\n</code></pre></div>\n<p>Does this count as a proof? I haven't really shown that pairToOct keeps the same degrees of freedom.</p>\n<p>Any feedback and tips on how to improve these proofs welcome <span aria-label=\"hug\" class=\"emoji emoji-1f917\" role=\"img\" title=\"hug\">:hug:</span> I'm still learning.</p>",
        "id": 444923091,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718496575
    },
    {
        "content": "<p>I'd guess those <code>linarith</code> could be replaced by <code>ring</code> which is presumably faster</p>",
        "id": 444925009,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1718498698
    },
    {
        "content": "<p>Yep. Much nicer. </p>\n<p>Is that big <code>Octonion.mul_eq</code> really necessary? Seems a bit unnecessary as it's proving a tautology.</p>",
        "id": 444925199,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718498946
    },
    {
        "content": "<p>My strategy to prove <code>G2</code> is the automorphism group is as follows using a brute force approach:</p>\n<ul>\n<li>Create a vector <code>E=(e1,e2,e3,e4,e5,e6,e7)</code> of the imaginary components. </li>\n<li>For any small automorphism G <code>(a+b.E + δb.G.E)*(c+d.E + δd.G.E) = (e+f.E + δf.E) + O(δ^2)</code></li>\n<li>Equating terms should give a restriction on the matrix G of the form<code>G[a,m]f[m,b,c]  + G[b,m]f[m,c,a] + G[c,m]f[m,a,b] = 0</code></li>\n<li>Then using some linear solver it may be possible to show that G has 14 independent components</li>\n<li>Then (somehow) prove it is irreducible</li>\n<li>Then something else</li>\n<li>QED</li>\n</ul>\n<p>Since G2 is not already in Lean (?) all we can do at the moment probably the best we can do is prove the automorphism group must have 14 generators.</p>",
        "id": 444930258,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718504457
    },
    {
        "content": "<p><a href=\"https://plmlab.math.cnrs.fr/nuccio/octonions\">This</a> repo contains what had been done during the Leiden workshop. It follows Cayley-Dickson, and I agree this is the right way to go. In particular, I think that we do not need octonions over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> but over more general algebras over arbitrary fields.</p>",
        "id": 444969270,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718538303
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"725689\">@Mr Proof</span> I would be very happy to see Octonions in Mathlib, so please do not hesitate to ping me if you have some code to share before/during a mathlib PR.</p>",
        "id": 444977474,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718545386
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> I'm still learning so my code is not the best.<br>\nTalking of arbitrary fields. How could I change this line so it accepts any algebraic field not just the rationals:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:={</span>\n</code></pre></div>\n<p>I need to change it to a general ring.</p>",
        "id": 444979683,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718547468
    },
    {
        "content": "<p>Can you provide a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 444979754,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718547532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Octonions/near/444979754\">said</a>:</p>\n<blockquote>\n<p>Can you provide a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>\n</blockquote>\n<p>Yes, there is a full example 16th post down from the top.</p>",
        "id": 444979880,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718547636
    },
    {
        "content": "<p>So, what you can do is</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion.equal</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n</code></pre></div>\n<p>to specify that you're working with octonions over a type <code>α</code> that you require to be a field. That being said, this definition is a bit bizarre and the way we'd do this is mathlib is somewhat different, but at least for your question of <code>ℚ</code> vs an arbitrary field, this is the way to go.</p>",
        "id": 444987659,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718553137
    },
    {
        "content": "<p><del>don't you rather just want to use <code>@[ext]</code> at the definition of your structure?</del> i misunderstood what <code>Octonion.equal</code> means, but still do use <code>@[ext]</code> at the start of your structure.</p>",
        "id": 445084415,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1718614334
    },
    {
        "content": "<p>the way we'd do that in mathlib would probably be something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">equal</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e1</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e2</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e3</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e4</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e5</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e6</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">e7</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">e7</span>\n</code></pre></div>",
        "id": 445086186,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1718614921
    },
    {
        "content": "<p>note the use of <code>Prop</code> rather than <code>Bool</code></p>",
        "id": 445086265,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1718614945
    },
    {
        "content": "<p>Surely we wouldn't have that at all, and would instead write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Octonion</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 445097909,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718619002
    },
    {
        "content": "<p>i was confused too, but note the absence of <code>p.re = q.re</code></p>",
        "id": 445098110,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1718619078
    },
    {
        "content": "<p><code>equal</code> is indeed pretty much a misnomer in this case</p>",
        "id": 445098379,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1718619147
    },
    {
        "content": "<p>I agree with <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> and <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span> 's comments, but I had the feeling that the OP requested help on more \"fundamental\" issues.</p>",
        "id": 445118051,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718626320
    },
    {
        "content": "<p>Yes, perhaps I have my names wrong. I was using the boolean version of equals. I probably need a propositional version as well (?)  I am just doing this as an exercise to practice with Lean. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">BEq</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">beq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">equal</span>\n</code></pre></div>\n<p>I've updated the <a href=\"#narrow/stream/287929-mathlib4/topic/Octonions/near/444900826\">script recently</a>.  (16th post from the top if the link doesn't work). Do you think this is something useful for Lean or would it have to be totally rewritten?</p>",
        "id": 445170778,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718640662
    },
    {
        "content": "<p>You get the propositional version for free</p>",
        "id": 445171025,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718640722
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725689\">Mr Proof</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Octonions/near/445170778\">said</a>:</p>\n<blockquote>\n<p>Yes, perhaps I have my names wrong. I was using the boolean version of equals. I probably need a propositional version as well (?)  I am just doing this as an exercise to practice with Lean. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">BEq</span><span class=\"w\"> </span><span class=\"n\">𝕆</span><span class=\"o\">[</span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">beq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Octonion</span><span class=\"bp\">.</span><span class=\"n\">equal</span>\n</code></pre></div>\n<p>I've updated the <a href=\"#narrow/stream/287929-mathlib4/topic/Octonions/near/444900826\">script recently</a>.  (16th post from the top if the link doesn't work). Do you think this is something useful for Lean or would it have to be totally rewritten?</p>\n</blockquote>\n<p>We will certainly be happy to help you, and in particular consider that using <code>Beq</code> is normally not very encouraged (see the doc at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=BEq#doc\">docs#BEq</a>). That being said, can I gently remind you that we <a href=\"https://leanprover-community.github.io/meet.html\">encourage users</a> to use their real names rather than nicknames?</p>",
        "id": 445191725,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1718647054
    },
    {
        "content": "<p>Perhaps I just have an apposite aptronym. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span>I'll consider that of course... but then what is a real name anyway. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 445193518,
        "sender_full_name": "Mr Proof",
        "timestamp": 1718647654
    }
]