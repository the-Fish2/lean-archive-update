[
    {
        "content": "<p>Please have a look at <a href=\"https://github.com/leanprover-community/mathlib4/branches/stale\">https://github.com/leanprover-community/mathlib4/branches/stale</a><br>\nIf you see your old branch here and you know you aren't going to need it anymore, then please delete it.</p>\n<p>E.g., I suggest that we remove <a href=\"https://github.com/leanprover-community/mathlib4/tree/port-status\">branch#port-status</a> and <a href=\"https://github.com/leanprover-community/mathlib4/tree/add-src-headers\">branch#add-src-headers</a> by <span class=\"user-mention\" data-user-id=\"110032\">@Reid Barton</span></p>",
        "id": 412480006,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705037922
    },
    {
        "content": "<p>Okay, I deleted &gt;20 of mine!</p>",
        "id": 412480639,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1705038385
    },
    {
        "content": "<p>Why should we do this?</p>",
        "id": 412481206,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1705038763
    },
    {
        "content": "<p>E.g., if we setup gc for cache (I hope, we'll do it), then it will store oleans for all live branch heads.</p>",
        "id": 412481263,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705038815
    },
    {
        "content": "<p>What is the most efficient way to delete a branch?</p>",
        "id": 412488443,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1705043275
    },
    {
        "content": "<p>In web interface: there is a trash bin sign on the right.</p>",
        "id": 412489112,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705043660
    },
    {
        "content": "<p>From command line: <code>git push origin :my-branch-name</code></p>",
        "id": 412489128,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705043678
    },
    {
        "content": "<p>If you're using some Git GUI (e.g., VS Code integration), then it depends on the GUI. In Emacs Magit, you can list branches, then press <code>k</code> on the branch you want to delete.</p>",
        "id": 412489310,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705043780
    },
    {
        "content": "<p>Is there any point in keeping branches corresponding to closed PRs?</p>",
        "id": 412551421,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1705068570
    },
    {
        "content": "<p>Right now I can't think of a concrete reason to keep them. But my gut says that it's safer to keep them for 2~4 weeks.</p>",
        "id": 412551922,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1705068758
    },
    {
        "content": "<p>If the PR is on a repo that others may be using, the hash may occur in peoples lakefiles; deleting branches too quickly can cause confusion: <a href=\"https://github.com/leanprover/lean4/issues/3167#issuecomment-1888717265\">https://github.com/leanprover/lean4/issues/3167#issuecomment-1888717265</a></p>",
        "id": 412552210,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1705068861
    },
    {
        "content": "<p>From a technical PoV I would wager that identifying stale branches would be far from the hardest part of cache GC, though it would certainly help if they weren't there at all</p>",
        "id": 412552562,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1705068986
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Stale.20branches/near/412551421\">said</a>:</p>\n<blockquote>\n<p>Is there any point in keeping branches corresponding to closed PRs?</p>\n</blockquote>\n<p>bors deletes these by default anyway</p>",
        "id": 412694916,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1705140307
    },
    {
        "content": "<p>So probably you're seeing local branches on your local machine that are already gone on github</p>",
        "id": 412694948,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1705140346
    },
    {
        "content": "<p>No, I'm looking at GitHub only here.</p>",
        "id": 412723262,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1705164350
    },
    {
        "content": "<p>Actually I'm fully confused by what I see here:<br>\n<a href=\"/user_uploads/3121/1e4SsiPKvMZ1LrVp57j_Z729/image.png\">image.png</a><br>\nI am pretty sure I didn't update any branch yesterday.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1e4SsiPKvMZ1LrVp57j_Z729/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/1e4SsiPKvMZ1LrVp57j_Z729/image.png\"></a></div>",
        "id": 412723361,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1705164431
    },
    {
        "content": "<p>Could it be that you created the token that the bot is using? Sometimes github does such kind of misattribution</p>",
        "id": 412723701,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1705164835
    },
    {
        "content": "<p>I think the bot might be reviving those branches?</p>",
        "id": 412724086,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1705165191
    },
    {
        "content": "<p>This is probably a question for <span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span></p>",
        "id": 412731554,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1705170544
    },
    {
        "content": "<p>If you look at <a href=\"https://github.com/leanprover-community/mathlib4/pull/7845\">#7845</a>, it says:<br>\n<a href=\"/user_uploads/3121/kxHOo5x3-YdDUhvqj3jxYLYf/7845.png\">7845.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kxHOo5x3-YdDUhvqj3jxYLYf/7845.png\" title=\"7845.png\"><img src=\"/user_uploads/3121/kxHOo5x3-YdDUhvqj3jxYLYf/7845.png\"></a></div>",
        "id": 412758989,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1705191012
    },
    {
        "content": "<p>(That is the PR associated to lean-pr-testing-2732, which is otherwise long quiescent.)</p>",
        "id": 412759018,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1705191037
    },
    {
        "content": "<p>(Patrick did make the final commit on that branch back in October, which explains why it showed up for him in the first place, but presumably not as \"yesterday\".)</p>",
        "id": 412759074,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1705191071
    },
    {
        "content": "<p>Is it possible that you pushed all your branches, restoring those that were deleted on the server?</p>",
        "id": 412759079,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1705191072
    },
    {
        "content": "<p>Ah, maybe I deleted it yesterday and then I wasn't sure so I restored it. But it doesn't explain why it wasn't automatically deleted long ago.</p>",
        "id": 412767601,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1705195620
    },
    {
        "content": "<p>Only branches merged with bors are automatically deleted</p>",
        "id": 412905196,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1705306612
    },
    {
        "content": "<p>That branch was closed and not merged</p>",
        "id": 412905217,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1705306624
    }
]