[
    {
        "content": "<p>Sometimes I am browsing a page of mathlib4 docs, say <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Surreal/Basic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Surreal/Basic.html</a>, and think \"I wonder what other files there are under <code>Mathlib/SetTheory/Surreal</code>”. The immediate thing I try is to strip the final filename off the url:</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Surreal\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Surreal</a></p>\n<p>But this link doesn't work: it gives a 404 page.</p>\n<p>Would it be possible to make directory links show something useful, to enable this kind of browsing?</p>",
        "id": 446249936,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1719047745
    },
    {
        "content": "<p>If mathlib had Lean files of this name, like for example the Lean compiler does this would work. For example <a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Elab.html\">https://leanprover-community.github.io/mathlib4_docs/Lean/Elab.html</a> (the file just happens to be empty but if you check the imports/imported by on the side you will see there is some stuff there.</p>",
        "id": 446250442,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719047950
    },
    {
        "content": "<p>The tactic directory does even have such a file: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic.html</a></p>",
        "id": 446250552,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719047995
    },
    {
        "content": "<p>Even just floating to the top of the page the  part of the left panel with the folder structure so that you can then see and click the files in the folder could be useful.</p>",
        "id": 446250650,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048020
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Mathlib.20directory.20urls.20aren't.20implemented/near/446250650\">said</a>:</p>\n<blockquote>\n<p>Even just floating to the top of the page the  part of the left panel with the folder structure so that you can then see and click the files in the folder could be useful.</p>\n</blockquote>\n<p>Yep, just a file list like that would be great.</p>",
        "id": 446251094,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1719048187
    },
    {
        "content": "<p>Maybe doc-gen could parse import statements and include links to the explicitly imported files.</p>",
        "id": 446251494,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048350
    },
    {
        "content": "<p>It already does this</p>",
        "id": 446251571,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719048368
    },
    {
        "content": "<p>Oh, where?</p>",
        "id": 446251588,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048380
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/Pgrcqg8OHJ1EKyx_xYvIUaqu/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Pgrcqg8OHJ1EKyx_xYvIUaqu/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/Pgrcqg8OHJ1EKyx_xYvIUaqu/image.png\"></a></div>",
        "id": 446251589,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719048383
    },
    {
        "content": "<p>on every page on the right side</p>",
        "id": 446251596,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719048388
    },
    {
        "content": "<p>Ah, I had never noticed this!</p>",
        "id": 446251666,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048410
    },
    {
        "content": "<p>Would it be possible to reproduce browsing like <a href=\"https://github.com/leanprover-community/mathlib4/tree/23725d3c75b6d2eca0ec17d66cdc65ea9b924b47/Mathlib/SetTheory/Game\">here</a> where clicking on a file takes you to the doc-gen for the file?</p>",
        "id": 446252056,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048662
    },
    {
        "content": "<p>(And by \"would it be possible\" I meant \"is it easy to achieve\"!)</p>",
        "id": 446252086,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048700
    },
    {
        "content": "<p>(I guess that this is exactly what Geoffrey had asked about at the beginning of this thread, if I understood correctly.)</p>",
        "id": 446252482,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719048994
    },
    {
        "content": "<p>I think printing arbitrary directories as HTML pages is a misrepresentation of what's happening at the Lean level.<br>\nIf you have a <code>lean</code> file of the same name as the directory it can actually be <code>import</code>ed and it can import arbitrary Lean files and do definitions on its own. If you do not have such a file then there is also nothing to <code>import</code> at that point. Currently the web pages are in 1:1 correspondence with \"stuff that you can import\".</p>\n<p>The decision not to show the import tree on the left up to that file when you visit a page was made for the following reason: People also want their import tree state to persist across multiple files. That means if you switch through a few files in rapid succession your left side would look like complete haywire since all of the paths to that file in the tree would be kept open. We can change that to only automatically showing the tree up to the current path but I have the feeling that people will complain about this again because they loose the old behavior.</p>",
        "id": 446252490,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719049007
    },
    {
        "content": "<p>And if a directory does have a file on its own that is signified by the file button next to it:<br>\n<a href=\"/user_uploads/3121/aCrvm0BK-7NC2n_-NIvPPm9W/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/aCrvm0BK-7NC2n_-NIvPPm9W/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/aCrvm0BK-7NC2n_-NIvPPm9W/image.png\"></a></div><p>So as you can see for example <code>ImportGraph</code> does not have a file associated with it while all the other projects do.</p>",
        "id": 446252531,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719049068
    },
    {
        "content": "<p>Ok, in fact, that browsing method with the expandable triangles is not my favourite anyway.  For me, having a \"github like\" style browsing of folders with final file-links to doc-gen files would be an improvement.</p>",
        "id": 446252893,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719049423
    },
    {
        "content": "<p><a href=\"https://doc.rust-lang.org/stable/std/alloc/index.html\">https://doc.rust-lang.org/stable/std/alloc/index.html</a> like this?</p>",
        "id": 446252954,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1719049482
    },
    {
        "content": "<p>Not really, more like <a href=\"https://github.com/leanprover-community/mathlib4/tree/23725d3c75b6d2eca0ec17d66cdc65ea9b924b47/Mathlib/SetTheory\">this</a>, except happening in doc-gen, so that the files are linked to the doc-gen page, instead of the source code.</p>",
        "id": 446253067,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719049569
    },
    {
        "content": "<p>(In fact, I still have not really understood how to navigate folders in <a href=\"https://doc.rust-lang.org/stable/std/alloc/index.html\">https://doc.rust-lang.org/stable/std/alloc/index.html</a>.)</p>",
        "id": 446253103,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719049626
    },
    {
        "content": "<p>Basically, reproducing the mathlib folder structure in doc-gen.  As Geoffrey points out, this <em>appears</em> to already be the case by looking at the urls for the pages, but the \"folder\" urls do not work.</p>",
        "id": 446253208,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1719049729
    }
]