[
    {
        "content": "<p>Should we have a linter against global notation? Of course it could be deactivated when needed. I just found <a href=\"https://github.com/leanprover-community/mathlib4/pull/10043\">#10043</a> that introduced an extremely generic notation (the infix operator <code>^*</code>) to use it exactly twice in Mathlib if I’m not mistaken. Clearly this is a failure of the reviewing process but linters should be here to help reviewers.</p>",
        "id": 442616403,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717531782
    },
    {
        "content": "<p>We’ll see in <a href=\"https://github.com/leanprover-community/mathlib4/pull/13518\">#13518</a> whether CI agrees this notation was not used elsewhere.</p>",
        "id": 442616838,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717531935
    },
    {
        "content": "<p>I mean surely global notation is usually fine?</p>",
        "id": 442623753,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1717534227
    },
    {
        "content": "<p>Maybe there would be too many nolints. I’m really not sure what to do. Maybe we need some GitHub bot to detect that word notation and post a message reminding reviewers to check whether the notation is global and reasonable.</p>",
        "id": 442624111,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717534339
    },
    {
        "content": "<p>In the mean time CI confirmed that global <code>^*</code> was used exactly twice in Mathlib. I would appreciate a quick merge of <a href=\"https://github.com/leanprover-community/mathlib4/pull/13518\">#13518</a> so that I can finish updating GlimpseOfLean.</p>",
        "id": 442625897,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717534902
    },
    {
        "content": "<p>I do think in general it would be nice for CI to post a summary of a PR. A list of theorems added and/or deleted, notations added, change in the import graph, etc... Basically, anything that would make it easier for reviewers to spot suspicious changes.</p>",
        "id": 442658341,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1717546328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"127136\">@Alex J. Best</span> had a nice prototype in January.</p>",
        "id": 442672368,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717552050
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"560559\">Richard Osborn</span> <a href=\"#narrow/stream/287929-mathlib4/topic/global.20notation.20linter/near/442658341\">said</a>:</p>\n<blockquote>\n<p>I do think in general it would be nice for CI to post a summary of a PR. A list of theorems added and/or deleted, notations added, change in the import graph, etc... Basically, anything that would make it easier for reviewers to spot suspicious changes.</p>\n</blockquote>\n<p>Each PR has a CI step called <code>summarize-declarations</code> that does a part of that.</p>\n<p>A more verbose output, such as <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/9371348866/attempts/1#summary-25800435635\">this</a> and a more compact one that you can get by adding the label <code>move-decls</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/13034#issuecomment-2130310118\">the same PR as an example</a>).</p>",
        "id": 442696511,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1717564272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/global.20notation.20linter/near/442672368\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"127136\">Alex J. Best</span> had a nice prototype in January.</p>\n</blockquote>\n<p>I would even say that it was progressing beyond the prototype stage. But I no longer have time to work on it. If anyone, or the community wants to adopt <a href=\"http://github.com/alexjbest/leaff\">github.com/alexjbest/leaff</a> that would make me very happy</p>",
        "id": 442737981,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1717580120
    },
    {
        "content": "<p>Speaking of PRs introducing global notation... <a href=\"https://github.com/leanprover-community/mathlib4/pull/11142\">#11142</a></p>",
        "id": 443098902,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1717689602
    },
    {
        "content": "<p>Thanks for noticing. All those notations should definitely be scoped.</p>",
        "id": 443104113,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1717691058
    }
]