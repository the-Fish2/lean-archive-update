[
    {
        "content": "<p>I'm looking at the definitions and lemmas deprecated since 2022. In some cases, it's not clear what's the substitute. E.g., what about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=castPosNum#doc\">docs#castPosNum</a> and nearby definitions?</p>",
        "id": 443367126,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1717790616
    },
    {
        "content": "<p>According to <a href=\"https://github.com/leanprover-community/mathlib4/pull/607\">#607</a>, these defs are deprecated because they use <code>bit0</code> and <code>bit1</code>. I'm going to unfold <code>bit*</code> in their definitions instead of deleting them.</p>",
        "id": 443378948,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1717793894
    },
    {
        "content": "<p>Thank you for looking into this. Just as a data point: I tried simply removing these declarations - this failed; they <em>are</em> used somewhere in mathlib.</p>",
        "id": 443380733,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1717794708
    },
    {
        "content": "<p>I remember that during the port it was definitely a thing to blindly add deprecation attrs to anything using <code>bit*</code> without much thinking about whether the statement is used or not. So it may well be that your approach of avoiding to use <code>bit*</code> is completely correct and the deprecation attr may therefore be removed again?</p>",
        "id": 443390710,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1717799417
    },
    {
        "content": "<p>That sounds very reasonable to me.</p>",
        "id": 443421409,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1717819784
    },
    {
        "content": "<p>About <code>Num</code>: I started <a href=\"https://github.com/leanprover-community/mathlib4/pull/13627\">#13627</a> but marked it as <code>help-wanted</code> and <code>please-adopt</code>. The lazy way is to disable the linter in the <code>Lemmas</code> file again. The proper way is to drop all references to <code>bit0</code> and <code>bit1</code> in that file.</p>",
        "id": 443428838,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1717825960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> What do you want to happen to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=bit0#doc\">docs#bit0</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=bit1#doc\">docs#bit1</a> ? They are no longer used for numeric literals but they are used for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Num#doc\">docs#Num</a>, authored by (according to the copyright header) Leo and you. I assume that if Leo cared about it, he would move it to core, so probably you're the person who cares most about this file and its dependencies.</p>",
        "id": 444624923,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1718345555
    },
    {
        "content": "<p>you should just be able to replace <code>bit0 n</code> and <code>bit1 n</code> with <code>2*n</code> and <code>2*n+1</code> respectively. They are not used in any way in <code>Num</code> incompatibly with that</p>",
        "id": 444791422,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718399843
    },
    {
        "content": "<p>although <code>Num</code> has constructors named <code>bit0</code> and <code>bit1</code> which should be left as is</p>",
        "id": 444791465,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718399865
    },
    {
        "content": "<p>What's the right binary recursion in Lean 4?</p>",
        "id": 444791491,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1718399879
    },
    {
        "content": "<p>the same one?</p>",
        "id": 444791564,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718399904
    },
    {
        "content": "<p>IIRC <code>Nat.binaryRecOn</code> still exists</p>",
        "id": 444791584,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1718399915
    },
    {
        "content": "<p>OK</p>",
        "id": 444791699,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1718399977
    }
]