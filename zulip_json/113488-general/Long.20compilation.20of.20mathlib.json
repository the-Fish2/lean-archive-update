[
    {
        "content": "<p>It takes about 2 hours to build mathlib on my computer. I just (re)cloned MIL, and it has been 90 minutes, and I am ~75% done. Is this expected? Seems annoyingly long.<br>\n<a href=\"/user_uploads/3121/lAbRzPoTumf-eiLeyBBVp30L/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/lAbRzPoTumf-eiLeyBBVp30L/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/lAbRzPoTumf-eiLeyBBVp30L/image.png\"></a></div>",
        "id": 429492741,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1711394707
    },
    {
        "content": "<p>Did you do <code>lake exe cache get</code> like the instructions in the book say to do? (Maybe it's not super clear that it's telling you to do this, since it's in the paragraph about <code>git pull</code>, but it's in the linked instructions <a href=\"https://leanprover-community.github.io/install/project.html#working-on-an-existing-project\">here</a>)</p>",
        "id": 429493269,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1711394911
    },
    {
        "content": "<p>(It looks like this is a continuation of <a href=\"#narrow/stream/113488-general/topic/.E2.9C.94.20Long.20compile.20time/near/406711599\">this thread</a>?)</p>",
        "id": 429493573,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1711395027
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/54q1N48e-l4JHxqcOkrE-ZPD/image.png\">image.png</a><br>\nI had forgotten to run it. Now that I did, I get a bunch of errors. I suspect it's because my laptop is still trying  to compile mathlib in the background</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/54q1N48e-l4JHxqcOkrE-ZPD/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/54q1N48e-l4JHxqcOkrE-ZPD/image.png\"></a></div>",
        "id": 429494726,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1711395498
    },
    {
        "content": "<p>Yeah, it doesn't work during a build of mathlib. Turn off VS Code and try again.</p>",
        "id": 429494890,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1711395577
    },
    {
        "content": "<blockquote>\n<p>It takes about 2 hours to build mathlib on my computer. I just (re)cloned MIL, and it has been 90 minutes, and I am ~75% done. Is this expected? Seems annoyingly long.</p>\n</blockquote>\n<p>I think for many people, the answer to this question is \"I have no idea how long it takes to build mathlib, because we have the necessary infrastructure in place which means we never have to do this\". That is certainly my answer!</p>",
        "id": 429515400,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1711402538
    },
    {
        "content": "<p>At the rate I use mathlib, I would need two hours of mathlib building every 5min!</p>",
        "id": 429517061,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1711403344
    },
    {
        "content": "<p>I'm glad there's multi-threading <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 429518771,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1711404158
    },
    {
        "content": "<p>I don't quite understand these answers. What is the infrastructure that can help me with this? I had to turn off my laptop before it finished the compilation and now I am stuck waiting almost from the start.</p>",
        "id": 429531904,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1711411685
    },
    {
        "content": "<p>To be clear, I now ran <code>lake exe cache get</code> but it did not seem to do anything (downloaded 4000 files and that's it, compilation still needs to happen, it seems)</p>",
        "id": 429531990,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1711411770
    },
    {
        "content": "<p><code>lake exe cache get</code> downloads pre-built lean modules so that you don't have to compile anything. It should Just Work.</p>\n<p>What are the details of your system? Did do anything else to the repository? (Like, for example, don't do <code>lake update</code>.)</p>",
        "id": 429532689,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1711412232
    },
    {
        "content": "<p>In particular, if <code>git status</code> reports no changes relative to <code>master</code>, VS Code is closed, and you've just run <code>lake exe cache get</code>, and then <code>lake build </code> does any work, then this is a bug we want to fix urgently.</p>\n<p>(Well, maybe after asking you delete <code>.lake</code> and try again to make sure nothing really weird has happened.)</p>\n<p>(If VS Code is open as well this <em>should</em> work if VSCode is not actively building something, but this can be hard to tell so some people close VS Code every time. I don't, and just restart the server using cmd+shift+p.)</p>\n<p>For non-<code>master</code> branches, <code>lake exe cache get</code> should work as well, but it may take up to an hour after the most recent push to that branch for the .oleans to be available: but the output of <code>lake exe cache get</code> will explain if they are not available.</p>",
        "id": 429548478,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1711424176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414458\">Vasily Ilin</span> <a href=\"#narrow/stream/113488-general/topic/Long.20compilation.20of.20mathlib/near/429531990\">said</a>:</p>\n<blockquote>\n<p>To be clear, I now ran <code>lake exe cache get</code> but it did not seem to do anything (downloaded 4000 files and that's it, compilation still needs to happen, it seems)</p>\n</blockquote>\n<p>Try running <code>lake exe cache get!</code> (this worked for some participants of LftCM that were having this same issue yesterday).</p>",
        "id": 429678474,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1711466164
    }
]