[
    {
        "content": "<p><code>Mathlib.Topology.UnitInterval</code> depends on <code>Mathlib.FieldTheory.Subfield</code></p>",
        "id": 424410404,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385258
    },
    {
        "content": "<p>Is that really necessary?</p>\n<p>(Sorry, late here, and venting about slow builds...)</p>",
        "id": 424410417,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385279
    },
    {
        "content": "<p>tbf, <code>FieldTheory.Subfield</code> has actually not much to do with field theory</p>",
        "id": 424410466,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709385356
    },
    {
        "content": "<p>It should probably be under <code>Algebra.Field</code> instead</p>",
        "id": 424410514,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709385370
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/YqcWy1x1E6SYw3o7i_NWJGRl/UnitInterval.png\">UnitInterval.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/YqcWy1x1E6SYw3o7i_NWJGRl/UnitInterval.png\" title=\"UnitInterval.png\"><img src=\"/user_uploads/3121/YqcWy1x1E6SYw3o7i_NWJGRl/UnitInterval.png\"></a></div><p>Anyone think they can snip enough edges here?</p>",
        "id": 424410877,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385732
    },
    {
        "content": "<p>Presumably the target is the first edge.</p>",
        "id": 424410905,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385755
    },
    {
        "content": "<p>If anyone is interested in doing more of this:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>%<span class=\"w\"> </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>graph<span class=\"w\"> </span>--from<span class=\"w\"> </span>Mathlib.FieldTheory.Subfield<span class=\"w\"> </span>--to<span class=\"w\"> </span>Mathlib.Topology.UnitInterval<span class=\"w\"> </span>UnitInterval.png\n</code></pre></div>",
        "id": 424410929,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385772
    },
    {
        "content": "<p>Yes, it's avoidable, but I would claim it's not as insane as one would think at first</p>",
        "id": 424410945,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709385787
    },
    {
        "content": "<p>I'm happy to fix it now</p>",
        "id": 424410959,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709385804
    },
    {
        "content": "<p>The right general approach is to pick a file you love, run <code>lake exe graph --to ThatFile out.png</code>, then find something above it that you don't love, and work out how to cut it out. :-)</p>",
        "id": 424411032,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385854
    },
    {
        "content": "<p>(Alternatively you can pick a file you're less fond of, run <code>lake exe graph --from LessLovedFile out.png</code>, and then see what you can rescue from downstream of it. :-)</p>",
        "id": 424411146,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709385916
    },
    {
        "content": "<p><em>If you love it set it free, cut it down from the import tree.</em></p>",
        "id": 424412546,
        "sender_full_name": "Julian Berman",
        "timestamp": 1709387156
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/113488-general/topic/Today's.20insane.20Mathlib.20import.20dependency/near/424410945\">said</a>:</p>\n<blockquote>\n<p>Yes, it's avoidable, but I would claim it's not as insane as one would think at first</p>\n</blockquote>\n<p>Presumably the alternative is that we end up with a new topology file for every kind of subobject?</p>",
        "id": 424413665,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709387976
    },
    {
        "content": "<p>Yeah, I may have to retract the insanity of this one...</p>",
        "id": 424414047,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1709388176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Scott Morrison</span> <a href=\"#narrow/stream/113488-general/topic/Today's.20insane.20Mathlib.20import.20dependency/near/424411032\">said</a>:</p>\n<blockquote>\n<p>The right general approach is to pick a file you love, run <code>lake exe graph --to ThatFile out.png</code>, then find something above it that you don't love, and work out how to cut it out. :-)</p>\n</blockquote>\n<p>Shouldn't you also work out if cutting the edge actually makes much difference? Spending hours to reduce the depth by one isn't a very good use of time, if there are other edges that reduce it by 5 or 10</p>",
        "id": 424414068,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709388186
    },
    {
        "content": "<p>In this case, <code>FieldTheory.Subfield</code> imports only <code>Algebra.Algebra.Basic</code>, and I would guess that cutting the edge will just mean that <code>Algebra.Algebra.Basic</code> comes in via a different route</p>",
        "id": 424414089,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709388225
    },
    {
        "content": "<p>(that is, the transitive reduction when producing these graph makes it harder to tell whether an edge is important)</p>",
        "id": 424414167,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709388277
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/11104\">#11104</a></p>",
        "id": 424414211,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709388337
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Today's.20insane.20Mathlib.20import.20dependency/near/424414089\">said</a>:</p>\n<blockquote>\n<p>In this case, <code>FieldTheory.Subfield</code> imports only <code>Algebra.Algebra.Basic</code>, and I would guess that cutting the edge will just mean that <code>Algebra.Algebra.Basic</code> comes in via a different route</p>\n</blockquote>\n<p>In this specific case, I'm not too sure, because <code>Algebra</code> seems irrelevant to most of the theory</p>",
        "id": 424414344,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709388395
    },
    {
        "content": "<p>I think that confirms my point; the questionable edge is the one that isn't shown in the graph above</p>",
        "id": 424414544,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1709388562
    },
    {
        "content": "<p>That I agree</p>",
        "id": 424414620,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709388614
    }
]