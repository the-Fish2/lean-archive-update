[
    {
        "content": "<p>I am relatively new to both of these topics but I tried to create a new Lean project with <code>mathlib4</code> support and <code>leanblueprint</code> configured. After a brief discussion with <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  and following the instructions <a href=\"https://github.com/PatrickMassot/leanblueprint\">here</a>, I managed to install <code>leanblueprint</code> (in a designated python virtual environment) and managed to configure my blueprint by running <code>leanblueprint new</code>. I wrote some sample LaTeX and built the web and pdf for it with <code>leanblueprint {web,pdf}</code>. However, checking the declarations (running <code>leanblueprint checkdecl</code>somehow failed with the following error messages below. I haven't changed/added any Lean code yet in the new repository (created with the very basic VSCode quickstart <a href=\"https://lean-lang.org/lean4/doc/quickstart.html\">here</a>). It is likely me missing some basic steps but would appreciate if anyone has an idea of how to troubleshoot this. <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Run</span> <span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"n\">exe</span> <span class=\"n\">checkdecls</span> <span class=\"n\">blueprint</span><span class=\"bp\">/</span><span class=\"n\">lean_decls</span>\n  <span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"n\">exe</span> <span class=\"n\">checkdecls</span> <span class=\"n\">blueprint</span><span class=\"bp\">/</span><span class=\"n\">lean_decls</span>\n  <span class=\"n\">shell</span><span class=\"o\">:</span> <span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span> <span class=\"bp\">-</span><span class=\"n\">e</span> <span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span>\n<span class=\"o\">[</span><span class=\"bp\">?/?</span><span class=\"o\">]</span> <span class=\"n\">Computing</span> <span class=\"n\">build</span> <span class=\"n\">jobs</span>\n<span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"n\">Main</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span> <span class=\"bp\">.&gt;</span> <span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">std</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">CMark</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">UnicodeBasic</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">leanInk</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span> <span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.8.0-rc1/bin/lean ././.lake/packages/checkdecls/././Main.lean -R ././.lake/packages/checkdecls/./. -o ././.lake/packages/checkdecls/.lake/build/lib/Main.olean -i ././.lake/packages/checkdecls/.lake/build/lib/Main.ilean -c ././.lake/packages/checkdecls/.lake/build/ir/Main.c --json</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/././</span><span class=\"n\">Main.lean</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">36</span><span class=\"bp\">-</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">48</span><span class=\"o\">:</span> <span class=\"n\">too</span> <span class=\"n\">many</span> <span class=\"n\">explicit</span> <span class=\"kd\">universe</span> <span class=\"n\">levels</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">Lake.LakeOptions.mkLoadConfig'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/././</span><span class=\"n\">Main.lean</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">11</span><span class=\"bp\">-</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">73</span><span class=\"o\">:</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">synthesize</span> <span class=\"kd\">instance</span>\n  <span class=\"n\">ToString</span> <span class=\"n\">Empty</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/././</span><span class=\"n\">Main.lean</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">:</span><span class=\"mi\">17</span><span class=\"bp\">-</span><span class=\"mi\">15</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">field</span> <span class=\"bp\">'</span><span class=\"n\">root'</span><span class=\"o\">,</span> <span class=\"n\">the</span> <span class=\"n\">environment</span> <span class=\"n\">does</span> <span class=\"n\">not</span> <span class=\"n\">contain</span> <span class=\"bp\">'</span><span class=\"n\">Lake.EResult.root'</span>\n  <span class=\"n\">ws</span>\n<span class=\"n\">has</span> <span class=\"n\">type</span>\n  <span class=\"n\">EResult</span> <span class=\"n\">Nat</span> <span class=\"n\">Log</span> <span class=\"n\">Workspace</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/././</span><span class=\"n\">Main.lean</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">60</span><span class=\"bp\">-</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">72</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">dotted</span> <span class=\"n\">identifier</span> <span class=\"kd\">notation</span><span class=\"o\">,</span> <span class=\"n\">unknown</span> <span class=\"n\">identifier</span> <span class=\"bp\">`</span><span class=\"n\">Lake.Log.eio</span><span class=\"bp\">`</span> <span class=\"k\">from</span> <span class=\"n\">expected</span> <span class=\"n\">type</span>\n  <span class=\"n\">Log</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Lean</span> <span class=\"n\">exited</span> <span class=\"k\">with</span> <span class=\"n\">code</span> <span class=\"mi\">1</span>\n<span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Compiling</span> <span class=\"n\">Main</span>\n<span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Linking</span> <span class=\"n\">checkdecls</span>\n<span class=\"n\">Some</span> <span class=\"n\">build</span> <span class=\"n\">steps</span> <span class=\"n\">logged</span> <span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span> <span class=\"n\">Building</span> <span class=\"n\">Main</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">build</span> <span class=\"n\">failed</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Process</span> <span class=\"n\">completed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 437257652,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715000435
    },
    {
        "content": "<p>I am having the exact same issue (also in a python venv).</p>",
        "id": 437261023,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1715001687
    },
    {
        "content": "<p>This is probably a Lean version mismatch between the Lean library checkdecls and your project.</p>",
        "id": 437265684,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715003200
    },
    {
        "content": "<p>I confirm this is the issue. I’ll fix this very soon.</p>",
        "id": 437266726,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715003525
    },
    {
        "content": "<p>Indeed, I have version 4.8.0-rc1 and chechdecls is on v4.6.0-rc1</p>",
        "id": 437266988,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1715003613
    },
    {
        "content": "<p>This wouldn’t be a problem usually but the latest Lean version changed a <em>lot</em> of things in lake.</p>",
        "id": 437267212,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715003683
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Create.20new.20Lean.20mathlib4.20project.20with.20leanblueprint.20support/near/437267212\">said</a>:</p>\n<blockquote>\n<p>This wouldn’t be a problem usually but the latest Lean version changed a <em>lot</em> of things in lake.</p>\n</blockquote>\n<p>Sorry for the naive question but how do I compare the checkdecls versions on my system? <code>lake --version</code>showed me <code>Lean version 4.8.0-rc1</code></p>",
        "id": 437267785,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715003828
    },
    {
        "content": "<p>And it seems the major change did not include anything like a migration guide so I guess I will need to ask <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> for help. Mac, how would you fix <a href=\"https://github.com/PatrickMassot/checkdecls/blob/master/Main.lean\">https://github.com/PatrickMassot/checkdecls/blob/master/Main.lean</a>? to work with lean4.8.0?</p>",
        "id": 437267970,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715003879
    },
    {
        "content": "<p>Dimitar, the Lean version used by each project is recorded into a <code>lean-toolchain</code> file in the root folder of the project. So you can take a look at your project and then look inside the <code>.lake</code> folder to look at the versions used by the various Lean libraries you depend on.</p>",
        "id": 437268282,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715003964
    },
    {
        "content": "<p>Mac, the error messages are</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">invalid</span> <span class=\"n\">dotted</span> <span class=\"n\">identifier</span> <span class=\"kd\">notation</span><span class=\"o\">,</span> <span class=\"n\">unknown</span> <span class=\"n\">identifier</span> <span class=\"bp\">`</span><span class=\"n\">Lake.Log.eio</span><span class=\"bp\">`</span> <span class=\"k\">from</span> <span class=\"n\">expected</span> <span class=\"n\">type</span>\n  <span class=\"n\">Log</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">invalid</span> <span class=\"n\">field</span> <span class=\"bp\">'</span><span class=\"n\">root'</span><span class=\"o\">,</span> <span class=\"n\">the</span> <span class=\"n\">environment</span> <span class=\"n\">does</span> <span class=\"n\">not</span> <span class=\"n\">contain</span> <span class=\"bp\">'</span><span class=\"n\">Lake.EResult.root'</span>\n  <span class=\"n\">ws</span>\n<span class=\"n\">has</span> <span class=\"n\">type</span>\n  <span class=\"n\">EResult</span> <span class=\"n\">Nat</span> <span class=\"n\">Log</span> <span class=\"n\">Workspace</span>\n</code></pre></div>",
        "id": 437268702,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715004070
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Create.20new.20Lean.20mathlib4.20project.20with.20leanblueprint.20support/near/437268282\">said</a>:</p>\n<blockquote>\n<p>Dimitar, the Lean version used by each project is recorded into a <code>lean-toolchain</code> file in the root folder of the project. So you can take a look at your project and then look inside the <code>.lake</code> folder to look at the versions used by the various Lean libraries you depend on.</p>\n</blockquote>\n<p>Thanks, <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> ! Looks like <code>checkdecls</code> is <code>lean4:v4.6.0-rc1</code>.</p>",
        "id": 437268779,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715004094
    },
    {
        "content": "<p>Yes, it is at this version for everybody. The whole library is a 16 lines long file that never needed to be updated before today.</p>",
        "id": 437269241,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715004217
    },
    {
        "content": "<p>Thanks a lot, <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> and <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> for your help! I assume you'll keep us updated when the issue gets fixed.</p>",
        "id": 437277910,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715006768
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> I made a <a href=\"https://github.com/PatrickMassot/checkdecls/pull/1\">PR</a> with the addaption.</p>",
        "id": 437290993,
        "sender_full_name": "Mac Malone",
        "timestamp": 1715010702
    },
    {
        "content": "<p>Thanks a lot!</p>",
        "id": 437291298,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715010796
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"678980\">@Dimitar Jetchev</span> and <span class=\"user-mention\" data-user-id=\"666034\">@Adrian Wüthrich</span>, could you please try to run <code>lake update checkdecls</code> in your project and see whether it fixes your issue?</p>",
        "id": 437292161,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715011035
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Create.20new.20Lean.20mathlib4.20project.20with.20leanblueprint.20support/near/437292161\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"678980\">Dimitar Jetchev</span> and <span class=\"user-mention silent\" data-user-id=\"666034\">Adrian Wüthrich</span>, could you please try to run <code>lake update checkdecls</code> in your project and see whether it fixes your issue?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>  looks like this fixed the issue. <code>leanblueprint all</code> ran successfully for my repository. Thanks a lot for your quick fix!</p>",
        "id": 437293335,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715011414
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> How do you suggest I handle this now? I have my library at <a href=\"https://github.com/PatrickMassot/checkdecls\">https://github.com/PatrickMassot/checkdecls</a> that has tags <code>lean4.6.0</code>, <code>lean4.7.0</code> and <code>lean4.8.0-rc1</code>. Right now I hope that people who use it with an older Lean version will not update the checkdecls lib and will be fine. And people creating brand new projects will also be fine. And then people who have old project that update to the new Lean will need to run a <code>lake update checkdecls</code> and then should be fine. But really the ideal situation would be that when a project changes its main toolchain to 4.8.0-rc1 or above then lake somehow checks whether <code>checkdecls</code> has a corresponding tag and proposes to update it. How do you see this working in the future?</p>",
        "id": 437294640,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715011846
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> I now have another issue - I get the following error:  what could that mean? </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Run</span> <span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"n\">exe</span> <span class=\"n\">checkdecls</span> <span class=\"n\">blueprint</span><span class=\"bp\">/</span><span class=\"n\">lean_decls</span>\n  <span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span> <span class=\"n\">exe</span> <span class=\"n\">checkdecls</span> <span class=\"n\">blueprint</span><span class=\"bp\">/</span><span class=\"n\">lean_decls</span>\n  <span class=\"n\">shell</span><span class=\"o\">:</span> <span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span> <span class=\"bp\">-</span><span class=\"n\">e</span> <span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span>\n\n<span class=\"o\">[</span><span class=\"bp\">?/?</span><span class=\"o\">]</span> <span class=\"n\">Computing</span> <span class=\"n\">build</span> <span class=\"n\">jobs</span>\n<span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"n\">Main</span>\n<span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Compiling</span> <span class=\"n\">Main</span>\n<span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">Linking</span> <span class=\"n\">checkdecls</span>\n<span class=\"n\">cyclotomic_units_index</span> <span class=\"n\">is</span> <span class=\"n\">missing</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Process</span> <span class=\"n\">completed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 437295246,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715012049
    },
    {
        "content": "<p><code>cyclotomic units</code> is the number of my project</p>",
        "id": 437295469,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715012135
    },
    {
        "content": "<p>It says your blueprint refers to a declaration named <code>cyclotomic_units_index</code> that cannot be found in your Lean project. This is exactly what this lib is meant to do. The first thing to check is there is no spelling issue. Then check that your library main file indeed imports the file containing this declaration.</p>",
        "id": 437295819,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715012279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Create.20new.20Lean.20mathlib4.20project.20with.20leanblueprint.20support/near/437295819\">said</a>:</p>\n<blockquote>\n<p>It says your blueprint refers to a declaration named <code>cyclotomic_units_index</code> that cannot be found in your Lean project. This is exactly what this lib is meant to do. The first thing to check is there is no spelling issue. Then check that your library main file indeed imports the file containing this declaration.</p>\n</blockquote>\n<p>Thanks, I managed to fix it - it was my fault! All is good new.</p>",
        "id": 437296391,
        "sender_full_name": "Dimitar Jetchev",
        "timestamp": 1715012469
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> The plan is to have package version with know toolchain versions and use that information to deduce what is the latest version one can update to on a given toolchain.</p>",
        "id": 437299007,
        "sender_full_name": "Mac Malone",
        "timestamp": 1715013361
    },
    {
        "content": "<p>But this is all future work, right? Do you confirm there is nothing I can do at this point?</p>",
        "id": 437299304,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1715013471
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> Correct. If a repository does have such a tagging scheme, downstream packages could require a package on the tag matched on their Lean version (see <a href=\"#narrow/stream/113488-general/topic/v4.2E8.2E0-rc1.20discussion/near/437228497\">this example</a>) to avoid mismatched <code>lake update</code>, but there is no built-in Lake solution yet.</p>",
        "id": 437303784,
        "sender_full_name": "Mac Malone",
        "timestamp": 1715015169
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Create.20new.20Lean.20mathlib4.20project.20with.20leanblueprint.20support/near/437292161\">schrieb</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"678980\">Dimitar Jetchev</span> and <span class=\"user-mention silent\" data-user-id=\"666034\">Adrian Wüthrich</span>, could you please try to run <code>lake update checkdecls</code> in your project and see whether it fixes your issue?</p>\n</blockquote>\n<p>Yes that fixed the issue. Thanks a lot!</p>",
        "id": 437303898,
        "sender_full_name": "Adrian Wüthrich",
        "timestamp": 1715015222
    },
    {
        "content": "<p>Just recording here that I needed <code>lake update -R -Kenv=dev checkdecls</code> and that <code>lake update checkdecls</code> for some reason uninstalled a bunch of other packages without warning (see <a href=\"#narrow/stream/270676-lean4/topic/checkdecl.20update.20surprise/near/437300239\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/checkdecl.20update.20surprise/near/437300239</a>)</p>",
        "id": 437312105,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1715018594
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>, we know this is a really big deal for the downstream ecosystem, and it's a priority! Thanks for holding our feet to the fire on this one. :-)</p>",
        "id": 437357216,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1715040708
    }
]