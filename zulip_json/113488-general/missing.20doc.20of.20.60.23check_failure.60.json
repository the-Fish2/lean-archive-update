[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Tactic</span>\n\n<span class=\"c1\">-- error: no command declarations start with #check_failure</span>\n<span class=\"k\">#help</span> <span class=\"n\">command</span> <span class=\"s2\">\"#check_failure\"</span>\n</code></pre></div>",
        "id": 434466058,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1713584711
    },
    {
        "content": "<p>It looks like <code>#help command</code> does not pick up doc-strings from <code>@[builtin_command_parser]</code> in any case: <code>#help command \"open\"</code> and <code>#help command \"export\"</code> fail to return the doc-strings from <code>src/Lean/Parser/Command.lean</code>.</p>\n<p>So I think it's two steps to address this: fix <code>#help command</code>, and then PR doc-strings to <code>src/Lean/Parser/Command.lean</code>.</p>",
        "id": 434476988,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1713596291
    },
    {
        "content": "<p>It's not that <code>#help command</code> fails to pick up <code>#check_failure</code>, it fails to parse the parser to find the head token (that is <code>\"#check_failure\"</code>) such that the prefix search works. Note that the line</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">syntax</span> <span class=\"bp\">...</span> <span class=\"o\">[</span><span class=\"n\">Parser.Command.check_failure</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>shows up in <code>#help command</code>.</p>\n<p>(It also fails to show documentation because <a href=\"https://github.com/leanprover/lean4/blob/v4.7.0/src/Lean/Parser/Command.lean#L219-L220\"><code>#check_failure</code> doesn't have any documentation</a>. Ditto for open and export, although I haven't tested this on nightly.)</p>",
        "id": 434494163,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1713613468
    },
    {
        "content": "<p>the <code>#help</code> issue is fixed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/12287\">#12287</a></p>",
        "id": 434498238,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1713617094
    },
    {
        "content": "<p>Indeed, I was looking at <code>open</code> and <code>export</code> on nightly, where doc-strings have recently been added.</p>",
        "id": 434540612,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1713654454
    }
]