[
    {
        "content": "<p>So I have a project that I have not been opening for a couple of months based on 4.3.0-rc1. If I try to update it (from VSCode) I get the</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">nf51454h</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">Lean</span><span class=\"bp\">\\</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">fae_mathlib</span><span class=\"bp\">&gt;</span> <span class=\"n\">lake</span> <span class=\"n\">update</span> <span class=\"n\">mathlib</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">.\\</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">mathlib</span><span class=\"bp\">\\</span><span class=\"n\">lakefile.lean</span><span class=\"o\">:</span><span class=\"mi\">6</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">'</span><span class=\"n\">leanOptions'</span> <span class=\"n\">is</span> <span class=\"n\">not</span> <span class=\"n\">a</span> <span class=\"n\">field</span> <span class=\"n\">of</span> <span class=\"kd\">structure</span> <span class=\"bp\">'</span><span class=\"n\">Lake.PackageConfig'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">.\\</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">mathlib</span><span class=\"bp\">\\</span><span class=\"n\">lakefile.lean</span><span class=\"o\">:</span> <span class=\"n\">package</span> <span class=\"n\">configuration</span> <span class=\"n\">has</span> <span class=\"n\">errors</span>\n</code></pre></div>\n<p>error, which I cannot really understand. Is there any way I can try to move forward?</p>",
        "id": 420506617,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707413121
    },
    {
        "content": "<p>I'm sure I've seen that error discussed here on zulip</p>",
        "id": 420509162,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1707413988
    },
    {
        "content": "<p>Me too, but the Zulip search I tried did not bring me far...</p>",
        "id": 420509248,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414010
    },
    {
        "content": "<p><a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20add.20Mathlib\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.E2.9C.94.20add.20Mathlib</a></p>",
        "id": 420509405,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1707414072
    },
    {
        "content": "<p>I tried that, but did not get far. Once I update the toolchain everything restarts but the error is still there.</p>",
        "id": 420510268,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414374
    },
    {
        "content": "<p>I still have an out-of-date manifest (and obviously so, I have just changed the toolchain)</p>",
        "id": 420510663,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414525
    },
    {
        "content": "<p>But once I try to update I get the non very informative</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Cannot</span> <span class=\"n\">update</span> <span class=\"n\">dependency.</span> <span class=\"n\">Command</span> <span class=\"n\">error</span> <span class=\"n\">output</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">fae_mathlib</span><span class=\"o\">:</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">rename</span> <span class=\"n\">packages</span> <span class=\"n\">directory</span> <span class=\"o\">(</span><span class=\"bp\">.\\</span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">packages</span> <span class=\"bp\">-&gt;</span> <span class=\"bp\">.\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"o\">):</span> <span class=\"n\">no</span> <span class=\"n\">error</span> <span class=\"o\">(</span><span class=\"n\">error</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 420510806,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414581
    },
    {
        "content": "<p>I used to think that <code>no error</code> was a good news, but it does not seem so.</p>",
        "id": 420510925,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414610
    },
    {
        "content": "<p>Maybe remove .lake</p>",
        "id": 420511170,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1707414714
    },
    {
        "content": "<p>You mean, delete the directory?</p>",
        "id": 420511245,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707414732
    },
    {
        "content": "<p>Yeah</p>",
        "id": 420523784,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1707419117
    },
    {
        "content": "<p>Also make sure to change your <code>lean-toolchain</code> file to the one used by the mathlib version you are upgrading to</p>",
        "id": 420807057,
        "sender_full_name": "Enrico Borba",
        "timestamp": 1707577677
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113488-general/topic/cannot.20upgrade.20from.204.2E3.2E0-rc1/near/420523784\">said</a>:</p>\n<blockquote>\n<p>Yeah</p>\n</blockquote>\n<p>Thanks! It worked.</p>",
        "id": 421030397,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1707744517
    }
]