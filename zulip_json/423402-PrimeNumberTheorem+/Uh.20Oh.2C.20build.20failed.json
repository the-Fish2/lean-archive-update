[
    {
        "content": "<p>Yikes! I approved <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/33\">PR#33</a>, but the build failed. (Should there be a way to tell that a PR will fail build? There is in Mathlib, but I don't see check marks/X's on these PRs?..)</p>",
        "id": 420280994,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707320545
    },
    {
        "content": "<p>Is there a way to revert to previous commit and kick 33 back out to be fixed by the contributor? (Or maybe someone can quickly figure out what went wrong and fix it?) Thanks!...</p>",
        "id": 420281008,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707320549
    },
    {
        "content": "<p>It looked good and useful to me, updating the version of Mathlib being used and some reorganization, so I let it through (without much understanding what it was doing...)</p>",
        "id": 420281331,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707320642
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/stream/423402-PrimeNumberTheorem.2B/topic/Uh.20Oh.2C.20build.20failed/near/420280994\">said</a>:</p>\n<blockquote>\n<p>(Should there be a way to tell that a PR will fail build? There is in Mathlib, but I don't see check marks/X's on these PRs?..)</p>\n</blockquote>\n<p>The reason you don't see X's is because the CI is set to only act on <code>push</code>es <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/blob/4e27ea12fc40f5330838741c78aa164a6dcd0c9f/.github/workflows/push.yml#L2\">here</a></p>",
        "id": 420281713,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1707320737
    },
    {
        "content": "<p>you want to also run on <code>pull_request</code></p>",
        "id": 420281933,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1707320785
    },
    {
        "content": "<p>Note that you'll need a different .yml for the PR CI check, which doesn't deploy the website. It should suffice to make a copy and delete everything except <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/blob/main/.github%2Fworkflows%2Fpush.yml#L88-101\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/blob/main/.github%2Fworkflows%2Fpush.yml#L88-101</a> or so. Can also delete all <code>permissions</code> except <code>contents: read</code></p>",
        "id": 420288349,
        "sender_full_name": "llllvvuu",
        "timestamp": 1707322374
    },
    {
        "content": "<p><a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/35\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/35</a></p>",
        "id": 420294663,
        "sender_full_name": "llllvvuu",
        "timestamp": 1707323872
    },
    {
        "content": "<p>The build issue is because some of my work got merged into mathlib, so the same lemmas here can be deleted. I can do that once I get desktop access</p>",
        "id": 420295751,
        "sender_full_name": "llllvvuu",
        "timestamp": 1707324134
    },
    {
        "content": "<p>If keeping one CI file is preferable to you, you can also add something like <code>if: github.ref == 'refs/heads/main'</code> to make certain jobs conditional.</p>",
        "id": 420296997,
        "sender_full_name": "Chris Henson",
        "timestamp": 1707324474
    },
    {
        "content": "<p>Ok thanks. Ian helped me revert to the previous version that built successfully. And he'll change it so that CI runs on PRs, so this doesn't happen again in the future. Thanks for your help!</p>",
        "id": 420328955,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707334740
    },
    {
        "content": "<p>Oops just saw this conversation, replied here about what the easy fix would be <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/35#issuecomment-1932681180\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/35#issuecomment-1932681180</a></p>",
        "id": 420329726,
        "sender_full_name": "milomg",
        "timestamp": 1707335020
    },
    {
        "content": "<p>I implemented build checks on pull requests. Will be useful for the future! Thanks everyone!</p>",
        "id": 420330143,
        "sender_full_name": "Ian Jauslin",
        "timestamp": 1707335189
    },
    {
        "content": "<p>I believe unless we add a merge queue this PR wouldn't have been caught (because it did pass tests before merging <a href=\"https://github.com/leanprover-community/mathlib4/pull/28\">#28</a>)</p>\n<p>Reading on merge queues: <a href=\"https://github.blog/2023-07-12-github-merge-queue-is-generally-available/\">https://github.blog/2023-07-12-github-merge-queue-is-generally-available/</a></p>",
        "id": 420330296,
        "sender_full_name": "milomg",
        "timestamp": 1707335269
    },
    {
        "content": "<p>I think (?) we did just add a merge queue?...</p>",
        "id": 420330561,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707335385
    },
    {
        "content": "<p>Or perhaps not...? Maybe what I mean is: if I see two PRs, both of which have passed CI, I'll merge one, and wait to check that the other one still passes CI... (?)</p>",
        "id": 420330874,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707335519
    },
    {
        "content": "<p>This is a pretty rare case that we probably don't need to worry about, but if you want I can create a <code>workflows/merge-queue.yml</code> file</p>",
        "id": 420331382,
        "sender_full_name": "milomg",
        "timestamp": 1707335692
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span>, if you have 2 PR's, you merge one, then relaunch the build test on the second one. The merge queue would automate this procedure. I'd be happy to set that up if this happens too often. Let me know if it seems useful.</p>",
        "id": 420349122,
        "sender_full_name": "Ian Jauslin",
        "timestamp": 1707342659
    },
    {
        "content": "<p>It's not an issue yet, so let's not waste your time. But it's good to know that there is a solution, should it become a problem!</p>",
        "id": 420351029,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1707343450
    }
]