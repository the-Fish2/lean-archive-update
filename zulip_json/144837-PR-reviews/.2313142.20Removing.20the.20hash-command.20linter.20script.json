[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> has rewritten their sed-based linter for <code>#</code>-commands (like #check, #synth or #print) in Lean; this linter has landed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/11019\">#11019</a>. Right now, CI runs both linters in parallel. Is there any particular reason <em>not</em> to remove the text-based version? I don't think waiting will turn up much (who accidentally adds a #-command?) and if things go wrong, it's always easy to revert.<br>\nIf there are particular tests you'd like me to conduct, I can do that.</p>\n<p>(In the mean-time, AIUI, in <a href=\"https://github.com/leanprover-community/mathlib4/pull/12287\">#12287</a> @digama0 worked around the old script being text-based.)</p>",
        "id": 440642509,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1716649251
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2313142.20Removing.20the.20hash-command.20linter.20script/near/440642509\">said</a>:</p>\n<blockquote>\n<p>who accidentally adds a #-command?</p>\n</blockquote>\n<p><span aria-label=\"raised hand\" class=\"emoji emoji-270b\" role=\"img\" title=\"raised hand\">:raised_hand:</span> <span aria-label=\"sweat\" class=\"emoji emoji-1f613\" role=\"img\" title=\"sweat\">:sweat:</span></p>",
        "id": 440643131,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716649891
    },
    {
        "content": "<p>I had expressed some reservation on removing the duplicate CI step, since I did not remember that even the shell script actually uses Lean.</p>\n<p>Yaël, can you confirm that the linter would have flagged your use of a <code>#</code>-command?  Or was the <code>#</code>-command not even silent in your case?  (The syntax linter only flags quiet <code>#</code>-commands.)</p>",
        "id": 440660581,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716667322
    },
    {
        "content": "<p>It was not even silent. The usual scenario is that I'm recursively removing imports from files and using <code>#minimize_imports</code> to cut down the list of imports automatically.</p>",
        "id": 440660660,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1716667398
    },
    {
        "content": "<p>Well, I have also added my share of accidental #lint or #minimize_import commands - but these are already caught by the existing \"noisy files\" linter, so the rewrite has no bearing on this.</p>",
        "id": 440661156,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1716667971
    },
    {
        "content": "<p>I agree that it is common to commit a <code>#</code>-command.  The linter mitigates this pre-push, but in the scenario mentioned above there is little more that the linter could do.</p>\n<p>Since most <code>#</code>-commands are naturally noisy, though, the scope of the linter is small.</p>",
        "id": 440665957,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1716673285
    }
]