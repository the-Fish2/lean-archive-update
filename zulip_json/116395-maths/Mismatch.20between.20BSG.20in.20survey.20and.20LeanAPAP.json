[
    {
        "content": "<p>I'm trying to formalize Bourgain's randomness extractor, following <a href=\"https://arxiv.org/abs/1208.5073\">Incidence Theorems and Their Applications, Zeev Dvir</a>. I have noticed that LeanAPAP has <a href=\"https://yaeldillies.github.io/LeanAPAP/docs/LeanAPAP/Extras/BSG.html\">the BSG theorem</a> (note that <code>E[A,B]</code> there is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">|Q(a,b)|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span></span></span></span> in the survey, and the survey's <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E(a,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> is <code>A.card^2 * B.card^2 / E[A,B]</code>), but the statements of the theorem seem different—in theorem 3.3.2 there are two subsets with a small sum, while in LeanAPAP there is only a single subset which doesn't grow much.<br>\nAre these two statements equivalent by some argument I'm not seeing? Are there two versions of BSG?</p>",
        "id": 424607997,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1709543450
    },
    {
        "content": "<p>Indeed there are many variants of BSG. Let me try to match up your statement and mine</p>",
        "id": 424608405,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709543624
    },
    {
        "content": "<p>(btw it would be nice if LeanAPAP#BSG could be linkified)</p>",
        "id": 424609549,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709544054
    },
    {
        "content": "<p>I must say Theorem 3.3.2 is a weird statement. It forces <code>A</code> and <code>B</code> to have the same size. From <code>BSG</code> in LeanAPAP you can deduce that there are some <code>A' ⊆ A</code>, <code>B' ⊆ B</code> such that <code>|A' - A'|</code> and <code>|B' - B'|</code> are small, but I don't currently see how to get <code>|A' + B'|</code> small from it</p>",
        "id": 424614226,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709545661
    },
    {
        "content": "<p>Yes, there are a few basically equivalent versions around. The version with two different sets (of the same size) is equivalent by elementary methods to the version with one set:</p>\n<p>Here's one trick that will work if you need A',B' to be different: if E(A,B) is N^3/K say then by pigeonholing there is a set B', subset of some translate of B, of size at least N/K (and replacing B by a translate if necessary) you can deduce that 1_A*1_A is at least N/2K pointwise on B'. Now Cauchy-Schwarz implies E(A,B') is at least N^3/4K^2, and apply the version of BSG that Yael has formalised to find some B'' inside B' with small doubling. But by averaging some translate of B'' has intersection at least N/K^c with A, let this be A''. Now we have sets A'' in A and B'' in B (or some translates of them) such that |A''+B''| \\leq |B''+B''| and done.</p>\n<p>Alternatively the proof that Yael has formalised adapts very easily to the case of two sets anyway, so probably easier to just copy and paste that proof and change some sets to be different.</p>",
        "id": 424617937,
        "sender_full_name": "Thomas Bloom",
        "timestamp": 1709546828
    },
    {
        "content": "<p>Is the two sets version strictly more general?</p>",
        "id": 424618296,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709546935
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/116395-maths/topic/Mismatch.20between.20BSG.20in.20survey.20and.20LeanAPAP/near/424618296\">said</a>:</p>\n<blockquote>\n<p>Is the two sets version strictly more general?</p>\n</blockquote>\n<p>In a qualitative sense yes, but it's quantitatively a little different, if you care about the exponents.</p>",
        "id": 424618595,
        "sender_full_name": "Thomas Bloom",
        "timestamp": 1709547029
    },
    {
        "content": "<p>Okay, I see, the proof in LeanAPAP already gives the stronger result so I might as well adapt it</p>",
        "id": 424618646,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709547051
    },
    {
        "content": "<p>Thanks! By the way, was Ruzsa calculus formalized in Lean? I saw PFR has entropic Rusza calculus, I guess the set version can be derieved from it?</p>",
        "id": 424623439,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1709548597
    },
    {
        "content": "<p>Yes, we have Ruzsa calculus in mathlib already, see <a href=\"https://tqft.net/mathlib4files/Combinatorics/Additive/PluenneckeRuzsa\">file#Combinatorics/Additive/PluenneckeRuzsa</a></p>",
        "id": 424624104,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1709548803
    },
    {
        "content": "<p>Ok, thanks!</p>",
        "id": 424624628,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1709548973
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> <a href=\"#narrow/stream/116395-maths/topic/Mismatch.20between.20BSG.20in.20survey.20and.20LeanAPAP/near/424609549\">said</a>:</p>\n<blockquote>\n<p>(btw it would be nice if <a href=\"https://yaeldillies.github.io/LeanAPAP/docs/find/?pattern=BSG#doc\">LeanAPAP#BSG</a> could be linkified)</p>\n</blockquote>",
        "id": 424741142,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1709584087
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/116395-maths/topic/Mismatch.20between.20BSG.20in.20survey.20and.20LeanAPAP/near/424618646\">said</a>:</p>\n<blockquote>\n<p>Okay, I see, the proof in LeanAPAP already gives the stronger result so I might as well adapt it</p>\n</blockquote>\n<p>Sorry to bother you, but are you planning on doing this soon or should I do it?</p>",
        "id": 428095300,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1711016503
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> ?</p>",
        "id": 429859488,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1711546254
    },
    {
        "content": "<p>Sorry, have had no time to fix it! Feel free to open a PR if you know how to</p>",
        "id": 429859687,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1711546313
    },
    {
        "content": "<p>Ok. Would you mind sending a reference to the proof you formalized?</p>",
        "id": 429859907,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1711546374
    },
    {
        "content": "<p>Here it is: <a href=\"/user_uploads/3121/55iiGXu10LPhyPtxd7HTKuig/SimpleBSG.pdf\">SimpleBSG.pdf</a></p>",
        "id": 429860061,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1711546429
    },
    {
        "content": "<p>Thanks! I might be missing something, but from the proof we have that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">A&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> is a subset of a translate of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>, so it should be possible to just translate it back to get our <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">B&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>, right? I'll try formalizing this</p>",
        "id": 429866143,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1711548103
    },
    {
        "content": "<p>Yes, that's basically what Tom said above</p>",
        "id": 429880549,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1711551582
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/116395-maths/topic/Mismatch.20between.20BSG.20in.20survey.20and.20LeanAPAP/near/429859687\">said</a>:</p>\n<blockquote>\n<p>Sorry, have had no time to fix it! Feel free to open a PR if you know how to</p>\n</blockquote>\n<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> I opened <a href=\"https://github.com/YaelDillies/LeanAPAP/pull/6\">https://github.com/YaelDillies/LeanAPAP/pull/6</a></p>",
        "id": 429890273,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1711554129
    }
]