[
    {
        "content": "<p>Recently I'm trying to add some valuation theory into mathlib. A short plan is doing some ramification theory of valuations, such as defining and discussing higher ramification groups.</p>\n<p>A first step is to add more concrete definitions of valuations into mathlib. For example , I want to define the predicate describing a valuation being trivial or being discrete. I find that currently there is already some theorems talking about <code>IsEquiv</code> of valuations. So is it better to define these properties modulo <code>IsEquiv</code> or to do it in another way? From my perspective, if I want to do some number theory in the future, I will encounter concrete calculations of valuations happening in <code>NNReal</code> or <code>NNRat</code>, so I may need to use <code>IsEquiv</code> to convert an arbitrary value group to <code>NNReal</code>.</p>\n<p>Another issue rising naturally is about using add version or mul version (v(0) = \\infty or v(0) = 0) of valuation. From the aspect of  linking the theory of valuations with prime ideals, an add version is more easy to use. Is it reasonable to do both mul and add theory of valuations, or is it better to just stick to mul version?</p>",
        "id": 412125252,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704887687
    },
    {
        "content": "<p>Right now we seem to have decomposition and inertia subgroups for a very general class of valuations. What's the correct generality for higher ramification groups? My guess is that the \"lower numbering\" could also be defined in some big generality, indexed by elements <code>a</code> of the valuation subring <code>A</code> and defined by \"induces the identity on A/a\". </p>\n<p>But all of this seems to be set up with valuation subrings rather than valuations so there's another design decision to be made. For a finite extension of the p-adic numbers, for example, what would one like to be using?</p>\n<p>To get to NNReal we probably need a general theory of rank one valuations but I don't know at what point this kicks in.</p>\n<p>I would stick to the mul version for now. Why do we need the add version? Making the prime ideal is easy and surely is already done?</p>",
        "id": 412128693,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704889004
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412128693\">said</a>:</p>\n<blockquote>\n<p>Right now we seem to have decomposition and inertia subgroups for a very general class of valuations. What's the correct generality for higher ramification groups? My guess is that the \"lower numbering\" could also be defined in some big generality, indexed by elements <code>a</code> of the valuation subring <code>A</code> and defined by \"induces the identity on A/a\". </p>\n<p>But all of this seems to be set up with valuation subrings rather than valuations so there's another design decision to be made. For a finite extension of the p-adic numbers, for example, what would one like to be using?</p>\n</blockquote>\n<p>A useful property concerning higher ramification group of finite extension of p-adic numbers is that lower numbering works compatibly with subgroups of the Galois group, and upper numbering works compatibly with quotients of the Galois group. The way to link upper and lower numbering of ramification group is through the piecewise-linear Herbrand function. My first impression is that it would be easier to work with if we use concrete valuations and use some real number indexed \"lower numbering\" and \"upper numbering\", at least for the Herbrand function.</p>",
        "id": 412131067,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704889990
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412128693\">said</a>:</p>\n<blockquote>\n<p>Right now we seem to have decomposition and inertia subgroups for a very general class of valuations. </p>\n</blockquote>\n<p>Currently, the decomposition and inertia subgroups is defined using only valuation subrings instead of of concrete valuations?</p>",
        "id": 412131495,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704890186
    },
    {
        "content": "<p>Maybe I am wrong, but I think most textbooks in p-adic number theory do use the language of valuations heavily due to calculation reasons. For example, concrete calculations of the valuation of differences and discriminants.</p>",
        "id": 412133060,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704890861
    },
    {
        "content": "<p>I totally agree with that there is no need to do add version of valuations. There is no real advantage in doing this. <span aria-label=\"face with hand over mouth\" class=\"emoji emoji-1f92d\" role=\"img\" title=\"face with hand over mouth\">:face_with_hand_over_mouth:</span></p>",
        "id": 412133822,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704891125
    },
    {
        "content": "<p>Right -- decomposition and inertia subgroups are defined using valuation subrings of fields, but for a field, equivalence classes of valuations are the same thing as valuation subrings.</p>",
        "id": 412133981,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704891187
    },
    {
        "content": "<p>In other words, for a field, the preorder associated to an equiv class of valuations is determined by the things which are &lt;= 1.</p>",
        "id": 412134088,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704891231
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> what do you work with when extending valuations to finite extensions? You have the issue that the value group might go up if the extension is ramified.</p>",
        "id": 412134305,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704891312
    },
    {
        "content": "<p>Yes, mathematically the valuation subring of a field is in one-to-one correspondence to its valuation equivalence class. Although I have written some codes using valuations (mostly about Ostrowski's theorem and higher ramification groups), but I think it is not hard to convert them into the language of valuation rings once this design decision is settled.</p>",
        "id": 412137123,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704892366
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"611077\">Jiang Jiedong</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412125252\">said</a>:</p>\n<blockquote>\n<p>A first step is to add more concrete definitions of valuations into mathlib. For example , I want to define the predicate describing a valuation being trivial or being discrete. </p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> and I have formalized a definition of discrete valuation and several results about discretely valued fields, discrete valuation rings, and relations between these; you can see what we did <a href=\"https://ujm.hal.science/ujm-04222610\">here</a> (so that you don't duplicate existing work).</p>",
        "id": 412145491,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1704895413
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412134305\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"406490\">María Inés de Frutos Fernández</span> what do you work with when extending valuations to finite extensions? You have the issue that the value group might go up if the extension is ramified.</p>\n</blockquote>\n<p>In the discrete valuation case, we chose to always work with normalized valuations taking values in <code>with_zero (multiplicative Z)</code>. So to extend a discrete valuation on a field K to a field extension L, first we compute the extension of a real-valued nonarchimedean norm corresponding to the valuation on K (using my previous work for constructing C_p), and then normalize this extension to obtain a <code>with_zero (multiplicative Z)</code>-valued valuation on L. Of course, we needed to be careful with types; the details of how we did this are also covered in our paper.</p>",
        "id": 412146923,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1704895840
    },
    {
        "content": "<p>Concerning higher ramification groups: given a valuation <code>v</code> taking values in a <code>LinearOrderedCommGroupWithZero</code> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Γ</mi></mrow><annotation encoding=\"application/x-tex\">\\Gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Γ</span></span></span></span>, we could introduce the type of \"min-closed\" subsets of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Γ</mi></mrow><annotation encoding=\"application/x-tex\">\\Gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Γ</span></span></span></span>, and given such a subset <code>S</code>, consider the subgroup of elements <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span> in the decomposition group where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>∈</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">v(x - \\sigma(x)) \\in S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> for any <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> in the valuation ring.</p>",
        "id": 412168626,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1704901479
    },
    {
        "content": "<p>That's the naive generalization of the higher ramification groups (in the lower numbering, as Kevin said) in the discrete case. I don't know how naive that actually is though.</p>",
        "id": 412169008,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1704901575
    },
    {
        "content": "<p>I have never had any conceptual understanding of the upper numbering; I assume there is no analogue in this generality?</p>",
        "id": 412190971,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704908517
    },
    {
        "content": "<p>Isn't there some work of Saito about this?</p>",
        "id": 412191151,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1704908588
    },
    {
        "content": "<p>I was thinking about how to formalize the upper numbering <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mi>u</mi></msup></mrow><annotation encoding=\"application/x-tex\">G^u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span></span></span></span></span></span></span></span> and linking of upper and lower numbering through Herbrand's function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>. </p>\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> be an algebraic extension of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> be the ring of integers.  Using valuations (across the relation <code>IsEquiv</code>) to define the lower numbering ramification group <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>v</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, for any <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> in the value group gives us the flexibility of talking about <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>v</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> is not a valuation of any element of the ring <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>. This is often the case when we try to define <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mi>u</mi></msup><mo>=</mo><msub><mi>G</mi><mrow><mi>η</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">G^u = G_{\\eta (u)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0385em;vertical-align:-0.3552em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">η</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span></span></span></span>, where possibly no elements of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> has valuation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\eta(u)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span></span></span></span>.</p>\n<p>Maybe it is also possible to define a very general lower number without using concrete valuations,  and deal with this problem in another way if we come up with some good idea.</p>",
        "id": 412298632,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704964605
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412191151\">said</a>:</p>\n<blockquote>\n<p>Isn't there some work of Saito about this?</p>\n</blockquote>\n<p>Is there any reference on this? Thank you!</p>",
        "id": 412298986,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704964739
    },
    {
        "content": "<p>Perhaps Takeshi's ICM talk <a href=\"https://www.ms.u-tokyo.ac.jp/~t-saito/talk/ICM.pdf\">https://www.ms.u-tokyo.ac.jp/~t-saito/talk/ICM.pdf</a> is the place to start?</p>\n<p><span class=\"user-mention\" data-user-id=\"611077\">@Jiang Jiedong</span> I think that before we start on this we need to wait for <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> 's work on extensions of valuations to be ported to mathlib4. The base field should not be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> but should at the very least be a nonarchimedean local field, and in fact probably a complete discretely-valued field with (at some point) perfect residue field. I agree that there is a huge amount to be done here, and the questions which have come up here (whether to use valuation subrings, or NNReal-valued valuations, or valuations taking values in <code>WithZero (multiplicative Int)</code> ) are perhaps some of the first questions one should be asking. </p>\n<p>My gut feeling is: don't use additive valuations unless we really have to (morally because 0 is better-behaved than <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span>) but that perhaps it's time to set up a theory of rank 1 valuations (i.e. valuations with target <code>NNReal</code>), because these are also needed in the theory of Berkovich spaces. Valuations are used for so many different things but my attitude has always been that the way to make progress is just to make some decisions and push on, because otherwise nothing gets done. But definitely don't start with base field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> :-) Follow Serre's local fields book perhaps?</p>",
        "id": 412302364,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1704965840
    },
    {
        "content": "<p>Following Serre's book is indeed what we are planning to do with <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span>  in our work. In particular, we are suggesting a different definition of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> and we are proposing a general notion of local field (be it of equal or mixed characteristic) and this seems already to be a better setting for defining upper/lower ramification numbers. We hope this will be ported to mathlib reasonably soon...</p>",
        "id": 412305189,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1704966821
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412302364\">said</a>:</p>\n<blockquote>\n<p>Valuations are used for so many different things but my attitude has always been that the way to make progress is just to make some decisions and push on, because otherwise nothing gets done. But definitely don't start with base field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> :-) Follow Serre's local fields book perhaps?</p>\n</blockquote>\n<p>Thank you! Then perhaps I shall do some more basic things first, and move on step by step. Such as the Ostrowski's theorem, stated as any nontrivial (non-Archimedean) valuation on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> is equivalent to one of the  p-adic valuations? However,  I need to ask this question first, should the Ostrowski's theorem be stated and proved in a more general version or it is ok for the mathlib (at least for now)?</p>",
        "id": 412368101,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704987061
    },
    {
        "content": "<p>And yes, I agree with that we need to wait for <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span>  and <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span>  porting their great work on Serre's local fields to Mathlib4 before we can do this higher ramification group. And I'll do some more serious investigation of their lean3 code, so that I'll be ready when the porting is done :)</p>",
        "id": 412370668,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1704987939
    },
    {
        "content": "<p>Ostrowski was already proved by <span class=\"user-mention\" data-user-id=\"452140\">@Billy Miao</span>, although I'm not sure what the status is</p>",
        "id": 412371393,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1704988189
    },
    {
        "content": "<p>But has Ostrowski made it into mathlib? And is it only for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>?</p>",
        "id": 413128040,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705402240
    },
    {
        "content": "<p>There is also <a href=\"https://github.com/RaitoBezarius/berkovich-spaces\">https://github.com/RaitoBezarius/berkovich-spaces</a>, which contains Ostrowski over Q, but it needs quite some cleanup before it could enter mathlib.</p>",
        "id": 413128698,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1705402452
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/412190971\">said</a>:</p>\n<blockquote>\n<p>I have never had any conceptual understanding of the upper numbering; I assume there is no analogue in this generality?</p>\n</blockquote>\n<p>Iirc the upper numbering is good for quotients, the lower one for subgroups. 8n any case, they differ by an increasing bijection on the reals.</p>",
        "id": 417063384,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1705821231
    },
    {
        "content": "<p>Right, but why should there be any numbering which is good for quotients and why is it defined in such an ad hoc way?</p>",
        "id": 417063561,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705821405
    },
    {
        "content": "<p>The lower numbering generalises to valuations taking values in an arbitrary totally ordered monoid with zero. Does the upper numbering? Or is the rank 1 assumption essential for \"behaves well for quotients\"?</p>",
        "id": 417063689,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705821541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417063561\">said</a>:</p>\n<blockquote>\n<p>Right, but why should there be any numbering which is good for quotients and why is it defined in such an ad hoc way?</p>\n</blockquote>\n<p>I am not sure to understand what you mean exactly by \"why should there be any numbering which...\" but one striking evidence for me that the \"upper numbering\" is not just a fortuitous invention that happens to work for quotients, is that in an abelian extension the reciprocity map sends <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msubsup><mi mathvariant=\"script\">O</mi><mi>K</mi><mo>×</mo></msubsup><msup><mo stretchy=\"false\">)</mo><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">(\\mathcal{O}_K^\\times)^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.105em;vertical-align:-0.2935em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4065em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">×</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2935em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> (the units that are <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> modulo <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>ϖ</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\varpi^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">ϖ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>) to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">G^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> (and not to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>). This is Théorème 2, Chap XV, §3 in Serre's <em>Corps Locaux</em>. But I know nothing about rank <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\geq 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>.</p>",
        "id": 417072512,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705830682
    },
    {
        "content": "<p>Right, but the reciprocity map only works for nonarch local fields so DVRs and in particular rank 1. If K is any field with a valuation taking values in some abstract monoid with 0 then the lower numbering makes sense and plays well with respect to subgroups. Is there anything which plays well with respect to quotients?</p>",
        "id": 417079538,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705837191
    },
    {
        "content": "<p>Well, unfortunately I do not have the slightest clue, I know very little about rank <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\geq 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>... <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 417087554,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705844119
    },
    {
        "content": "<p>Even if you take a 2 dimensional local field, the reciprocity map has Milnor K2 as the source, not the multiplicative group. So the analogue of the statement above for the reciprocity map must be changed in some nontrivial way.</p>",
        "id": 417088496,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705844958
    },
    {
        "content": "<p>IIRC it’s still possible in such cases, and was done by Kato, I think?</p>",
        "id": 417088577,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705845012
    },
    {
        "content": "<p>(Such cases should be any higher dimensional local field)</p>",
        "id": 417088603,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705845048
    },
    {
        "content": "<p>What I tried was Saito's <em>Class Field theory for two-dimensional local rings</em> (Adv Studies Pure Math 12), but it seems to me that he does not discuss the relation between reciprocity map and units vs ramification.</p>",
        "id": 417093429,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705848701
    },
    {
        "content": "<p>Reciprocity is only a thing for abelian extensions, the upper numbering works for an arbitrary Galois extension of local fields</p>",
        "id": 417093698,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705848938
    },
    {
        "content": "<p>Good point.</p>",
        "id": 417094384,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705849451
    },
    {
        "content": "<p>And another thing. Whyever does the lower numbering start at -1?? (screenshot from Wikipedia page on ramification groups)</p>\n<p><a href=\"/user_uploads/3121/YXBtFnhpZfPJWJKl-ke_qQdr/Screenshot_20240121-151238.png\">Screenshot_20240121-151238.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/YXBtFnhpZfPJWJKl-ke_qQdr/Screenshot_20240121-151238.png\" title=\"Screenshot_20240121-151238.png\"><img src=\"/user_uploads/3121/YXBtFnhpZfPJWJKl-ke_qQdr/Screenshot_20240121-151238.png\"></a></div><p>No <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> in sight, all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>.</p>",
        "id": 417095151,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705850035
    },
    {
        "content": "<p>Isn’t that just a reindexing so the Herbrand function has a nice definition?</p>",
        "id": 417095256,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705850104
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417093698\">said</a>:</p>\n<blockquote>\n<p>Reciprocity is only a thing for abelian extensions, the upper numbering works for an arbitrary Galois extension of local fields</p>\n</blockquote>\n<p>Yes, of course, but there's also an internal sort of consistency that must be satisfied in the following sense. Suppose that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">∣</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L|K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> is any finite extension of (1-dimensional) local fields and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>G</mi><mi>L</mi><mrow><mi>a</mi><mi>b</mi></mrow></msubsup><mo>→</mo><msubsup><mi>G</mi><mi>K</mi><mrow><mi>a</mi><mi>b</mi></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">G_L^{ab} \\to G_K^{ab}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2753em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-2.4247em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ab</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2753em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2753em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-2.4247em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ab</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2753em;\"><span></span></span></span></span></span></span></span></span></span> is the map induced by the inclusion <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>L</mi></msub><mo>→</mo><msub><mi>G</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_L \\to G_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> then on the one hand that map has to be compatible with the lower numbering (since that's the one compatible with restrictions) and on the other hand the upper numbering corresponds to the filtration on the units. So again the Herbrand function comes into play. Is it not the case that this is the unique function which is compatible in this sense?</p>",
        "id": 417095776,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705850590
    },
    {
        "content": "<p>Lower numbering doesn't make sense for infinite extensions, right? Are these absolute Galois groups? Oh but do you just want to replace with some sufficiently large finite extension or something?</p>",
        "id": 417095931,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705850724
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417095151\">said</a>:</p>\n<blockquote>\n<p>And another thing. Whyever does the lower numbering start at -1?? (screenshot from Wikipedia page on ramification groups)</p>\n<p><a href=\"/user_uploads/3121/YXBtFnhpZfPJWJKl-ke_qQdr/Screenshot_20240121-151238.png\">Screenshot_20240121-151238.png</a></p>\n<p>No <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> in sight, all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>.</p>\n</blockquote>\n<p>I have always interpreted this as a way to cope with the existence of tame inertia, so that the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>'s for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>≥</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i \\geq 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7955em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> account for wild inertia (that is where the juice is) and you do not want to start off at <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>.</p>",
        "id": 417096021,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1705850776
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417095931\">said</a>:</p>\n<blockquote>\n<p>Lower numbering doesn't make sense for infinite extensions, right? Are these absolute Galois groups? Oh but do you just want to replace with some sufficiently large finite extension or something?</p>\n</blockquote>\n<p>Yes that's what I meant by \"compatible with the lower numbering\". to make it precise you can take any finite extension <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>L</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L&#x27;|L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">L</span></span></span></span> which is Galois over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>, and the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><msup><mi>L</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>L</mi><mo stretchy=\"false\">)</mo><mo>→</mo><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><msup><mi>L</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Gal(L&#x27;|L) \\to Gal(L&#x27;|K)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">L</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">)</span></span></span></span> is compatible with lower numbering while if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>K</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K&#x27;|K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> is the maximal subextension of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>L</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L&#x27;|K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> which is abelian over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><msup><mi>L</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>K</mi><mo stretchy=\"false\">)</mo><mo>→</mo><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><msup><mi>K</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi mathvariant=\"normal\">∣</mi><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Gal(L&#x27;|K) \\to Gal(K&#x27;|K)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0019em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">)</span></span></span></span> has to be compatible with the upper numbering.</p>",
        "id": 417096736,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705851336
    },
    {
        "content": "<p>But also as we discussed above the lower numbering should make sense even for non-finite Galois extensions because there is no longer a restriction on the valuation being discrete!</p>",
        "id": 417096841,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705851403
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417096021\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/417095151\">said</a>:</p>\n<blockquote>\n<p>And another thing. Whyever does the lower numbering start at -1?? (screenshot from Wikipedia page on ramification groups)</p>\n<p><a href=\"/user_uploads/3121/YXBtFnhpZfPJWJKl-ke_qQdr/Screenshot_20240121-151238.png\">Screenshot_20240121-151238.png</a></p>\n<p>No $i$ in sight, all $i+1$.</p>\n</blockquote>\n<p>I have always interpreted this as a way to cope with the existence of tame inertia, so that the $G_i$'s for $i \\geq 1$ account for wild inertia (that is where the juice is) and you do not want to start off at $2$.</p>\n</blockquote>\n<p>It’s also nice that in the abelian case G^i corresponds to 1+m^i</p>",
        "id": 417101214,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1705855067
    },
    {
        "content": "<p>It's the normalisation of the lower numbering I'm complaining about, I agree that the upper numbering might be sensible!</p>",
        "id": 417101427,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1705855300
    },
    {
        "content": "<p>Is it OK for me to add the following instances into mathlib?</p>\n<ol>\n<li>A valuation ring is valued in a canonical way. More specifically,</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.RingTheory.Valuation.ValuationRing</span>\n<span class=\"kn\">import</span> <span class=\"n\">Mathlib.RingTheory.DiscreteValuationRing.Basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">Mathlib.Topology.Algebra.Valuation</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">[</span><span class=\"n\">CommRing</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">IsDomain</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ValuationRing</span> <span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">Valued</span> <span class=\"n\">R</span> <span class=\"o\">(</span><span class=\"n\">ValuationRing.ValueGroup</span> <span class=\"n\">R</span> <span class=\"o\">(</span><span class=\"n\">FractionRing</span> <span class=\"n\">R</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<ol start=\"2\">\n<li>A preorder relation of divisibility on any valuation ring</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">Preorder</span> <span class=\"n\">R</span> <span class=\"n\">where</span>\n <span class=\"n\">le</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">c</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"n\">b</span>\n <span class=\"n\">le_refl</span> <span class=\"n\">_</span> <span class=\"o\">:=</span> <span class=\"o\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"n\">mul_one</span> <span class=\"n\">_</span><span class=\"o\">⟩</span>\n <span class=\"n\">le_trans</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"o\">⟨</span><span class=\"n\">u</span><span class=\"o\">,</span> <span class=\"n\">h</span><span class=\"o\">⟩</span> <span class=\"o\">⟨</span><span class=\"n\">v</span><span class=\"o\">,</span> <span class=\"n\">g</span><span class=\"o\">⟩</span> <span class=\"bp\">=&gt;</span> <span class=\"o\">⟨</span><span class=\"n\">u</span> <span class=\"bp\">*</span> <span class=\"n\">v</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">h</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">ring</span><span class=\"o\">⟩</span>\n</code></pre></div>",
        "id": 418068584,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1706185515
    },
    {
        "content": "<p>And an <code>OrderTopology</code> instance after these two instances.</p>",
        "id": 418068831,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1706185626
    },
    {
        "content": "<p>The problem I see with the first point is that I am not sure that definining the \"canonical\" valuation to take values in the <code>ValueGroup</code> is the best choice. For instance, most of the library concerning Adic Valuations considers <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mrow><mi>m</mi><mn>0</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}_{m0}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-valued ones.</p>",
        "id": 418074480,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1706187678
    },
    {
        "content": "<p>One even major issue is that every field (like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>) is a valuation ring and you may want to put different valued structures on it (like all the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic ones).</p>",
        "id": 418076405,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1706188326
    },
    {
        "content": "<p>The same problem shows up in the <code>Preorder</code>point, for basically the same reason.</p>",
        "id": 418076895,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1706188526
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/116395-maths/topic/More.20Definitions.20and.20Theorems.20of.20Valuations/near/418076405\">said</a>:</p>\n<blockquote>\n<p>One even major issue is that every field (like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>) is a valuation ring and you may want to put different valued structures on it (like all the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic ones).</p>\n</blockquote>\n<p>Sadly, any instance for valuation ring will automatically apply to fields. Is <code>scoped instance</code> good enough in this case? Or should I just write definitions instead of instances.</p>",
        "id": 418076919,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1706188533
    },
    {
        "content": "<p>Well, I think that the point is precisely that <em>we do not want</em> to declare such an instance. The idea behind the <code>valued</code> class is that it should really reflect a somewhat \"unique\" valuation (and uniformity that goes with it), whereas there are many rings with several useful valuations.</p>",
        "id": 418077276,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1706188642
    },
    {
        "content": "<p>Indeed, using <code>def</code> is much more appropriate in this setting.</p>",
        "id": 418077296,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1706188651
    }
]