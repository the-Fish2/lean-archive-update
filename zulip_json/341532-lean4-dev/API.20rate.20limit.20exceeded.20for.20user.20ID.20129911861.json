[
    {
        "content": "<p>The Mathlib CI for <a href=\"https://github.com/leanprover/lean4/pull/4500\">lean#4500</a> has now failed twice due to an API rate limit on GitHub.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">pr</span><span class=\"bp\">-</span><span class=\"n\">testing</span><span class=\"bp\">-</span><span class=\"mi\">4500</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">need</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">adjust</span><span class=\"w\"> </span><span class=\"n\">labels</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"bp\">.</span>\n<span class=\"n\">Removing</span><span class=\"w\"> </span><span class=\"n\">label</span><span class=\"w\"> </span><span class=\"n\">awaiting</span><span class=\"bp\">-</span><span class=\"n\">mathlib</span>\n<span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"API rate limit exceeded for user ID 129911861. If you reach out to GitHub Support for help, please include the request ID AEAE:2C4C71:14589EC:26430D0:6672EE71 and timestamp 2024-06-19 14:42:57 UTC.\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"documentation_url\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://docs.github.com/rest/overview/rate-limits-for-the-rest-api\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"status\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"403\"</span>\n<span class=\"o\">}</span>\n<span class=\"n\">Removing</span><span class=\"w\"> </span><span class=\"n\">label</span><span class=\"w\"> </span><span class=\"n\">breaks</span><span class=\"bp\">-</span><span class=\"n\">mathlib</span>\n<span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"API rate limit exceeded for user ID 129911861. If you reach out to GitHub Support for help, please include the request ID AEB8:2F7584:14C2E21:2701355:6672EE71 and timestamp 2024-06-19 14:42:57 UTC.\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"documentation_url\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://docs.github.com/rest/overview/rate-limits-for-the-rest-api\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"status\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"403\"</span>\n<span class=\"o\">}</span>\n<span class=\"n\">Adding</span><span class=\"w\"> </span><span class=\"n\">label</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"bp\">-</span><span class=\"n\">mathlib</span>\n<span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"API rate limit exceeded for user ID 129911861. If you reach out to GitHub Support for help, please include the request ID AEBA:2F5EB1:14C02EE:27027DE:6672EE71 and timestamp 2024-06-19 14:42:57 UTC.\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"documentation_url\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://docs.github.com/rest/overview/rate-limits-for-the-rest-api\"</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"s2\">\"status\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"403\"</span>\n<span class=\"o\">}</span>\n<span class=\"n\">jq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdin</span><span class=\"bp\">&gt;</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Cannot</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"n\">string</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">string</span><span class=\"w\"> </span><span class=\"s2\">\"body\"</span>\n</code></pre></div>\n<p>Is this a known issue? Is there something I can do to fix this?</p>",
        "id": 445797870,
        "sender_full_name": "Markus Schmaus",
        "timestamp": 1718874988
    },
    {
        "content": "<p>I encountered the same thing yesterday, so I guess it is known but new, and as yet unsolved. Suggestions welcome!</p>",
        "id": 445800099,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718875620
    },
    {
        "content": "<p>The user ID points, as expected to <code>leanprover-community-mathlib4-bot</code> (<a href=\"https://api.github.com/user/129911861\">https://api.github.com/user/129911861</a>). It's hard to come up with suggestions without access to the bots code.</p>",
        "id": 445802895,
        "sender_full_name": "Markus Schmaus",
        "timestamp": 1718876590
    },
    {
        "content": "<p>The obvious suggestion is to have a designated bot for lean4 CI, separate from the community bot; but maybe 90% of the rate limit is used up by the lean4 CI stuff anyway, in which case that won't help much</p>",
        "id": 445805294,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1718877202
    },
    {
        "content": "<p>The code is all in Mathlib, in <code>.github/workflows</code> (sometimes calling scripts from <code>scripts</code>). This one is called running from <code>- name: Post comments for lean-pr-testing branch</code> in <code>build.yml</code>.</p>",
        "id": 445835638,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718887948
    },
    {
        "content": "<p>The error happened three times after being triggered by a commit. I restarted the job manually and it succeeded.</p>",
        "id": 445860031,
        "sender_full_name": "Markus Schmaus",
        "timestamp": 1718892831
    }
]